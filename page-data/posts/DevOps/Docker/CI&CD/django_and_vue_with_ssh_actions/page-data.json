{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions/","result":{"data":{"markdownRemark":{"id":"23b3161e-aa45-5783-8e68-a66fcf3ac36b","html":"<h1 id=\"시작하기-전에---omit-in-toc---\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-%EC%A0%84%EC%97%90---omit-in-toc---\" aria-label=\"시작하기 전에   omit in toc    permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시작하기 전에...<!-- omit in toc --></h1>\n<blockquote>\n<p>Django와 Vue를 이용해서 만든 <a href=\"https://github.com/Byongho96/boogie-project\">Boogie 프로젝트</a>의 <strong>기초적인</strong> 배포 과정을 정리한 문서이다.<br>\n<a href=\"https://boogie-movie.site/\">Boogie 웹사이트 링크</a></p>\n</blockquote>\n<ul>\n<li>.pem 키를 이용해 원격 EC2에 SSH(Secure Shell)로 접속하여, 쉘커맨드를 실행시키는 방식으로 배포한다.</li>\n<li>이 방식은 간단하지만, 어떤 보안 상의 이슈가 있을지 확신할 수 없다. Github Action을 활용한 보다 정형화 된 배포 방법으로는 <strong>AWS의 CodeDeploy</strong>를 알아보는 걸 추천한다.</li>\n</ul>\n<h1 id=\"index---omit-in-toc---\" style=\"position:relative;\"><a href=\"#index---omit-in-toc---\" aria-label=\"index   omit in toc    permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Index<!-- omit in toc --></h1>\n<ul>\n<li><a href=\"#1-django-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\">1. Django 배포 준비</a>\n<ul>\n<li><a href=\"#11-django-env-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1\">1.1. Django .env 파일 생성</a>\n<ul>\n<li><a href=\"#111-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\">1.1.1. .env 파일 작성</a></li>\n<li><a href=\"#112-django-environ\">1.1.2. django-environ</a></li>\n<li><a href=\"#113-gitignore-%EC%88%98%EC%A0%95\">1.1.3. .gitignore 수정</a></li>\n</ul>\n</li>\n<li><a href=\"#12-debug-%EB%AA%A8%EB%93%9C-%EB%B3%80%ED%99%98\">1.2. DEBUG 모드 변환</a>\n<ul>\n<li><a href=\"#121-allowed_hosts-%EC%A0%9C%ED%95%9C\">1.2.1. ALLOWED_HOSTS 제한</a></li>\n<li><a href=\"#122-%EC%A0%95%EC%A0%81%ED%8C%8C%EC%9D%BC-%EC%A0%9C%EA%B3%B5-%EB%AA%BB%ED%95%A8\">1.2.2. 정적파일 제공 못함</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#2-vue-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\">2. Vue 배포 준비</a>\n<ul>\n<li><a href=\"#21-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\">2.1. .env 파일 작성</a></li>\n</ul>\n</li>\n<li><a href=\"#3-ec2-%EC%9E%91%EC%97%85\">3. EC2 작업</a>\n<ul>\n<li><a href=\"#31-django-%EB%B0%B0%ED%8F%AC\">3.1. Django 배포</a>\n<ul>\n<li><a href=\"#311-python-%EC%84%A4%EC%B9%98\">3.1.1. python 설치</a></li>\n<li><a href=\"#312-django-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%8B%A4%ED%96%89\">3.1.2. Django 어플리케이션 실행</a></li>\n<li><a href=\"#313-gunicorn-%EC%8B%A4%ED%96%89\">3.1.3. gunicorn 실행</a></li>\n</ul>\n</li>\n<li><a href=\"#32-vue-%EB%B0%B0%ED%8F%AC\">3.2. Vue 배포</a>\n<ul>\n<li><a href=\"#321-nodejs-%EC%84%A4%EC%B9%98\">3.2.1. node.js 설치</a></li>\n<li><a href=\"#322-vue-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B9%8C%EB%93%9C\">3.2.2. Vue 프로젝트 빌드</a></li>\n</ul>\n</li>\n<li><a href=\"#33-nginx\">3.3. nginx</a></li>\n</ul>\n</li>\n<li><a href=\"#4-github-actions\">4. Github Actions</a></li>\n</ul>\n<hr>\n<h1 id=\"1-django-배포-준비\" style=\"position:relative;\"><a href=\"#1-django-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\" aria-label=\"1 django 배포 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Django 배포 준비</h1>\n<p>Django 코드를 짜는 것과, Django를 배포하는 것의 전혀 다른 부분이다.</p>\n<p>개발한 Django 프로젝트를 실제 배포하기 전에, <strong>보안을 위해 <mark>최소한 다음의 절차</mark>는 밟아야 한다.</strong></p>\n<h2 id=\"11-django-env-파일-생성\" style=\"position:relative;\"><a href=\"#11-django-env-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1\" aria-label=\"11 django env 파일 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. Django .env 파일 생성</h2>\n<p><strong>.env 파일은 프로젝트의 환경변수를 저장하기 위한 단순 문자열 파일이다.</strong>\n보통 <mark>API_KEY와 같이 외부에 공개되면 안되는 값</mark>을, 프로젝트에 하드코딩하지 않고 따로 .env 파일에서 관리한다.</p>\n<p>그렇게 작성한 .env 파일은 .gitignore에 추가해서 github과 같이 온라인의 공개된 장소에 공유되지 않게 하고,<br>\n이후에 서버에 직접 추가하는 등의 추가 작업이 필요하다.</p>\n<h3 id=\"111-env-파일-작성\" style=\"position:relative;\"><a href=\"#111-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\" aria-label=\"111 env 파일 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1.1. .env 파일 작성</h3>\n<p>API_KEY처럼 외부에 공개되지 않아야 할 파일을 모아 .env 파일을 작성한다.</p>\n<p><strong>특히 SECRET_KEY는 Django 프로젝트 생성 시, 자동 생성되는 중요한 KEY값이므로 반드시 .env에 추가해야한다.</strong></p>\n<pre><code>SECRET_KEY=your-django-secret-key\nAPI_KEY=your-api-key\n</code></pre>\n<ul>\n<li><strong>변수 이름</strong>과 <strong>값</strong>은 '='로 연결되며, 사이에 공백은 들어가지 않는다.</li>\n<li><strong>변수 이름</strong>은 영어 대문자와 '_'의 조합으로 이뤄져야 한다.</li>\n</ul>\n<h3 id=\"112-django-environ\" style=\"position:relative;\"><a href=\"#112-django-environ\" aria-label=\"112 django environ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1.2. django-environ</h3>\n<p><a href=\"https://django-environ.readthedocs.io/en/latest/\">django-environ</a>은 Django 프로젝트에서 작성한 .env을 읽어오기 위한 Python 라이브러리이다.</p>\n<p>아래 절차는 공식문서의 내용을 따라 작성했다.</p>\n<ol>\n<li>\n<p><strong>django-environ 설치</strong><br>\ndjango-envrion은 가상환경 내에 설치하는 것을 권장한다.</p>\n<pre><code class=\"language-bash\">python -m pip install django-environ\n</code></pre>\n</li>\n<li>\n<p><strong>.env 파일 위치 확인</strong><br>\n작성한 .env 파일을 <strong>프로젝트의 루트 경로</strong>(manage.py가 위치한 곳)에 위치시킨다.</p>\n</li>\n<li>\n<p><strong>settings.py 수정</strong></p>\n<pre><code class=\"language-python\">import environ\nimport os\n\n# env 기본 설정\nenv = environ.Env(\n    # env파일에 있는 DEBUG 환경변수를 Boolean으로 타입변환한다.\n    # 만일 DEBUG 환경변수가 없을 경우, default값은 False이다.\n    # 배포환경에서는 반드시 False여야 한다.\n    DEBUG=(bool, False)\n)\n\n# 공식문서에서는 아래와 같이 BASE_DIR을 지정하지만, 그럴 경우 settings.py파일 내에서 BASE_DIR / 'subdir' 형식으로 파일경로를 지정할 수 없다.\n# BASE_DIR = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))\nBASE_DIR = Path(__file__).resolve().parent.parent\n\n# BASE_DIR 위치를 기준으로 .env 파일을 읽어온다.\nenviron.Env.read_env(os.path.join(BASE_DIR, '.env'))\n\n# .env 파일로부터 값 참조\nDEBUG = env('DEBUG')\nSECRET_KEY = env('SECRET_KEY')\n</code></pre>\n</li>\n</ol>\n<h3 id=\"113-gitignore-수정\" style=\"position:relative;\"><a href=\"#113-gitignore-%EC%88%98%EC%A0%95\" aria-label=\"113 gitignore 수정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1.3. .gitignore 수정</h3>\n<p>.gitignore파일에 .env를 추가해서 커밋되지 않도록 한다.<br>\n이후 따로 서버에서 .env 파일을 직접 생성해준다. 이따 해당 내용도 다룬다.</p>\n<pre><code># Environments\n.env\n.venv\nenv/\nvenv/\nENV/\nenv.bak/\nvenv.bak/\n</code></pre>\n<h2 id=\"12-debug-모드-변환\" style=\"position:relative;\"><a href=\"#12-debug-%EB%AA%A8%EB%93%9C-%EB%B3%80%ED%99%98\" aria-label=\"12 debug 모드 변환 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2. DEBUG 모드 변환</h2>\n<p>배포 환경에서 <code>DEBUG</code>값은 반드시 False여야 한다.</p>\n<p><a href=\"https://docs.djangoproject.com/en/4.2/ref/settings/#debug\">Django 공식문서</a>를 보면, DEBUG가 True일 경우 다음과 같은 문제가 있다.</p>\n<ul>\n<li>에러에 대한 구체적인 이유를 표시한다.(보안 이슈)</li>\n<li>손쉬운 디버깅을 위해 실행된 SQL를 모두 기억한다.(메모리 자원 낭비)</li>\n</ul>\n<p>따라서 배포 환경에서는 반드시 <code>DEBUG</code>를 <code>False</code>로 설정해야 한다. 이는 나중에 서버에서 작성할 .env 파일에서 <code>DEBUG=False</code>로 하던가, 아니면 아예 <code>DEBUG</code> 값을 집어 넣지 않으면 된다.</p>\n<pre><code>...\nDEBUG=False\n</code></pre>\n<p>그런데 <code>DEBUG=False</code>로 바꾸는 순간, 아래와 같은 몇 가지 제약사항이 추가된다.</p>\n<h3 id=\"121-allowed_hosts-제한\" style=\"position:relative;\"><a href=\"#121-allowed_hosts-%EC%A0%9C%ED%95%9C\" aria-label=\"121 allowed_hosts 제한 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2.1. ALLOWED_HOSTS 제한</h3>\n<p><code>DEBUG</code>가 <code>False</code>일 때는, 프로젝트를 호스팅 할 IP 주소를 <code>settings.py</code>에 명시해줘야 한다.</p>\n<pre><code class=\"language-python\"># settings.py\n\nALLOWED_HOSTS = [\n    '127.0.0.1',  # 로컬 IP 주소\n    {EC2 IP 주소}, # EC2 IP 주소\n]\n</code></pre>\n<h3 id=\"122-정적파일-제공-못함\" style=\"position:relative;\"><a href=\"#122-%EC%A0%95%EC%A0%81%ED%8C%8C%EC%9D%BC-%EC%A0%9C%EA%B3%B5-%EB%AA%BB%ED%95%A8\" aria-label=\"122 정적파일 제공 못함 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2.2. 정적파일 제공 못함</h3>\n<p><strong><code>DEBUG</code>가 <code>False</code>일 때는, Django는 정적 파일을 제공하지 못한다.</strong></p>\n<p>이 문제 때문에 한동안 골머리를 앓았다...\n배포하니까 갑자기 사용자 프로필을 api로 받아오지 못하는 것이다!!</p>\n<p><a href=\"https://forum.djangoproject.com/t/django-static-files-in-deployment-debug-false/16675/2\">구글링 해보니</a> Django는 <code>DEBUG=False</code>일 때 정적파일을 제공하지 못한다고 한다. <del>그럼 애초에 그런 기능을 넣지 말던가...</del></p>\n<p>따라서 Nginx와 같은 웹서버를 이용해서 정적파일을 제공해야 한다.<br>\n이에 대해서는 아래 <a href=\"#33-nginx\">nginx항목</a>에서 다룰 것이다.\n즉, 다음과 같은 미디어 파일 설정들이 배포 환경에서는 딱히 무용해지는 것이다.</p>\n<pre><code class=\"language-python\">from django.conf import settings\nfrom django.conf.urls.static import static\n\nurlpatterns = [\n    ...\n] + static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)\n\n</code></pre>\n<h1 id=\"2-vue-배포-준비\" style=\"position:relative;\"><a href=\"#2-vue-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\" aria-label=\"2 vue 배포 준비 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Vue 배포 준비</h1>\n<h2 id=\"21-env-파일-작성\" style=\"position:relative;\"><a href=\"#21-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\" aria-label=\"21 env 파일 작성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. .env 파일 작성</h2>\n<p>Vue도 Django와 마찬가지로 .env 파일을 통해 프로젝트의 환경변수를 설정할 수 있다.<br>\n그런데 몇가지 다른 점이 있다.</p>\n<ul>\n<li>\n<p><strong>보안 취약</strong><br>\n아무리 .env파일을 만들다고 한 들, <strong>프론트엔드 프로젝트가 빌드될 때 .env 파일도 함께 빌드된다.</strong><br>\n따라서 최종적으로 <strong>클라이언트 측에 환경 변수 값이 그대로 전달되어, 크롬 개발자 도구 등으로 확인</strong>할 수 있다.<br>\n<mark>정말 중요한 데이터라면, 아예 해당 값을 백서버에 두어 API등으로 전달받아야 한다.</mark></p>\n</li>\n<li>\n<p><strong>.env 파일 우선순위</strong><br>\n프론트엔드는 여러 종류의 .env파일이 있고, 이들 간의 우선순위가 있다.<br>\nVue 프로젝트가 <code>npm run serve</code> 명령어로 실행되면 개발 모드(Development)의 환경변수 파일들이 참조되고, <code>npm run build</code>명령어로 실행되면 배포 모드(production)의 환경변수 파일들이 참조된다.</p>\n<ul>\n<li><strong>Development</strong>: .env.development.local > .env.local > .env.development > .env</li>\n<li><strong>Production</strong>: .env.production.local > .env.local > .env.production > .env</li>\n</ul>\n</li>\n</ul>\n<p>나는 앞서 말한 프론트엔드 프로젝트 환경변수 파일의 <strong>보안 취약점</strong>때문에 API_KEY처럼 보안상으로 문제되는 환경변수는 Django가 관리하도록 했다.</p>\n<p>그리고 .env 파일 종류를 활용해서, 다음과 같이 로컬환경과 배포환경에서의 API 서버 URL을 나눴다.</p>\n<pre><code># .env\nVUE_APP_SERVER_URL=http://127.0.0.1:8000\n</code></pre>\n<pre><code># .env.production\nVUE_APP_SERVER_URL=http://boogie-movie.site\n</code></pre>\n<h1 id=\"3-ec2-작업\" style=\"position:relative;\"><a href=\"#3-ec2-%EC%9E%91%EC%97%85\" aria-label=\"3 ec2 작업 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. EC2 작업</h1>\n<p>아래부터의 내용은 AWS EC2 내부에서 진행된다.</p>\n<p>AWS EC2가 없거나, .pem키가 무엇이니 모르면 <a href=\"https://byongho96.github.io/TIL/posts/Tools/AWS/\">AWS EC2 기초 가이드</a>를 참고하길 바란다.</p>\n<h2 id=\"31-django-배포\" style=\"position:relative;\"><a href=\"#31-django-%EB%B0%B0%ED%8F%AC\" aria-label=\"31 django 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. Django 배포</h2>\n<h3 id=\"311-python-설치\" style=\"position:relative;\"><a href=\"#311-python-%EC%84%A4%EC%B9%98\" aria-label=\"311 python 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1.1. python 설치</h3>\n<p><strong>Django를 실행하기 위해서 당연히 python을 설치해야한다.</strong></p>\n<p>그 중 <a href=\"https://github.com/pyenv/pyenv\">pyenv</a>는 여러 개의 Python버전을 쉽게 관리할 수 있도록 한다. (Node.js로 치면 nvm같은 존재)</p>\n<p>아래 내용은 <a href=\"https://github.com/pyenv/pyenv\">pyenv 공식 문서</a>를 따라 정리했다.</p>\n<ol>\n<li>\n<p><strong>pyenv github repo 클론</strong></p>\n<pre><code class=\"language-bash\">git clone https://github.com/pyenv/pyenv.git ~/.pyenv\n</code></pre>\n</li>\n<li>\n<p><strong>환경변수와 PATH 등록</strong></p>\n<pre><code class=\"language-bash\"># 현재 사용자(.bashrc)에 대해 PYENV_ROOT 환경변수를 지정한다.\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.bashrc\n\n# pyenv가 설치되어 있는지 확인하고, 설치되어있지 않으면 PATH 환경 변수에 pyenv 경로(~/.pyenv/bin)을 추가한다.\n# PATH는 : 를 기준으로 참조하는 디렉토리를 구분해서 저장한다.\n# bin폴더에 실행 가능한 파일지 저장된다.\necho 'command -v pyenv >/dev/null || export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.bashrc\n\n# (pyenv init -)는 pyenv 초기화 쉘코드를 출력하고, 이를 .bashrc에 추가해서 로그인시마다 pyenv를 초기화시킨다.\necho 'eval \"$(pyenv init -)\"' >> ~/.bashrc\n</code></pre>\n<pre><code class=\"language-bash\"># 로그인 환경변수(.profile)에도 적용한다.\necho 'export PYENV_ROOT=\"$HOME/.pyenv\"' >> ~/.profile\necho 'command -v pyenv >/dev/null || export PATH=\"$PYENV_ROOT/bin:$PATH\"' >> ~/.profile\necho 'eval \"$(pyenv init -)\"' >> ~/.profile\n</code></pre>\n</li>\n<li>\n<p><strong>shell 재시작</strong><br>\nPATH 변경사항을 반영하기 위해 shell을 재시작한다.</p>\n<pre><code class=\"language-bash\"> exec \"$SHELL\"\n</code></pre>\n</li>\n<li>\n<p><strong>Python build dependcies 설치</strong></p>\n<pre><code class=\"language-bash\">sudo apt update; sudo apt install build-essential libssl-dev zlib1g-dev \\\nlibbz2-dev libreadline-dev libsqlite3-dev curl \\\nlibncursesw5-dev xz-utils tk-dev libxml2-dev libxmlsec1-dev libffi-dev liblzma-dev\n</code></pre>\n</li>\n<li>\n<p><strong>pyenv 설치 확인</strong></p>\n<pre><code class=\"language-bash\">pyenv -v\n\n# 출력 확인 => pyenv VERSION_INFO\n</code></pre>\n</li>\n<li>\n<p><strong>python 설치</strong></p>\n<p>자신의 프로젝트에 맞는 python 버전을 설치한다</p>\n<pre><code class=\"language-bash\">pyenv install 3.9.X\npyenv global 3.9.X\npython -V\n</code></pre>\n</li>\n</ol>\n<h3 id=\"312-django-어플리케이션-실행\" style=\"position:relative;\"><a href=\"#312-django-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%8B%A4%ED%96%89\" aria-label=\"312 django 어플리케이션 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1.2. Django 어플리케이션 실행</h3>\n<ol>\n<li>\n<p><strong>프로젝트 클론</strong><br>\n먼저 자신의 Django git 프로젝트를 클론한다.</p>\n<pre><code class=\"language-bash\">cd ~\ngit clone {project_remote_url}\n</code></pre>\n</li>\n<li>\n<p><strong>Django .env 생성</strong></p>\n<p>vi 등의 문서 편집기로 .env파일을 작성한다.</p>\n<pre><code class=\"language-bash\">cd {장고_프로젝트_폴더}\nsudo vi .env\n# vi 에디터 사용법을 모를 경우, 구글링해보자\n</code></pre>\n<p>vi가 없을 시에는, 아래 명령어로 설치로 설치할 수 있다.</p>\n<pre><code class=\"language-bash\">sudo apt-get update\nsudo apt-get install vim\n</code></pre>\n</li>\n<li>\n<p><strong>Python 가상환경 실행</strong></p>\n<p>Python 가상환경을 실행한다.</p>\n<pre><code class=\"language-bash\">python -m venv venv\nsource venv/bin/activate\npip install -r requirements.txt\n</code></pre>\n</li>\n<li>\n<p><strong>Django DB 생성</strong></p>\n<p>Django 데이터베이스 생성</p>\n<pre><code class=\"language-bash\">python manage.py migrate\n\n# fixture가 있는 경우\npython manage.py loaddata {fixture 파일}\n</code></pre>\n</li>\n<li>\n<p><strong>Django static파일 수집</strong></p>\n<p>제공할 static파일이 있을 경우, 아래 명령어로 static파일을 모은다.</p>\n<pre><code class=\"language-bash\">python manage.py collectstatic\n</code></pre>\n<p>수집되는 위치는 settings.py 설정을 따른다.</p>\n<pre><code class=\"language-python\"># settings.py\n\n# 수집할 위치 확인\nSTATIC_ROOT = BASE_DIR / 'staticfiles'\n</code></pre>\n</li>\n</ol>\n<h3 id=\"313-gunicorn-실행\" style=\"position:relative;\"><a href=\"#313-gunicorn-%EC%8B%A4%ED%96%89\" aria-label=\"313 gunicorn 실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1.3. gunicorn 실행</h3>\n<p>개발할 때 사용하던, <code>runserver</code>명령어를 배포환경에서 사용하면 안된다.<br>\n<a href=\"https://docs.djangoproject.com/en/4.2/ref/django-admin/#runserver\">Django 공식문서</a>에 따르면, 이는 개발 서버로써 보안과 성능이 떨어지기 때문이다.</p>\n<p>따라서 다른 미들웨어를 사용해야 하는데,\nPython프레임워크의 대표적인 WSGI(Web Server Gateway Interface)인 <a href=\"https://docs.gunicorn.org/en/stable/install.html\">gunicorn</a>을 사용할 것이다.(2023년 상반기 기준)</p>\n<ol>\n<li>\n<p><strong>gunicorn 설치</strong><br>\ndjango 프로젝트 가상환경 내에서 설치한다.</p>\n<pre><code class=\"language-bash\">pip install gunicorn\n</code></pre>\n</li>\n<li>\n<p><strong>ALLOWED_HOSTS 확인</strong><br>\nDjango를 gunicorn으로 서비스하기 위해서는 ALLOWED_HOSTS를 지정해줘야 한다.</p>\n<pre><code class=\"language-python\"># settings.py\n\nALLOWED_HOSTS = [\n    '127.0.0.1',  # 로컬 IP 주소\n    {EC2 IP 주소}, # EC2 IP 주소\n]\n</code></pre>\n</li>\n<li>\n<p><strong>gunicorn 시스템 서비스 등록</strong><br>\ngunicorn을 시스템 서비스에 등록하면, 운영체제의 백그라운드에서 돌아간다.<br>\n좀더 직관적으로 표현하자면, 서버 컴퓨터가 켜져있는 한 계속 실행되고 있도록 등록하는 것이다.</p>\n<p><strong>어떤 프로그램을 시스템 서비스에 등록하기 위해서는 <code>/etc/systemd/system/</code>경로에 .service파일을 작성</strong>해야한다.</p>\n<pre><code class=\"language-bash\">sudo vi /etc/systemd/system/gunicorn.service\n</code></pre>\n<p>unit 설정 파일 작성법은 <a href=\"https://byongho96.github.io/TIL/posts/Tools/Linux/#32-service\">Linux.md</a>에 정리해두었다. <del>근데 나도 잘 모름</del>\n아래 예시 파일을 그대로 가져다가 써도 된다.<br>\nworkers란 gunicorn의 프로세스 갯수를 의미하며, 직관적으로 workers를 크게 설정할수록 동시에 많은 요청을 처리할 수 있지만, 메모리 점유율과 성능을 고려하여 <code>2 * {CPU 코어 수} + 1</code>을 기본값으로 슨다.</p>\n<pre><code class=\"language-c\">[Unit]\nDescription=gunicorn daemon\nAfter=network.target\n\n[Service]\nUser=ubuntu\nGroup=www-data\nWorkingDirectory=/home/ubuntu/{장고 프로젝트 폴더}\nExecStart=/home/ubuntu/{장고 프로젝트 폴더}/venv/bin/gunicorn \\\n        --workers 3 \\\n        --bind 127.0.0.1:8000 \\\n        {장고 마스터 앱}.wsgi:application\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n</li>\n<li>\n<p><strong>시스템 데몬을 재시작</strong></p>\n<p>unit파일을 작성했으면, 시스템 데몬을 재시작 하여 gunicorn 서비스를 실행시킨다.</p>\n<pre><code class=\"language-bash\">sudo systemctl daemon-reload\n\nsudo systemctl start gunicorn\nsudo systemctl enable gunicorn\nsudo systemctl status gunicorn.service\n\n# 중지\n# sudo systemctl stop gunicorn\n\n# 재시작\n# sudo systemctl restart gunicorn\n</code></pre>\n</li>\n</ol>\n<h2 id=\"32-vue-배포\" style=\"position:relative;\"><a href=\"#32-vue-%EB%B0%B0%ED%8F%AC\" aria-label=\"32 vue 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. Vue 배포</h2>\n<h3 id=\"321-nodejs-설치\" style=\"position:relative;\"><a href=\"#321-nodejs-%EC%84%A4%EC%B9%98\" aria-label=\"321 nodejs 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2.1. node.js 설치</h3>\n<p><strong>역시 Vue를 빌드하기 위해서는 당연히 node.js를 설치해야한다.</strong></p>\n<p><a href=\"https://linuxize.com/post/how-to-install-node-js-on-ubuntu-20-04/\">Ubuntu 20.04 Node.js 설치 문서</a>를 따라 아래 내용을 작성했다.</p>\n<ol>\n<li>\n<p><strong>node.js 설치</strong></p>\n<p>node.js 설치 및 버전 확인</p>\n<pre><code class=\"language-bash\">sudo apt update\nsudo apt install nodejs npm\nnodejs --version\n</code></pre>\n<p>Vue 2.0 프로젝트를 빌드하기 위해서는 nodejs의 버전이 v12.x 이상이어야 한다.<br>\n위 명령어에서 확인한 버전이 12.x 미만일 경우, 아래 명령어를 따라한다.</p>\n<pre><code class=\"language-bash\"># node 설치관련 스크립트를 다운받고, bash 쉘을 root권한으로 재시작한다.\ncurl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -\nsudo apt install nodejs\nnode --version\n</code></pre>\n</li>\n<li>\n<p><strong>build-essential 설치</strong><br>\n노드 패키지(모듈)에서 C/C++로 작성된 부분을 natvie addons라고 말하고, 이러한 패키지를 설치하기 위해서는 해당 운영 체제에서 빌드(컴파일) 도구를 설치해야 한다.</p>\n<pre><code class=\"language-bash\">sudo apt install build-essential\n</code></pre>\n</li>\n</ol>\n<h3 id=\"322-vue-프로젝트-빌드\" style=\"position:relative;\"><a href=\"#322-vue-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B9%8C%EB%93%9C\" aria-label=\"322 vue 프로젝트 빌드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2.2. Vue 프로젝트 빌드</h3>\n<ol>\n<li>\n<p><strong>프로젝트 클론</strong><br>\n자신의 Vue git 프로젝트를 클론한다.<br>\nDjango랑 동일한 레포에 있다면, 굳이 또 해줄 필요 없다.</p>\n<pre><code class=\"language-bash\">cd ~\ngit clone {project_remote_url}\n</code></pre>\n</li>\n<li>\n<p><strong>Vue .env 생성</strong></p>\n<p>vi 등의 문서 편집기로 .env파일을 작성한다.</p>\n<pre><code class=\"language-bash\">cd {Vue_프로젝트_폴더}\nsudo vi .env\n</code></pre>\n</li>\n<li>\n<p><strong>npm module 설치</strong></p>\n<pre><code class=\"language-bash\">cd {Vue_프로젝트_폴더}\nnpm install\n</code></pre>\n</li>\n<li>\n<p><strong>Vue 프로젝트 빌드</strong><br>\nVue 프로젝트를 빌드할 경우, 프로젝트 루트경로 dist폴더 내에 index.html파일이 생성된다.</p>\n<pre><code class=\"language-bash\">npm run buld\n</code></pre>\n</li>\n</ol>\n<h2 id=\"33-nginx\" style=\"position:relative;\"><a href=\"#33-nginx\" aria-label=\"33 nginx permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3. nginx</h2>\n<p>Nginx를 웹서버로 사용해서 정적 파일을 제공하고 api요청을 reverse proxy할 수 있다.<br>\n따라서 Nginx로 다음 기능들을 구현할 것이다.</p>\n<ul>\n<li>HTTP api 요청 Django 어플리케이션으로 프록시</li>\n<li>Django 정적파일 제공</li>\n<li>Vue 빌드파일 제공</li>\n</ul>\n<p>Nginx에 대한 더 자세한 설명은 <a href=\"https://byongho96.github.io/TIL/posts/Tools/Nginx/\">Nginx.md</a>에 정리되어 있다.</p>\n<ol>\n<li>\n<p><strong>nginx 설치</strong></p>\n<pre><code>sudo apt-get update\nsudo apt-get install -y nginx\n</code></pre>\n</li>\n<li>\n<p><strong>nginx 설정파일 작성</strong><br>\n<code>/etc/nginx/sites-available</code> 경로에 nginx 설정파일을 원하는 이름으로 작성한다.</p>\n<pre><code>sudo vi /etc/nginx/sites-available/{프로젝트 이름}\n</code></pre>\n<p><strong>nginx 설정파일의 구체적인 내용은 프로젝트에 따라서 달라진다.</strong></p>\n<ul>\n<li>Django로 가는 API 요청의 url엔드포인트가 모두 <code>/api</code>임을 가정하고, 아래 설정파일을 작성했다.</li>\n<li>Django가 자체적으로 정적파일을 제공하고 있다면, STATIC_ROOT와 MEDIA_ROOT를 settings.py에서 확인해야 한다. 보통 STATIC_ROOT는 'staticfiles'로 설정하고, MEDIA_ROOT는 'media'로 설정된다.</li>\n<li>Vue 프로젝트의 빌드된 index.html이 <code>dist/</code>에 있음을 가정하고, 아래 설정파일을 작성했다.</li>\n</ul>\n<pre><code class=\"language-nginx\">server {\n     listen 80;\n     server_name {서버IP주소};\n\n     # Django static 파일 제공\n     location /static/ {\n             alias {장고 프로젝트 루트 경로}/{STATIC_ROOT}/;\n     }\n\n     # Django media 파일 제공\n     location /media/ {\n             alias {장고 프로젝트 루트 경로}/{MEDIA_ROOT}/;\n     }\n\n     # Django API proxy\n     location /api {\n             include proxy_params;\n             proxy_pass http://127.0.0.1:8000;\n     }\n\n     # Vue 빌드 파일 제공\n     location / {\n             root {Vue 프로젝트 루트 경로}/dist/;\n             index index.html;\n             try_files $uri $uri/ /index.html;\n     }\n }\n</code></pre>\n</li>\n<li>\n<p><strong>nginx 설정파일 활성화</strong><br>\n<code>sites-availables/</code>에 작성한 설정파일을 실제로 활성화 하기 위해서는 <code>sites-enabled/</code>폴더에 등록해야 한다.<br>\n소프트 링크를 통해 이를 구현할 수 있는데, 간단히 말해 포인터를 만든다고 생각하면 된다.</p>\n<pre><code class=\"language-bash\">sudo ln -s /etc/nginx/sites-available/{설정파일 이름} /etc/nginx/sites-enabled\n</code></pre>\n</li>\n<li>\n<p><strong>nginx 재시작</strong><br>\n작성한 설정파일을 활성화 하기 위해 nginx를 재시작한다.</p>\n<pre><code class=\"language-bash\"># 80번 포트의 프로세서 종료\nsudo lsof -t -i tcp:80 -s tcp:listen | sudo xargs kill\n\n# nginx 재시작\nsudo systemctl restart nginx\n</code></pre>\n</li>\n</ol>\n<h1 id=\"4-github-actions\" style=\"position:relative;\"><a href=\"#4-github-actions\" aria-label=\"4 github actions permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Github Actions</h1>\n<p>지금까지 위의 모든 절차를 따라했다면 배포가 완료되었다. EC2 IP주소로 접속하면 확인해볼 수 있을 것이다.</p>\n<p>이제는 github actions를 이용해서 github 레포지토리에 push이벤트가 발생할 경우, <mark>자동 빌드/배포가 되는 환경을 구축</mark>해볼 것이다.</p>\n<p>SSH를 통해 원격의 EC2에서 직접 쉘명령어를 실행시키는 간단한 방법을 사용할 것이다.\n참고로 핵심이 되는 action은 <a href=\"https://github.com/appleboy/ssh-action\">appleboy/ssh-action</a>이다.</p>\n<ol>\n<li>\n<p><strong>Github 레포지토리 접속</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/a58376a68251c52935edd64e86faf8cc/ec7ce/github_repository.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 36.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHckKBP/8QAFxAAAwEAAAAAAAAAAAAAAAAAAAIQEf/aAAgBAQABBQKYx//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAAMAAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQAGPwJQ/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERIVFh/9oACAEBAAE/IawgbHTj1H//2gAMAwEAAgADAAAAEPPf/8QAFREBAQAAAAAAAAAAAAAAAAAAABH/2gAIAQMBAT8QR//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABoQAAIDAQEAAAAAAAAAAAAAAAERACGBUbH/2gAIAQEAAT8QA6PIgFE7CA3FMfs//9k='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/a58376a68251c52935edd64e86faf8cc/c54d4/github_repository.webp 175w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/a3432/github_repository.webp 350w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/426ac/github_repository.webp 700w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/dbca2/github_repository.webp 970w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/a58376a68251c52935edd64e86faf8cc/e52aa/github_repository.jpg 175w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/70ebb/github_repository.jpg 350w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/29d31/github_repository.jpg 700w,\n/TIL/static/a58376a68251c52935edd64e86faf8cc/ec7ce/github_repository.jpg 970w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/a58376a68251c52935edd64e86faf8cc/29d31/github_repository.jpg\" alt=\"github_repository.jpg\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>Github 레포지토리에 접속해 Actions 항목을 클릭한다.</p>\n</li>\n<li>\n<p><strong>workflow 작성</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/d655e8c68e0568123d09989a8a60cbee/5c42d/github_actions.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 53.714285714285715%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAdywSD//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAEFAl//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEQQWH/2gAIAQEAAT8hh8EIwyv/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBAAAwABBQAAAAAAAAAAAAAAAAERITFBUYHR/9oACAEBAAE/EEZ4hdkbwjg9DSg0P//Z'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/d655e8c68e0568123d09989a8a60cbee/c54d4/github_actions.webp 175w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/a3432/github_actions.webp 350w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/426ac/github_actions.webp 700w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/c139f/github_actions.webp 1050w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/c4443/github_actions.webp 1347w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/d655e8c68e0568123d09989a8a60cbee/e52aa/github_actions.jpg 175w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/70ebb/github_actions.jpg 350w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/29d31/github_actions.jpg 700w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/9ecec/github_actions.jpg 1050w,\n/TIL/static/d655e8c68e0568123d09989a8a60cbee/5c42d/github_actions.jpg 1347w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/d655e8c68e0568123d09989a8a60cbee/29d31/github_actions.jpg\" alt=\"github_actions.jpg\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>실행시킬 workflow를 <strong>yml파일</strong> 양식으로 작성해야 한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/301d8/github_yml.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHdaCSyP//EABYQAQEBAAAAAAAAAAAAAAAAABABEf/aAAgBAQABBQIwp//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AUf/xAAXEAADAQAAAAAAAAAAAAAAAAABECAx/9oACAEBAAY/Alpj/8QAGRABAAIDAAAAAAAAAAAAAAAAAAExESFB/9oACAEBAAE/IcJ0kOqIp//aAAwDAQACAAMAAAAQsw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAWEQEBAQAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QjD//xAAaEAADAQEBAQAAAAAAAAAAAAAAAREhMUGh/9oACAEBAAE/EEl7pKr2uDE702VZ8ExocD//2Q=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/c54d4/github_yml.webp 175w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/a3432/github_yml.webp 350w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/426ac/github_yml.webp 700w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/c139f/github_yml.webp 1050w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/7f403/github_yml.webp 1400w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/fe3fb/github_yml.webp 1485w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/e52aa/github_yml.jpg 175w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/70ebb/github_yml.jpg 350w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/29d31/github_yml.jpg 700w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/9ecec/github_yml.jpg 1050w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/d165a/github_yml.jpg 1400w,\n/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/301d8/github_yml.jpg 1485w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/1e5f854b18f576e7fc527ead33d48a4a/29d31/github_yml.jpg\" alt=\"github_yml.jpg\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<pre><code class=\"language-yml\"># workflow의 이름\nname: AWS Deploy\n\n# main 브랜치에 push가 일어났을 때, 현재 workflow를 발동시킨다.\non:\n   push:\n      branches:\n         - main\n\n# workflow는 하나 이상의 job으로 구성되고, 각 job을 서로 다른 실행환경에서 진행시킬 수 있다.\njobs:\n   Deploy:  # job_id라고 하며 job의 id로 작용한다. 문자열을 이용해서 unique하게 작명하면 된다.\n      name: Deploy to EC2  # name은 github UI상에 표시되는 job 이름이다.\n      runs-on: ubuntu-latest  # job의 실행환경을 정의하며, 공식문서를 참고해서 정해진 label을 사용해야 한다.\n\n      # 하단의 uses는 작업단계를 자동화하기 위해 사용되는 패키지 혹은 코드를 말하며 이는 특정 github 레포지토리일수도, 도커 이미지일수도 있다.\n      steps:\n         - uses: actions/checkout@v3\n         - name: SSH\n         uses: appleboy/ssh-action@v0.1.10\n         # with는 key-value형식으로 정의되는 환경변수이다. 하단의 양식은 appleboy/ssh-action에서 정의된 것이다.\n         with:\n            # github secrets에 저장해둔 값을 가져와 사용한다.\n            key: ${{ secrets.SSH_KEY }}\n            host: ${{ secrets.HOST }}\n            username: ${{ secrets.USER }}\n            # 실제로 실행시키고 싶은 쉘명령어를 작성한다.\n            script: |\n               cd {EC2 상 백엔드 레포 루트 경로}\n               git switch {타겟 브랜치}\n               git pull\n               source venv/bin/activate\n               pip install -r requirements.txt\n               sudo systemctl restart gunicorn\n               cd {EC2 상 프론트 레포 루트 경로}\n               git switch {타겟 브랜치}\n               git pull\n               npm install\n               npm run build\n</code></pre>\n<p>각 명령어에 대한 더 자세한 내용을 알고 싶으면, <a href=\"https://docs.github.com/en/actions/using-workflows/workflow-syntax-for-github-actions\">Github 공식문서</a>를 참고하길 바란다.</p>\n</li>\n<li>\n<p><strong>secrets 등록</strong></p>\n<p>앞 서 <code>key: ${{ secrets.SSH_KEY }}</code>처럼 작성한 행들은, 마치 환경변수처럼 레포지토리에 설정된 값을 불러오겠다는 의미이다.</p>\n<p>이 또한 중요한 값들을 하드코딩하지 않음으로써, 보안을 유지하기 위함이다. 아래 내용은 레포지토리에 secrets를 등록하는 방법이다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/7243f7bf011c36823bf821ecdca6a26f/e60b6/github_settings.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 32%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAGABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAduggJ//xAAWEAEBAQAAAAAAAAAAAAAAAAAAESH/2gAIAQEAAQUCxEf/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAXEAADAQAAAAAAAAAAAAAAAAAAEEGR/9oACAEBAAY/AlMP/8QAGBAAAgMAAAAAAAAAAAAAAAAAAAERUXH/2gAIAQEAAT8hwQoTh//aAAwDAQACAAMAAAAQg9//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAAMf/aAAgBAgEBPxBH/8QAGxABAAICAwAAAAAAAAAAAAAAAQARIZExQbH/2gAIAQEAAT8QDlXRHpGiJtGq4uz7P//Z'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/7243f7bf011c36823bf821ecdca6a26f/c54d4/github_settings.webp 175w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/a3432/github_settings.webp 350w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/426ac/github_settings.webp 700w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/c139f/github_settings.webp 1050w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/4690a/github_settings.webp 1075w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/7243f7bf011c36823bf821ecdca6a26f/e52aa/github_settings.jpg 175w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/70ebb/github_settings.jpg 350w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/29d31/github_settings.jpg 700w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/9ecec/github_settings.jpg 1050w,\n/TIL/static/7243f7bf011c36823bf821ecdca6a26f/e60b6/github_settings.jpg 1075w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/7243f7bf011c36823bf821ecdca6a26f/29d31/github_settings.jpg\" alt=\"github settings\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>레포지토리의 settings를 클릭한다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/51ceb63ae8fb7c1151da84682de4738c/2a79a/github_secrets_actions.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 63.42857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAe7UNA//xAAVEAEBAAAAAAAAAAAAAAAAAAAQQf/aAAgBAQABBQJh/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGRAAAgMBAAAAAAAAAAAAAAAAARAAQWGB/9oACAEBAAE/IanGBxf/2gAMAwEAAgADAAAAENPP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIVH/2gAIAQEAAT8QaqhsOpmcjhXYC4C5Ryf/2Q=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/51ceb63ae8fb7c1151da84682de4738c/c54d4/github_secrets_actions.webp 175w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/a3432/github_secrets_actions.webp 350w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/426ac/github_secrets_actions.webp 700w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/c139f/github_secrets_actions.webp 1050w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/2482d/github_secrets_actions.webp 1382w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/51ceb63ae8fb7c1151da84682de4738c/e52aa/github_secrets_actions.jpg 175w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/70ebb/github_secrets_actions.jpg 350w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/29d31/github_secrets_actions.jpg 700w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/9ecec/github_secrets_actions.jpg 1050w,\n/TIL/static/51ceb63ae8fb7c1151da84682de4738c/2a79a/github_secrets_actions.jpg 1382w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/51ceb63ae8fb7c1151da84682de4738c/29d31/github_secrets_actions.jpg\" alt=\"github secrets actions\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>왼쪽 사이드바에서 Secrets and variables > Actions 로 들어간다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/c1f40fe5addf4a3cc4368f486615b417/bb3bf/github_secrets.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 62.857142857142854%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAC/9oADAMBAAIQAxAAAAHeJKiH/8QAFxAAAwEAAAAAAAAAAAAAAAAAARARIP/aAAgBAQABBQJC4//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AVf/xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEQQVH/2gAIAQEAAT8hwR1RkX//2gAMAwEAAgADAAAAECD/AP/EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAEDAQE/EEf/xAAWEQADAAAAAAAAAAAAAAAAAAAAARH/2gAIAQIBAT8QHDh//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERITFB/9oACAEBAAE/EGqvRR6zB97kpOjo5BvT/9k='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/c1f40fe5addf4a3cc4368f486615b417/c54d4/github_secrets.webp 175w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/a3432/github_secrets.webp 350w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/426ac/github_secrets.webp 700w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/c139f/github_secrets.webp 1050w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/cc785/github_secrets.webp 1132w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/c1f40fe5addf4a3cc4368f486615b417/e52aa/github_secrets.jpg 175w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/70ebb/github_secrets.jpg 350w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/29d31/github_secrets.jpg 700w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/9ecec/github_secrets.jpg 1050w,\n/TIL/static/c1f40fe5addf4a3cc4368f486615b417/bb3bf/github_secrets.jpg 1132w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/c1f40fe5addf4a3cc4368f486615b417/29d31/github_secrets.jpg\" alt=\"github secrets\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>New repository secret을 눌러서 이전에 yml파일에서 작성했던 secrets값들을 등록한다.</p>\n<ul>\n<li><strong>SSH_KEY</strong><br>\nEC2에 등록된 .pem key\n<pre><code> -----BEGIN RSA PRIVATE KEY-----\n 위 아래 저 문구들도 같이 복사해줘야 한다!\n -----END RSA PRIVATE KEY-----\n</code></pre>\n</li>\n<li><strong>HOST</strong><br>\nEC2 IP주소</li>\n<li><strong>USER</strong><br>\nEC2 사용자 이름으로 AWS 페이지에서 확인할 수 있다.\nubuntu 서버이고, 따로 사용자를 생성해주지 않았다면 십중팔구 <code>ubuntu</code>이다.</li>\n</ul>\n</li>\n<li>\n<p><strong>로그 확인</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/6030297cc3a838c7b26e30ffd28ba602/2a118/github_workflows.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 37.14285714285714%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAEF/8QAFQEBAQAAAAAAAAAAAAAAAAAAAAH/2gAMAwEAAhADEAAAAd4RRX//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAWEAEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQEAAT8hTC//2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFhEBAQEAAAAAAAAAAAAAAAAAARAR/9oACAECAQE/EFdn/8QAGBABAAMBAAAAAAAAAAAAAAAAAQARIXH/2gAIAQEAAT8QC12oNhkOT//Z'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/6030297cc3a838c7b26e30ffd28ba602/c54d4/github_workflows.webp 175w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/a3432/github_workflows.webp 350w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/426ac/github_workflows.webp 700w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/c139f/github_workflows.webp 1050w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/7f403/github_workflows.webp 1400w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/3216d/github_workflows.webp 1465w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/6030297cc3a838c7b26e30ffd28ba602/e52aa/github_workflows.jpg 175w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/70ebb/github_workflows.jpg 350w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/29d31/github_workflows.jpg 700w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/9ecec/github_workflows.jpg 1050w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/d165a/github_workflows.jpg 1400w,\n/TIL/static/6030297cc3a838c7b26e30ffd28ba602/2a118/github_workflows.jpg 1465w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/6030297cc3a838c7b26e30ffd28ba602/29d31/github_workflows.jpg\" alt=\"github workflows\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>이 후 지정한 브랜치에서 push 이벤트가 발생하면, 자동으로 workflow가 실행된다.</p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/f0392dd67d320192a256afb27d073cfa/efabe/github_logs.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAEFBv/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAG0y4kCv//EABYQAAMAAAAAAAAAAAAAAAAAAAQQNP/aAAgBAQABBQIqZf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABUQAQEAAAAAAAAAAAAAAAAAAAIQ/9oACAEBAAY/Anf/xAAZEAACAwEAAAAAAAAAAAAAAAAAEQEhccH/2gAIAQEAAT8hph0lsZ//2gAMAwEAAgADAAAAEAwf/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QZ//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAECAQE/ECf/xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMbH/2gAIAQEAAT8QvXs+CTNcLP/Z'); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/f0392dd67d320192a256afb27d073cfa/c54d4/github_logs.webp 175w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/a3432/github_logs.webp 350w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/426ac/github_logs.webp 700w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/c139f/github_logs.webp 1050w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/7f403/github_logs.webp 1400w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/098de/github_logs.webp 1472w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/f0392dd67d320192a256afb27d073cfa/e52aa/github_logs.jpg 175w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/70ebb/github_logs.jpg 350w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/29d31/github_logs.jpg 700w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/9ecec/github_logs.jpg 1050w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/d165a/github_logs.jpg 1400w,\n/TIL/static/f0392dd67d320192a256afb27d073cfa/efabe/github_logs.jpg 1472w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/f0392dd67d320192a256afb27d073cfa/29d31/github_logs.jpg\" alt=\"github logs\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<p>클릭하면 자세한 로그 기록도 확인할 수 있으니, 혹시라도 에러가 발생하면 참고하자</p>\n</li>\n</ol>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0-%EC%A0%84%EC%97%90---omit-in-toc---\">시작하기 전에...<!-- omit in toc --></a></p>\n</li>\n<li>\n<p><a href=\"#index---omit-in-toc---\">Index<!-- omit in toc --></a></p>\n</li>\n<li>\n<p><a href=\"#1-django-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\">1. Django 배포 준비</a></p>\n<ul>\n<li>\n<p><a href=\"#11-django-env-%ED%8C%8C%EC%9D%BC-%EC%83%9D%EC%84%B1\">1.1. Django .env 파일 생성</a></p>\n<ul>\n<li><a href=\"#111-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\">1.1.1. .env 파일 작성</a></li>\n<li><a href=\"#112-django-environ\">1.1.2. django-environ</a></li>\n<li><a href=\"#113-gitignore-%EC%88%98%EC%A0%95\">1.1.3. .gitignore 수정</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#12-debug-%EB%AA%A8%EB%93%9C-%EB%B3%80%ED%99%98\">1.2. DEBUG 모드 변환</a></p>\n<ul>\n<li><a href=\"#121-allowed_hosts-%EC%A0%9C%ED%95%9C\">1.2.1. ALLOWED_HOSTS 제한</a></li>\n<li><a href=\"#122-%EC%A0%95%EC%A0%81%ED%8C%8C%EC%9D%BC-%EC%A0%9C%EA%B3%B5-%EB%AA%BB%ED%95%A8\">1.2.2. 정적파일 제공 못함</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-vue-%EB%B0%B0%ED%8F%AC-%EC%A4%80%EB%B9%84\">2. Vue 배포 준비</a></p>\n<ul>\n<li><a href=\"#21-env-%ED%8C%8C%EC%9D%BC-%EC%9E%91%EC%84%B1\">2.1. .env 파일 작성</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-ec2-%EC%9E%91%EC%97%85\">3. EC2 작업</a></p>\n<ul>\n<li>\n<p><a href=\"#31-django-%EB%B0%B0%ED%8F%AC\">3.1. Django 배포</a></p>\n<ul>\n<li><a href=\"#311-python-%EC%84%A4%EC%B9%98\">3.1.1. python 설치</a></li>\n<li><a href=\"#312-django-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-%EC%8B%A4%ED%96%89\">3.1.2. Django 어플리케이션 실행</a></li>\n<li><a href=\"#313-gunicorn-%EC%8B%A4%ED%96%89\">3.1.3. gunicorn 실행</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#32-vue-%EB%B0%B0%ED%8F%AC\">3.2. Vue 배포</a></p>\n<ul>\n<li><a href=\"#321-nodejs-%EC%84%A4%EC%B9%98\">3.2.1. node.js 설치</a></li>\n<li><a href=\"#322-vue-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B9%8C%EB%93%9C\">3.2.2. Vue 프로젝트 빌드</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#33-nginx\">3.3. nginx</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-github-actions\">4. Github Actions</a></p>\n</li>\n</ul>","frontmatter":{"title":"Django와 Vue 프로젝트 Github SSH Action으로 자동 배포하기","createdAt":"2023-05-20","updatedAt":"2023-07-21","tags":["DevOps","Django","Vue","배포","AWS","EC2","Github Actions"],"description":"Django와 Vue 프로젝트를 AWS EC2상에 배포하고, Github SSH Actions를 이용하여 자동 빌드 및 배포 환경을 구축한다","reference":null}},"allMarkdownRemark":{"nodes":[{"id":"23b3161e-aa45-5783-8e68-a66fcf3ac36b","excerpt":"시작하기 전에... Django와 Vue를 이용해서 만든 Boogie 프로젝트의 기초적인 배포 과정을 정리한 문서이다. Boogie 웹사이트 링크 .pem 키를 이용해 원격 EC2에 SSH(Secure Shell…","parent":{"id":"fe5abac8-6422-5d34-a4d6-68ba7c4dce05","name":"django_and_vue_with_ssh_actions","relativePath":"DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions.md"},"frontmatter":{"title":"Django와 Vue 프로젝트 Github SSH Action으로 자동 배포하기","createdAt":"2023-05-20","updatedAt":"2023-07-21"},"fields":{"slug":"/posts/DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions/"}},{"id":"f828d1c5-7288-5cc6-90ce-e904210bbfa9","excerpt":"1. CI/CD 구상도  개인적으로 CI/CD를 구축하는 데 있어 가장 큰 어려움은, 기술적인 난이도보다 전체 아키텍쳐 구성의 이해에 있는 것 같다. 위 아키텍쳐의 실제 동작 순서는 아래와 같다. Github…","parent":{"id":"6000e974-a8dc-5580-ae50-0f08eab3e8aa","name":"github_actions_argoCD","relativePath":"DevOps/Docker/CI&CD/github_actions_argoCD.md"},"frontmatter":{"title":"github-actions와 argoCD로 쿠버네티스 GitOps 관리하기","createdAt":"2024-03-04","updatedAt":"2024-03-04"},"fields":{"slug":"/posts/DevOps/Docker/CI&CD/github_actions_argoCD/"}}]}},"pageContext":{"pagePath":"/posts/DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions/","siblingPostsPathRegex":"/^(?!.*README).*DevOps\\/Docker\\/CI&CD\\/.*$/","relativeDirectory":"CI&CD","id":"23b3161e-aa45-5783-8e68-a66fcf3ac36b","parent":{"id":"fe5abac8-6422-5d34-a4d6-68ba7c4dce05","name":"django_and_vue_with_ssh_actions","relativePath":"DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions.md"},"fields":{"slug":"/posts/DevOps/Docker/CI&CD/django_and_vue_with_ssh_actions/"}}},"staticQueryHashes":["24302420","4059933791"],"slicesMap":{}}