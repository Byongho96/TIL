{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/Tools/Nginx.md/","result":{"data":{"markdownRemark":{"id":"2b971068-a2c9-527b-963c-faadf42c4b26","html":"<ul>\n<li><a href=\"#1-%EA%B0%9C%EC%9A%94\">1. 개요</a>\n<ul>\n<li><a href=\"#11-event-driven\">1.1. Event-driven</a></li>\n<li><a href=\"#12-nginx-%EC%84%A4%EC%B9%98\">1.2. Nginx 설치</a></li>\n</ul>\n</li>\n<li><a href=\"#2-%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0\">2. 폴더구조</a>\n<ul>\n<li><a href=\"#21-nginxconf\">2.1. nginx.conf</a>\n<ul>\n<li><a href=\"#211-confd\">2.1.1. conf.d/</a></li>\n<li><a href=\"#212-sites-enabled\">2.1.2. sites-enabled/</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#3-directives\">3. Directives</a>\n<ul>\n<li><a href=\"#31-block-directive\">3.1. Block Directive</a></li>\n<li><a href=\"#32-simple-directvie\">3.2. Simple Directvie</a></li>\n</ul>\n</li>\n<li><a href=\"#4-variable\">4. Variable</a></li>\n<li><a href=\"#5-feature\">5. feature</a>\n<ul>\n<li><a href=\"#51-ssl-certificate\">5.1. ssl certificate</a></li>\n<li><a href=\"#52-reverse-proxy\">5.2. reverse proxy</a></li>\n<li><a href=\"#53-load-balancing\">5.3. load balancing</a></li>\n<li><a href=\"#54-http-caching\">5.4. HTTP caching</a></li>\n<li><a href=\"#6-certbot\">6. certbot</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"1-개요\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9C%EC%9A%94\" aria-label=\"1 개요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 개요</h1>\n<p>Nginx는 오픈 소스 <strong>웹 서버(Web server)</strong> 프로그램이다. 따라서 정적 파일 요청을 수행할 수 있을 뿐 아니라, 동적 요청에 대해서도 많은 트래픽을 효율적으로 처리함으로써 웹 어플리케이션 서버(WAS)에 과부하를 줄여준다.</p>\n<p>Nginx는 대표적으로 리버스 프록시(reverse proxy), 로드 밸런서(load balancer), HTTP 캐싱(HTTP cahce) 기능을 수행할 수 있다. 이러한 기능등을 백서버의 안정성과 확장성을 가져다준다.</p>\n<ul>\n<li>\n<p><strong>리버스 프록시(reverse proxy)</strong><br>\n클라이언트 요청을 대신 받아 내부 서버로 전달해주는 것을 말한다. 따라서 Nginx에 SSL 인증서를 적용함으로써 Nginx가 수신 SSL 연결을 처리/해독하고 프록시 서버의 응답을 암호화하도록 할 수 있다.</p>\n</li>\n<li>\n<p><strong>로드 밸런싱(load balancing)</strong><br>\n클라이언트의 요청을 여러 개의 내부 서버에 분산하여 프록싱할 수 있다. 이를 통해 하나의 서버가 과부하되는 것을 방지할 수 있다.</p>\n</li>\n<li>\n<p><strong>HTTP 캐싱(HTTP Chacing)</strong><br>\n프록시 서버의 응답에서 수신한 콘텐츠를 메모리에 캐싱함으로써, 이후 동일 요청에 대해 프록시 서버에 연결할 필요 없이 빠르게 응답할 수 있다.</p>\n</li>\n</ul>\n<h2 id=\"11-event-driven\" style=\"position:relative;\"><a href=\"#11-event-driven\" aria-label=\"11 event driven permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. Event-driven</h2>\n<p>Nginx가 Apache와의 차이점이자 강점은 event-driven 웹 서버라는 것이다.</p>\n<p>먼저 기존 Apache의 경우, 하나의 요청에 대해 하나의 프로세스가 연결된다(1:1). 따라서 커넥션이 증가함에 따라 운용되는 프로세스 수가 증가하기 때문에 메모리 부족 현상이 일어나기 쉽다.</p>\n<p>반면 <strong>Nginx는 하나의 프로세스가 여러개의 요청을 처리할 수 있다(1:N).</strong> Nginx는 요청을 하나의 event로 간주하고 이를 event loop가 관리하도록 한다. 요청이 들어오는 대로 event loop는 요청을 queue에 추가하고 순서대로 처리한다. 만일 특정 요청을 수행하는데 오랜 시간이 걸릴 경우 이를 Thread pool에 넘김으로써 비동기적으로 진행시키고, 그 사이에 다른 요청들을 수행한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/TIL/static/51e71a2698ee56e2d2200f8318542742/2f5f2/Nginx_event_loop.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAQACBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHuOVGZf//EABgQAQADAQAAAAAAAAAAAAAAAAABEBES/9oACAEBAAEFAprUuWP/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAg/9oACAEBAAY/Al//xAAZEAADAQEBAAAAAAAAAAAAAAAAAREhMaH/2gAIAQEAAT8hZ8yEmpejZHYktIP/2gAMAwEAAgADAAAAEITP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBUYH/2gAIAQEAAT8Q4yztgTQsO0QrHpMCIY5i7RvdDiKbt9n/2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Nginx Event Loop\"\n        title=\"\"\n        src=\"/TIL/static/51e71a2698ee56e2d2200f8318542742/b4294/Nginx_event_loop.jpg\"\n        srcset=\"/TIL/static/51e71a2698ee56e2d2200f8318542742/75985/Nginx_event_loop.jpg 150w,\n/TIL/static/51e71a2698ee56e2d2200f8318542742/f93b5/Nginx_event_loop.jpg 300w,\n/TIL/static/51e71a2698ee56e2d2200f8318542742/b4294/Nginx_event_loop.jpg 600w,\n/TIL/static/51e71a2698ee56e2d2200f8318542742/2f5f2/Nginx_event_loop.jpg 797w\"\n        sizes=\"(max-width: 600px) 100vw, 600px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위의 내용은 <strong>브라우저의 event loop와도 매우 유사하게 동작한다.</strong></p>\n<ul>\n<li>다만 브라우저는 사용자 입력에 대한 이벤트를 처리하는데 초점을 맞추고, Nginx는 네트워크 I/O동작을 처리하는데 초점을 맞춘다.</li>\n<li>또한 브라우저는 단일 스레드만을 가지고 실행되지만, Nginx는 하나의 Master Process가 여러개의 Worker Process(Thread)를 생성할 수 있다.</li>\n</ul>\n<h2 id=\"12-nginx-설치\" style=\"position:relative;\"><a href=\"#12-nginx-%EC%84%A4%EC%B9%98\" aria-label=\"12 nginx 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2. Nginx 설치</h2>\n<p>아래 명령어는 리눅스 기반으로 작성되었다.</p>\n<ol>\n<li><strong>Package 업데이트</strong>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> update</code></pre></div>\n</li>\n<li><strong>Nginx 설치</strong>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx</code></pre></div>\n</li>\n<li><strong>Nginx 설치 확인</strong>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> nginx <span class=\"token parameter variable\">-v</span></code></pre></div>\n</li>\n</ol>\n<h1 id=\"2-폴더구조\" style=\"position:relative;\"><a href=\"#2-%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0\" aria-label=\"2 폴더구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 폴더구조</h1>\n<p>Nginx는 설치되었을 때 기본적으로 다음과 같은 폴더 구조를 가진다.</p>\n<p><a href=\"https://github.com/h5bp/server-configs-nginx\">폴더 구조 설명 github</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">nginx/\r\n├── conf.d/\r\n│   ├── default.conf\r\n│   └── templates/\r\n├── sites-available/\r\n│   └── default.conf\r\n├── sites-enabled/\r\n│   └── default.conf\r\n├── h5bp/\r\n│   ├── basic.conf\r\n│   ├── location/\r\n│   └── <span class=\"token punctuation\">..</span>./\r\n├── custom.d/\r\n│   └── <span class=\"token punctuation\">..</span>./\r\n├── mime.types\r\n└── nginx.conf</code></pre></div>\n<h2 id=\"21-nginxconf\" style=\"position:relative;\"><a href=\"#21-nginxconf\" aria-label=\"21 nginxconf permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. nginx.conf</h2>\n<p>Nginx의 메인(최상단) 설정 파일이다. 아래 요약된 설정파일을 보면 하단에 <code class=\"language-text\">include /etc/nginx/conf.d/*.conf;</code>명령어가 있는 것을 볼 수 있다.\r\n해당 명령어로 인해서 <strong>conf.d/ 폴더와 sites-enabled/ 폴더 하위에 있는 <code class=\"language-text\">*.conf</code> nginx 설정파일들은 모두 http 블록 다이렉티브 안에 선언된다.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">user www-data;\r\nworker_processes auto;\r\npid /run/nginx.pid;\r\ninclude /etc/nginx/modules-enabled/*.conf;\r\n\r\nevents {\r\n        worker_connections 768;\r\n        # multi_accept on;\r\n}\r\n\r\nhttp {\r\n\r\n        ##\r\n        # Basic Settings\r\n        ##\r\n\r\n        sendfile on;\r\n        tcp_nopush on;\r\n        tcp_nodelay on;\r\n        keepalive_timeout 65;\r\n        types_hash_max_size 2048;\r\n        # server_tokens off;\r\n\r\n        ...\r\n\r\n        ##\r\n        # Virtual Host Configs\r\n        ##\r\n\r\n        include /etc/nginx/conf.d/*.conf;\r\n        include /etc/nginx/sites-enabled/*;\r\n}\r\n</code></pre></div>\n<h3 id=\"211-confd\" style=\"position:relative;\"><a href=\"#211-confd\" aria-label=\"211 confd permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1.1. conf.d/</h3>\n<p>conf.d/ 디렉토리에는 모든 웹 사이트와 웹 어플리케이션에 적용할 전역적인 <code class=\"language-text\">*.conf</code>파일을 생성한다. 이 폴더 하위에 생성된 설정 파일들은 자동적으로 nginx에 등록된다.</p>\n<h3 id=\"212-sites-enabled\" style=\"position:relative;\"><a href=\"#212-sites-enabled\" aria-label=\"212 sites enabled permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1.2. sites-enabled/</h3>\n<p>sites-enabled/ 디렉토리에는 웹 사이트/웹 어플리케이션 별로 적용할 지역적인 <code class=\"language-text\">*.conf</code>파일을 생성한다. <strong>하지만 해당 디렉토리에 직접 설정파일을 두지 않고, sites-availables 폴더에 작성한 뒤 심볼링 링크를 걸어준다.</strong>\r\n이렇게 함으로써 웹사이트별 모든 설정파일 들을 sites-availables에 쌓아두는 동시에, 필요에 따라 링크를 생성/삭제하여 적용여부를 결정할 수 있다.</p>\n<ul>\n<li>\n<p><strong>웹사이트 개별 설정 파일 작성</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">vi</span> /etc/nginx/sites-available/myite.conf</code></pre></div>\n</li>\n<li>\n<p><strong>소프트 링크 생성</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /etc/nginx/sites-available/mysite.conf /etc/nginx/sites-enabled/</code></pre></div>\n</li>\n<li>\n<p><strong>소프트 링크 삭제</strong><br>\n아래 명령어를 실행해도 링크만 끊을 뿐, 실제 원본 설정파일이 삭제되지는 않는다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">rm</span> /etc/nginx/sites-enabled/mysite.conf</code></pre></div>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>nginx 재시작</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">service</span> nginx restart</code></pre></div>\n</li>\n</ul>\n<h1 id=\"3-directives\" style=\"position:relative;\"><a href=\"#3-directives\" aria-label=\"3 directives permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Directives</h1>\n<p><a href=\"https://nginx.org/en/docs/http/ngx_http_core_module.html\">Nginx 공식문서 주요 module Directvie</a></p>\n<p>커맨드창 <code class=\"language-text\">nginx -t</code> 명령어를 통해 nginx 문법을 검사할 수 있다.</p>\n<h2 id=\"31-block-directive\" style=\"position:relative;\"><a href=\"#31-block-directive\" aria-label=\"31 block directive permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. Block Directive</h2>\n<ul>\n<li>\n<p><strong>http block</strong><br>\nhttp 프로토콜 내에서 동작함을 정의한다. 따라서 http 프로토콜 요청으로 동작하는 웹 서버 관련 설정은 모두 http 블록 안에서 정의된다.\r\n앞서 말한 <code class=\"language-text\">include /etc/nginx/conf.d/*.conf;</code> 또한 http 블록 내에서 선언되었기 때문에 <code class=\"language-text\">conf.d</code> 폴더 내의 설정파일들은 모두 http 프로토콜로 동작함을 전제한다.</p>\n</li>\n<li>\n<p><strong>server block</strong><br>\n서버 기능을 설정하는 블록으로 어떤 도메인과 port로 요청을 받을지 결정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">server <span class=\"token punctuation\">{</span>\r\n        listen  <span class=\"token number\">82</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 포트 번호</span>\r\n        server_name <span class=\"token string\">\"helloworld.com\"</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 도메인</span>\r\n        <span class=\"token comment\">// return을 따로 설정하지 않을 경우, nginx 자체 기본 html파일이 리턴된다.</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위 코드에서 실제 호스트의 도메인이 아닌 이름으로 server_name을 설정하면, DNS에 도메인가 호스트가 매핑되어있지 않기 때문에 요청이 가지 않는 것이 당연하다</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> localhost\r\n<span class=\"token number\">127.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span> helloworld<span class=\"token punctuation\">.</span>com\r\n\r\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span> <span class=\"token expression\">The following lines are desirable <span class=\"token keyword\">for</span> IPv6 capable hosts</span></span>\r\n<span class=\"token operator\">::</span><span class=\"token number\">1</span> ip6<span class=\"token operator\">-</span>localhost ip6<span class=\"token operator\">-</span>loopback\r\nfe00<span class=\"token operator\">::</span><span class=\"token number\">0</span> ip6<span class=\"token operator\">-</span>localnet\r\nff00<span class=\"token operator\">::</span><span class=\"token number\">0</span> ip6<span class=\"token operator\">-</span>mcastprefix\r\nff02<span class=\"token operator\">::</span><span class=\"token number\">1</span> ip6<span class=\"token operator\">-</span>allnodes\r\nff02<span class=\"token operator\">::</span><span class=\"token number\">2</span> ip6<span class=\"token operator\">-</span>allrouters\r\nff02<span class=\"token operator\">::</span><span class=\"token number\">3</span> ip6<span class=\"token operator\">-</span>allhosts</code></pre></div>\n<p>다만, local환경에서 요청을 보낼 경우, 위처럼 <code class=\"language-text\">/etc/hosts</code> 파일에 도메인과 ip주소를 매핑함으로써 DNS서버 앞단에서 도메인에 대한 ip주소를 임의 설정할 수 있다.</p>\n</li>\n<li>\n<p><strong>location block</strong><br>\n사용자 요청에 대해 엔드포인트 별로 설정할 수 있다. 기본적으로 prefix 규칙을 따르지만, <code class=\"language-text\">=</code>연산자를 붙여서 엔드포인트가 완전히 일치할 경우만 정의해줄 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">server <span class=\"token punctuation\">{</span>\r\n\t  listen  <span class=\"token number\">82</span><span class=\"token punctuation\">;</span>\r\n        server_name <span class=\"token string\">\"helloworld.com\"</span><span class=\"token punctuation\">;</span>\r\n\r\n        location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token number\">200</span> <span class=\"token string\">\"hello world\"</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        location <span class=\"token operator\">/</span>a<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token number\">200</span> <span class=\"token string\">\"hello world-a\"</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        locatioin <span class=\"token operator\">/</span>b <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token number\">200</span> <span class=\"token string\">\"hello world-b\"</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n        location <span class=\"token operator\">=</span> <span class=\"token operator\">/</span>c<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n            <span class=\"token keyword\">return</span> <span class=\"token number\">200</span> <span class=\"token string\">\"hello world-c\"</span><span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 설정하였을 때, curl요청에 대한 응답 예시이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">curl</span> helloworld.com:82/\r\n    hello world\r\n\r\n<span class=\"token function\">curl</span> helloworld.com:82/a\r\n    hello world\r\n\r\n<span class=\"token function\">curl</span> helloworld.com:82/a/\r\n    hello world-a\r\n\r\n<span class=\"token function\">curl</span> helloworld.com:82/b\r\n    hello world-b\r\n\r\n<span class=\"token function\">curl</span> helloworld.com:82/c/\r\n    hello world-c\r\n\r\n<span class=\"token function\">curl</span> helloworld.com:82/c/c\r\n    NotFound</code></pre></div>\n</li>\n</ul>\n<h2 id=\"32-simple-directvie\" style=\"position:relative;\"><a href=\"#32-simple-directvie\" aria-label=\"32 simple directvie permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. Simple Directvie</h2>\n<ul>\n<li><strong>root</strong><br>\n<strong>요청에 대해 root 폴더 경로를 지정</strong>한다.\r\n아래 설정에서는 <code class=\"language-text\">/i/top.gif</code> 요청에 대해 <code class=\"language-text\">/data/w3/i/top.gif</code> 파일이 리턴된다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">location <span class=\"token operator\">/</span>i<span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n\t  root <span class=\"token operator\">/</span>data<span class=\"token operator\">/</span>w3<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// 상대경로와 절대경로 모두 사용 가</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li><strong>index</strong><br>\n<strong>요청된 경로에 대한 기본 파일</strong>을 지정한다. 따라서 요청에 특정 파일이 명시되지 않아도 기본 파일을 반환한다.\r\n여러개의 파일을 지정할 수 있으며 nginx는 순서대로 읽는다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n    index index<span class=\"token punctuation\">.</span>$geo<span class=\"token punctuation\">.</span>html index<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li><strong>try files</strong><br>\n<strong>사용자 요청에 대한 (동적인)기본 파일을 지정한다.</strong> 사용자의 요청에 대한 파일을 동적으로 찾고, 모두 존재하지 않을 시 기본파일로 리다이렉트 할수 있다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n    try_files $uri $uri<span class=\"token operator\">/</span> <span class=\"token operator\">/</span>index<span class=\"token punctuation\">.</span>html<span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>요청된 URL에 대한 정적 파일 찾기 (<strong><code class=\"language-text\">$uri</code></strong>)</li>\n<li>요청된 URL에 대한 디렉토리 찾기 (<strong><code class=\"language-text\">$uri/</code></strong>)</li>\n<li><strong><code class=\"language-text\">/index.html</code></strong> 참조하기</li>\n</ol>\n</li>\n</ul>\n<h1 id=\"4-variable\" style=\"position:relative;\"><a href=\"#4-variable\" aria-label=\"4 variable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Variable</h1>\n<p><a href=\"https://nginx.org/en/docs/http/ngx_http_core_module.html#variables\">Nginx 공식문서 Embedded Variables</a>\r\nNginx는 설정 파일에서 사용할 수 있는 기본 변수들을 제공한다.</p>\n<ul>\n<li><strong>$uri</strong><br>\n현재 요청된 URI를 저장한다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">http<span class=\"token operator\">:</span><span class=\"token comment\">//example.com/about</span>\r\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span>about</code></pre></div>\n</li>\n<li><strong>$request_uri</strong><br>\nHTTP 요청 URI와 쿼리 문자열을 포함한 전체 요청 URI를 저장한다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">http<span class=\"token operator\">:</span><span class=\"token comment\">//example.com/about?foo=bar</span>\r\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token operator\">/</span>about<span class=\"token operator\">?</span>foo<span class=\"token operator\">=</span>bar</code></pre></div>\n</li>\n<li><strong>$host</strong><br>\n요청에 대한 호스트(도메인)이름을 저장한다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">http<span class=\"token operator\">:</span><span class=\"token comment\">//www.example.com/</span>\r\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> www<span class=\"token punctuation\">.</span>example<span class=\"token punctuation\">.</span>com</code></pre></div>\n</li>\n<li><strong>$server_name</strong><br>\nserver_name으로 지정된 값을 저장한다.\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">server <span class=\"token punctuation\">{</span>\r\n\t\t\t\tserver_name example<span class=\"token punctuation\">.</span>com\r\n<span class=\"token punctuation\">}</span>\r\n<span class=\"token operator\">=</span><span class=\"token operator\">></span> example<span class=\"token punctuation\">.</span>com</code></pre></div>\n</li>\n</ul>\n<h1 id=\"5-feature\" style=\"position:relative;\"><a href=\"#5-feature\" aria-label=\"5 feature permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. feature</h1>\n<h2 id=\"51-ssl-certificate\" style=\"position:relative;\"><a href=\"#51-ssl-certificate\" aria-label=\"51 ssl certificate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.1. ssl certificate</h2>\n<ul>\n<li>\n<p><strong>Nginx 중지</strong><br>\n인증서를 발급 받기 위해서는 nginx를 중지하여 port가 점유되지 않은 상태로 만들어야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> systemctl stop nginx</code></pre></div>\n</li>\n<li>\n<p><strong>letsencrypt 설치</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> letsencrypt</code></pre></div>\n</li>\n<li>\n<p><strong>ssl 인증서 발급</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> letsencrypt certonly <span class=\"token parameter variable\">--standalone</span> <span class=\"token parameter variable\">-d</span> <span class=\"token punctuation\">[</span>도메인주소<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p><strong>ssl 인증서 확인</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token builtin class-name\">cd</span> /etc/letsencrypt/live/<span class=\"token punctuation\">[</span>도메인<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p><strong>ssl 인증서 nginx 적용</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /etc/nginx/conf.d\r\n<span class=\"token function\">sudo</span> <span class=\"token function\">vim</span> <span class=\"token punctuation\">[</span>파일명<span class=\"token punctuation\">]</span>.conf</code></pre></div>\n<p><a href=\"https://www.youtube.com/watch?v=X3Pr5VATOyA\">유튜브 영상, How to Set Up SSL with NGINX</a></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">server <span class=\"token punctuation\">{</span>\r\n\tlisten <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\r\n\tserver_name <span class=\"token punctuation\">[</span>도메인 네임<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\t<span class=\"token builtin class-name\">return</span> <span class=\"token number\">301</span> https://<span class=\"token variable\">$server_name</span><span class=\"token variable\">$request_uri</span><span class=\"token punctuation\">;</span>\r\n<span class=\"token punctuation\">}</span>\r\n\r\nserver <span class=\"token punctuation\">{</span>\r\n\tlisten <span class=\"token number\">443</span> ssl<span class=\"token punctuation\">;</span>\r\n\tserver_name <span class=\"token punctuation\">[</span>도메인 네임<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\r\n\r\n\tssl_certificate /etc/nginx/ssl/example.crt<span class=\"token punctuation\">;</span>\r\n\tssl_certification_key /etc/nginx/ssl/example.key<span class=\"token punctuation\">;</span>\r\n\r\n\tlocation / <span class=\"token punctuation\">{</span>\r\n\t\t<span class=\"token punctuation\">..</span>.\r\n\t<span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"52-reverse-proxy\" style=\"position:relative;\"><a href=\"#52-reverse-proxy\" aria-label=\"52 reverse proxy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.2. reverse proxy</h2>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">server <span class=\"token punctuation\">{</span>\r\n    listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\r\n    server_name my_website<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\r\n\r\n    location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n        proxy_pass http<span class=\"token operator\">:</span><span class=\"token comment\">//10.0.0.1:8080;</span>\r\n        proxy_set_header Host $host<span class=\"token punctuation\">;</span>\r\n        proxy_set_header X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP $remote_addr<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><strong>server block</strong><br>\n포트 80에서 my_website.com 도메인을 수신하는 서버 블록을 정의한다.</li>\n<li><strong>location block</strong><br>\n'/' 로 모든 엔드포인트에 대해 설정한다.</li>\n<li><strong>proxy_pass</strong><br>\n10.0.0.1:8000 으로 서버로 요청을 프록시합니다.</li>\n<li><strong>proxy_set_header</strong><br>\n나가는 요청의 호스트 및 X-Real-IP 헤더를 설정한다. $remote_addr는 클라이언트 주소를 의미한다. 이를 통해 요청이 백엔드 서버로 올바르게 라우팅되고 올바른 클라이언트 IP 주소가 기록되도록 할 수 있다.</li>\n</ul>\n<h2 id=\"53-load-balancing\" style=\"position:relative;\"><a href=\"#53-load-balancing\" aria-label=\"53 load balancing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.3. load balancing</h2>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">http <span class=\"token punctuation\">{</span>\r\n    upstream my_backend <span class=\"token punctuation\">{</span>\r\n        server <span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.1</span><span class=\"token operator\">:</span><span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\r\n        server <span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.2</span><span class=\"token operator\">:</span><span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\r\n        server <span class=\"token number\">10.0</span><span class=\"token number\">.0</span><span class=\"token number\">.3</span><span class=\"token operator\">:</span><span class=\"token number\">8080</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">}</span>\r\n\r\n    server <span class=\"token punctuation\">{</span>\r\n        listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\r\n        server_name my_website<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\r\n\r\n        location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n            proxy_pass http<span class=\"token operator\">:</span><span class=\"token comment\">//my_backend;</span>\r\n            proxy_set_header Host $host<span class=\"token punctuation\">;</span>\r\n            proxy_set_header X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP $remote_addr<span class=\"token punctuation\">;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><strong>upstream block</strong><br>\nupstream 블록을 my_backend라고 이름 짓고, Nginx가 요청을 밸런싱할 서버를 담는다.</p>\n</li>\n<li>\n<p><strong>proxy_pass</strong><br>\nproxy_pass 디렉티브를 사용하여 my_backend 업스트림을 프록싱할 대상으로 지정한다.</p>\n</li>\n<li>\n<p><strong>proxy_set_header</strong><br>\n나가는 요청의 호스트 및 X-Real-IP 헤더를 설정한다. $remote_addr는 클라이언트 주소를 의미한다.</p>\n</li>\n</ul>\n<p>위 예시에서 Nginx는 라운드 로빈 방식으로 요청을 3개의 백엔드 서버에 밸런싱하여, 각 서버는 동일한 양의 수신 트래픽을 나눠가진다.</p>\n<h2 id=\"54-http-caching\" style=\"position:relative;\"><a href=\"#54-http-caching\" aria-label=\"54 http caching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.4. HTTP caching</h2>\n<p><a href=\"http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache\">Nginx 공식문서 http proxy module</a></p>\n<p>HTTP Caching은 cache key를 이용해서 이뤄진다. cache key는 HTTP 요청 method, URI, header등을 조합해서 만들 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">http <span class=\"token punctuation\">{</span>\r\n    proxy_cache_path <span class=\"token operator\">/</span>var<span class=\"token operator\">/</span>cache<span class=\"token operator\">/</span>nginx levels<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token operator\">:</span><span class=\"token number\">2</span> keys_zone<span class=\"token operator\">=</span>my_cache<span class=\"token operator\">:</span><span class=\"token number\">10</span>m inactive<span class=\"token operator\">=</span><span class=\"token number\">60</span>m<span class=\"token punctuation\">;</span>\r\n    proxy_cache_key <span class=\"token string\">\"$scheme$request_method$host$request_uri\"</span><span class=\"token punctuation\">;</span>\r\n\r\n    server <span class=\"token punctuation\">{</span>\r\n        listen <span class=\"token number\">80</span><span class=\"token punctuation\">;</span>\r\n        server_name my_website<span class=\"token punctuation\">.</span>com<span class=\"token punctuation\">;</span>\r\n\r\n        location <span class=\"token operator\">/</span> <span class=\"token punctuation\">{</span>\r\n            proxy_cache my_cache<span class=\"token punctuation\">;</span>\r\n            proxy_cache_valid <span class=\"token number\">200</span> <span class=\"token number\">60</span>m<span class=\"token punctuation\">;</span>\r\n            proxy_cache_valid <span class=\"token number\">404</span> <span class=\"token number\">1</span>m<span class=\"token punctuation\">;</span>\r\n            proxy_cache_bypass $http_pragma<span class=\"token punctuation\">;</span>\r\n            proxy_cache_revalidate on<span class=\"token punctuation\">;</span>\r\n            proxy_set_header Host $host<span class=\"token punctuation\">;</span>\r\n            proxy_set_header X<span class=\"token operator\">-</span>Real<span class=\"token operator\">-</span>IP $remote_addr<span class=\"token punctuation\">;</span>\r\n            proxy_pass http<span class=\"token operator\">:</span><span class=\"token comment\">//10.0.0.1:8080;</span>\r\n        <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p><strong>proxy_cache_path</strong><br>\nHTTP 캐시의 위치 설정.\r\n캐시 경로는 /var/cache/nginx이고,\r\nlevel=1:2는 캐싱 경로의 하위 디렉토리 크기를 결정한다.\r\n또한 my_cache라는 10MB의 크기를 가진 공유 메모리 영역을 만든다.\r\n마지막으로 캐싱된 항목은 60분까지 접근 되지 않아도 캐시에 저장된다.</p>\n</li>\n<li>\n<p><strong>proxy_cache_key</strong><br>\n$scheme(http/https), $request_method(요청 메소드), $host(호스트), $request_uri(URI)를 조합하여 캐시 키를 생성한다.</p>\n</li>\n<li>\n<p><strong>proxy_cache</strong><br>\n캐싱에 사용되는 공유 메모리 영역을 정의한다.</p>\n</li>\n<li>\n<p><strong>proxy_cache_valid</strong><br>\n응답을 캐싱할 기간을 설정한다.\r\n상태 코드가 200인 성공 응답은 60분 동안, 상태 코드가 404인 실패 응답은 1분 동안 저장한다.</p>\n</li>\n<li>\n<p><strong>proxy_cache_bypass</strong><br>\n캐시에서 응답을 가져오지 않는 조건을 정의한다.</p>\n</li>\n</ul>\n<h2 id=\"6-certbot\" style=\"position:relative;\"><a href=\"#6-certbot\" aria-label=\"6 certbot permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. certbot</h2>\n<p>certbot을 nginx에 등록하여 자동으로 인증서를 발급받고 nginx에 등록할 수 있다.</p>\n<p><a href=\"https://certbot.eff.org/\">https://certbot.eff.org/</a>\r\n위 사이트에 접속하여 Software(nginx), System(Ubuntu) 선택 후 가이드를 따라 진행할 수 있다.</p>\n<ul>\n<li>\n<p><strong>core 설치 (EC2에 설치 되어있음)</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> core\r\n<span class=\"token function\">sudo</span> snap refresh core</code></pre></div>\n</li>\n<li>\n<p><strong>certbot 설치</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> snap <span class=\"token function\">install</span> <span class=\"token parameter variable\">--classic</span> certbot</code></pre></div>\n</li>\n<li>\n<p><strong>심볼릭 링크 생성</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">ln</span> <span class=\"token parameter variable\">-s</span> /snap/bin/certbot /usr/bin/certbot</code></pre></div>\n</li>\n<li>\n<p><strong>nginx 등록</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> certbot <span class=\"token parameter variable\">--nginx</span></code></pre></div>\n</li>\n<li>\n<p><strong>이메일 입력</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/30e56/certbot_agreement.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 39.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAECBf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAcqAqD//xAAVEAEBAAAAAAAAAAAAAAAAAAAAIf/aAAgBAQABBQKIj//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAABD/2gAIAQEABj8Cf//EABoQAAICAwAAAAAAAAAAAAAAAAABIfAxcZH/2gAIAQEAAT8hdQXge/T/2gAMAwEAAgADAAAAEPAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGxABAAICAwAAAAAAAAAAAAAAAQDRIYFBUaH/2gAIAQEAAT8QR5TdI932kz4FrU//2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"certbot 이메일 입력\" title=\"\" src=\"/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/b4294/certbot_agreement.jpg\" srcset=\"/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/75985/certbot_agreement.jpg 150w,\n/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/f93b5/certbot_agreement.jpg 300w,\n/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/b4294/certbot_agreement.jpg 600w,\n/TIL/static/0906ed71885e8b0266f18ea725d4d8b9/30e56/certbot_agreement.jpg 679w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</li>\n<li>\n<p><strong>동의 (y입력)</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/30e56/certbot_email.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 19.333333333333332%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAByoCQf//EABYQAAMAAAAAAAAAAAAAAAAAAAAQEf/aAAgBAQABBQIq/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAEP/aAAgBAQAGPwJ//8QAGRAAAgMBAAAAAAAAAAAAAAAAAAERIWGB/9oACAEBAAE/IU7J4cP/2gAMAwEAAgADAAAAEAAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAGRAAAwEBAQAAAAAAAAAAAAAAAAERIWGR/9oACAEBAAE/EKNiynLwON2D/9k='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"certbot 이메일 입력\" title=\"\" src=\"/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/b4294/certbot_email.jpg\" srcset=\"/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/75985/certbot_email.jpg 150w,\n/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/f93b5/certbot_email.jpg 300w,\n/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/b4294/certbot_email.jpg 600w,\n/TIL/static/bddce7b5ae5a18fb339d3958ebc91ebd/30e56/certbot_email.jpg 679w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</li>\n<li>\n<p><strong>도메인 선택</strong></p>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/afcad/certbot_domain.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 9.333333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAIF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAByQQD/8QAFhAAAwAAAAAAAAAAAAAAAAAAAAEQ/9oACAEBAAEFAoz/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAEBAQEAAAAAAAAAAAAAAAAAEQEx/9oACAEBAAE/IZiOn//aAAwDAQACAAMAAAAQg8//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAaEAADAAMBAAAAAAAAAAAAAAAAASExYZGh/9oACAEBAAE/EIYXNiSxCeD/2Q=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"certbot 이메일 입력\" title=\"\" src=\"/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/b4294/certbot_domain.jpg\" srcset=\"/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/75985/certbot_domain.jpg 150w,\n/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/f93b5/certbot_domain.jpg 300w,\n/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/b4294/certbot_domain.jpg 600w,\n/TIL/static/7e5ff8e74df8b223eebeb5d1d32f6b58/afcad/certbot_domain.jpg 676w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%EA%B0%9C%EC%9A%94\">1. 개요</a></p>\n<ul>\n<li><a href=\"#11-event-driven\">1.1. Event-driven</a></li>\n<li><a href=\"#12-nginx-%EC%84%A4%EC%B9%98\">1.2. Nginx 설치</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-%ED%8F%B4%EB%8D%94%EA%B5%AC%EC%A1%B0\">2. 폴더구조</a></p>\n<ul>\n<li>\n<p><a href=\"#21-nginxconf\">2.1. nginx.conf</a></p>\n<ul>\n<li><a href=\"#211-confd\">2.1.1. conf.d/</a></li>\n<li><a href=\"#212-sites-enabled\">2.1.2. sites-enabled/</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-directives\">3. Directives</a></p>\n<ul>\n<li><a href=\"#31-block-directive\">3.1. Block Directive</a></li>\n<li><a href=\"#32-simple-directvie\">3.2. Simple Directvie</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-variable\">4. Variable</a></p>\n</li>\n<li>\n<p><a href=\"#5-feature\">5. feature</a></p>\n<ul>\n<li><a href=\"#51-ssl-certificate\">5.1. ssl certificate</a></li>\n<li><a href=\"#52-reverse-proxy\">5.2. reverse proxy</a></li>\n<li><a href=\"#53-load-balancing\">5.3. load balancing</a></li>\n<li><a href=\"#54-http-caching\">5.4. HTTP caching</a></li>\n<li><a href=\"#6-certbot\">6. certbot</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"createdAt":"2023-03-13","isCompleted":true,"reference":null,"title":"Nginx Basics","updatedAt":"2023-03-14"}},"allMarkdownRemark":{"nodes":[{"id":"ddf4c117-6aee-5884-8fa1-a3c57d2d6074","parent":{"id":"cf008181-3b67-5b68-800f-a202672f4b95","name":"AWS","relativePath":"Tools/AWS.md"},"frontmatter":{"title":"AWS EC2 초보자를 위한 친절 가이드","createdAt":"2023-04-23","updatedAt":"2023-04-25"},"excerpt":"AWS 계정을 만들고, EC2를 생성 및 설정하는 기초적인 방법을 정리한 문서이다. 1. AWS 1.1. root 계정 1.2. IAM 계정 2. EC2 2.1. EC2 생성 2.2. Inbound Rule 2.3. ssh connect…"},{"id":"8254ebd4-de42-51b7-95fc-3a27f3cbf722","parent":{"id":"1ec4b023-8a4f-524b-b3a4-3aa40c039b98","name":"Docker","relativePath":"Tools/Docker.md"},"frontmatter":{"title":"Docker Basics","createdAt":"2023-03-13","updatedAt":"2023-03-27"},"excerpt":"0. Docker 1. Docker Image 1.1. 개요 1.2. Dockerfile 1.3. 명령어 2. 컨테이너 2.1. 개요 2.2. 명령어 3. DockerHub 3.1. 개요 3.2. 명령어 4. Volume 4.1. 개요 4.…"},{"id":"e3371e59-740e-51e3-a8ba-0598cb1c7235","parent":{"id":"316847ee-b9ac-536a-8736-10389739ead1","name":"Git","relativePath":"Tools/Git.md"},"frontmatter":{"title":"Git Basics","createdAt":"2023-03-13","updatedAt":"2023-05-01"},"excerpt":"1. 용어 정리 1.1. Git 1.2. Git Web Service 1.3. Repository 2. Git 기초 사용법 2.1. Git 명령어 2.2. Git Commit Message 2.2.1. Commit Message Rule 2.2.…"},{"id":"6867b50e-70c5-52da-a306-b47b3a44df78","parent":{"id":"22fd3e02-3a59-5a74-8489-fcf4b847401f","name":"Gunicorn","relativePath":"Tools/Gunicorn.md"},"frontmatter":{"title":"Gunicorn Basics","createdAt":"2023-03-13","updatedAt":"2023-03-14"},"excerpt":"1. 개요 Gunicorn 은 파이썬 웹 어플리케이션을 위한 WSGI(Web Server Gateway Interface) HTTP 서버이다. Gunicorn은 클라이언트의 요청을 받아 WSGI…"},{"id":"3bd98a33-0109-5134-8e77-c58f364e969b","parent":{"id":"10e4f656-16c2-5f0a-b452-255a71fef482","name":"Linux","relativePath":"Tools/Linux.md"},"frontmatter":{"title":"Linux Commands & Shell Scripts","createdAt":"2023-03-14","updatedAt":"2023-03-25"},"excerpt":"1. 기본 1.1. 명령어 1.1.1. apt-get 1.1.2. cat 1.1.3. cd 1.1.4 cp 1.1.5 curl 1.1.6 echo 1.1.7 grep 1.1.8 find 1.1.9 head 1.1.10 history 1.1.11 ls…"},{"id":"2b971068-a2c9-527b-963c-faadf42c4b26","parent":{"id":"a90e4bb3-fd76-5d98-9d97-da71d3ee9a6c","name":"Nginx","relativePath":"Tools/Nginx.md"},"frontmatter":{"title":"Nginx Basics","createdAt":"2023-03-13","updatedAt":"2023-03-14"},"excerpt":"1. 개요 1.1. Event-driven 1.2. Nginx 설치 2. 폴더구조 2.1. nginx.conf 2.1.1. conf.d/ 2.1.2. sites-enabled/ 3. Directives 3.1. Block Directive 3.…"},{"id":"90feaee9-7d27-57e5-9b6d-de5f23cef12d","parent":{"id":"3505f569-e786-5f7c-a76c-78dad3ef9d12","name":"Redis","relativePath":"Tools/Redis.md"},"frontmatter":{"title":"Redis Basics","createdAt":"2023-04-28","updatedAt":"2023-05-01"},"excerpt":"1. 개요 2. 설치 2.1. Linux 3. 사용자 설정 3.1. Linux 3.1.1. ACL 조회 3.1.2. ACL 수정 4. Django 4.1. Django 4.0 이상 4.2. Django 4.0 미만 1. 개요 Redis는 in…"}]}},"pageContext":{"pagePath":"posts/Tools/Nginx.md","regex":"/^(?!.*README).*Tools.*$/","id":"2b971068-a2c9-527b-963c-faadf42c4b26","parent":{"id":"a90e4bb3-fd76-5d98-9d97-da71d3ee9a6c","name":"Nginx","relativeDirectory":"Tools","relativePath":"Tools/Nginx.md"}}},"staticQueryHashes":["3300660363","3571427910","82772122"],"slicesMap":{}}