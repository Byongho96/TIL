{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/Backend/Django/11_Django_REST_API/","result":{"data":{"markdownRemark":{"id":"d9cb8064-70f5-510a-970b-b24c6ac5e394","html":"<ul>\n<li><a href=\"#1-http\">1. HTTP</a>\n<ul>\n<li><a href=\"#11-http-%EC%A0%95%EC%9D%98\">1.1. HTTP 정의</a></li>\n<li><a href=\"#12-http%EC%9D%98-%ED%8A%B9%EC%A7%95\">1.2. HTTP의 특징</a></li>\n<li><a href=\"#13-http-request-methods\">1.3. HTTP Request Methods</a></li>\n<li><a href=\"#13-http-response-status-code\">1.3. HTTP Response Status Code</a></li>\n<li><a href=\"#14-uriuniform-resource-indentifier\">1.4. URI(Uniform Resource Indentifier)</a></li>\n<li><a href=\"#15-url-%EA%B5%AC%EC%A1%B0\">1.5. URL 구조</a></li>\n</ul>\n</li>\n<li><a href=\"#2-rest-api\">2. REST API</a>\n<ul>\n<li><a href=\"#21-api\">2.1. API</a></li>\n<li><a href=\"#22-restrestpresentational-state-trasfer\">2.2. REST(Restpresentational State Trasfer)</a></li>\n<li><a href=\"#23-json\">2.3. JSON</a></li>\n</ul>\n</li>\n<li><a href=\"#3-response-json\">3. Response JSON</a>\n<ul>\n<li><a href=\"#31-html-%EC%9D%91%EB%8B%B5\">3.1. HTML 응답</a></li>\n<li><a href=\"#22-jsonresponse%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.2. JsonResponse()를 사용한 JSON 응답</a></li>\n<li><a href=\"#23-django-serializer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.3. Django Serializer를 사용한 JSON 응답</a></li>\n<li><a href=\"#24-django%EC%9D%98-rest-framework%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.4. Django의 REST framework를 사용한 JSON 응답</a>\n<ul>\n<li><a href=\"#241-django-rest-framework\">2.4.1. Django REST framework</a></li>\n<li><a href=\"#242-modelserializer\">2.4.2. ModelSerializer</a></li>\n<li><a href=\"#243-example\">2.4.3. Example</a></li>\n<li><a href=\"#244-client%EC%9D%98-json-%EC%88%98%EC%8B%A0\">2.4.4. Client의 JSON 수신</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#3-django-rest-framework-single-model\">3. Django REST Framework, Single Model</a></li>\n<li><a href=\"#4-django-rest-framework-n1-relationship\">4. Django REST Framework, N:1 Relationship</a></li>\n<li><a href=\"#5-django-rest-framework-n1-relation-dereference\">5. Django REST Framework, N:1 Relation, Dereference</a></li>\n</ul>\n<hr>\n<h1 id=\"1-http\" style=\"position:relative;\"><a href=\"#1-http\" aria-label=\"1 http permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. HTTP</h1>\n<h2 id=\"11-http-정의\" style=\"position:relative;\"><a href=\"#11-http-%EC%A0%95%EC%9D%98\" aria-label=\"11 http 정의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. HTTP 정의</h2>\n<p>웹 상에서 리소스를 주고받는 규칙(프로토콜), 클라이언트와 서버는 요청과 응답을 주고 받는다.</p>\n<ul>\n<li><strong>요청(request)</strong>\n<ul>\n<li>클라이언트에 의해 전송되는 메시지</li>\n</ul>\n</li>\n<li><strong>응답(response)</strong>\n<ul>\n<li>서버에서 응답으로 전송되는 메시지</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"12-http의-특징\" style=\"position:relative;\"><a href=\"#12-http%EC%9D%98-%ED%8A%B9%EC%A7%95\" aria-label=\"12 http의 특징 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2. HTTP의 특징</h2>\n<ul>\n<li><strong>Stateless(무상태)</strong>\n<ul>\n<li>동일한 연결에서 연속적으로 수행되는 두 요청 사이에 링크가 없음</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li><strong>쿠키와 세션</strong>\n<ul>\n<li>쿠키와 세션을 사용해 서버 상태를 요청에 함께 보냄</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"13-http-request-methods\" style=\"position:relative;\"><a href=\"#13-http-request-methods\" aria-label=\"13 http request methods permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3. HTTP Request Methods</h2>\n<p>클라이언트 요청 시, 리소스(데이터)에 대한 행위를 구분한다.</p>\n<ul>\n<li><strong>GET</strong>\n<ul>\n<li>서버에 리소스의 표현을 요청</li>\n</ul>\n</li>\n<li><strong>POST</strong>\n<ul>\n<li>데이터를 지정된 리소스에 제출</li>\n</ul>\n</li>\n<li><strong>PUT</strong>\n<ul>\n<li>요청한 주소의 리소스를 수정</li>\n</ul>\n</li>\n<li><strong>POST</strong>\n<ul>\n<li>지정된 리소스를 삭제</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"13-http-response-status-code\" style=\"position:relative;\"><a href=\"#13-http-response-status-code\" aria-label=\"13 http response status code permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3. HTTP Response Status Code</h2>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Status\">HTTP Response Status Code Docs</a><br>\n특정 HTTP 요청에 대한 서버의 처리결과를 나타내며, 크게 5개의 그룹으로 나뉜다.</p>\n<ul>\n<li>Informational Responses (100~199)</li>\n<li>Successful Responses (200~299)</li>\n<li>Redirection Responses (300~399)</li>\n<li>Client Error Responses (400~499)</li>\n<li>Server Error Responses (500~599)</li>\n</ul>\n<h2 id=\"14-uriuniform-resource-indentifier\" style=\"position:relative;\"><a href=\"#14-uriuniform-resource-indentifier\" aria-label=\"14 uriuniform resource indentifier permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.4. URI(Uniform Resource Indentifier)</h2>\n<p><strong>인터넷에서 하나의 리소스를 가리키는 문자열</strong></p>\n<ul>\n<li><strong>URN(Uniform Resource Name)</strong>\n<ul>\n<li>고유한 이름</li>\n</ul>\n</li>\n<li><strong>URL(Uniform Resource Locator)</strong>\n<ul>\n<li>리소스의 주소(위치)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"15-url-구조\" style=\"position:relative;\"><a href=\"#15-url-%EA%B5%AC%EC%A1%B0\" aria-label=\"15 url 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.5. URL 구조</h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/f4206/url_structure.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 9.142857142857142%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAACABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAIDBf/EABYBAQEBAAAAAAAAAAAAAAAAAAMBAv/aAAwDAQACEAMQAAAB1ZGZWHX/xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAEFAn//xAAWEQADAAAAAAAAAAAAAAAAAAABEDH/2gAIAQMBAT8BEX//xAAWEQEBAQAAAAAAAAAAAAAAAAABEDL/2gAIAQIBAT8BNM//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAXEAADAQAAAAAAAAAAAAAAAAAAAUEQ/9oACAEBAAE/IYR5/9oADAMBAAIAAwAAABD/AN//xAAVEQEBAAAAAAAAAAAAAAAAAAAQMf/aAAgBAwEBPxCJ/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA3/8QAGRABAAMBAQAAAAAAAAAAAAAAAQARIUGx/9oACAEBAAE/EKDJ2eUAoyf/2Q=='); background-size: cover; display: block;\"></span>\n  <picture>\n          <source srcset=\"/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/c54d4/url_structure.webp 175w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/a3432/url_structure.webp 350w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/426ac/url_structure.webp 700w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/c139f/url_structure.webp 1050w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/a8d53/url_structure.webp 1145w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/webp\">\n          <source srcset=\"/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/e52aa/url_structure.jpg 175w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/70ebb/url_structure.jpg 350w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/29d31/url_structure.jpg 700w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/9ecec/url_structure.jpg 1050w,\n/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/f4206/url_structure.jpg 1145w\" sizes=\"(max-width: 700px) 100vw, 700px\" type=\"image/jpeg\">\n          <img class=\"gatsby-resp-image-image\" src=\"/TIL/static/1dfe4cb9394dcb9260d7beb2918709a3/29d31/url_structure.jpg\" alt=\"url_structure.jpg\" title=\"\" loading=\"lazy\" decoding=\"async\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\">\n        </picture>\n  </a>\n    </span>\n<ul>\n<li><strong>Schema</strong>\n<ul>\n<li>브라우저가 리소스를 이용하는 데 사용해야할 프로토콜</li>\n<li>Ex: https:, mailto:, ftp:</li>\n</ul>\n</li>\n<li><strong>Authority</strong>\n<ul>\n<li><strong>Domain Name(IP 주소)</strong>\n<ul>\n<li>요청중인 웹 서버를 나타냄</li>\n<li>Domain Name 대신 IP주소를 사용해도 된다.</li>\n</ul>\n</li>\n<li><strong>Port</strong>\n<ul>\n<li>웹 서버의 리소스에 접근하는데 사용되는 기술적인 문</li>\n<li>HTTP 프로토콜의 표준 포트는 생략 가능하다.\n<ul>\n<li>HTTP - 80</li>\n<li>HTTPS - 443</li>\n</ul>\n</li>\n<li>Django의 경우 8000이 기본 포트로 설정되어 있다.</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>Path</strong>\n<ul>\n<li>웹 서버의 리소스 경로, 물리적 주소가 아닌 설계자에 의해 추상화된 경로</li>\n</ul>\n</li>\n<li><strong>Parameters</strong>\n<ul>\n<li>웹 서버에 제공하는 추가적인 데이터</li>\n<li>'&#x26;'기호로 구분되는 key-value 쌍 목록</li>\n</ul>\n</li>\n<li><strong>Anchor</strong>\n<ul>\n<li>리소스 내부 일정의 북마크를 나타내며, 브라우저의 해당 북마크 지점에서 콘텐츠를 표시</li>\n<li>'#'(부분 식별자)이후 부분은 서버에 전송되지 않고, 브라우저가 사용</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"2-rest-api\" style=\"position:relative;\"><a href=\"#2-rest-api\" aria-label=\"2 rest api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. REST API</h1>\n<h2 id=\"21-api\" style=\"position:relative;\"><a href=\"#21-api\" aria-label=\"21 api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. API</h2>\n<p><strong>API(Application Programming Interface)</strong><br>\n애플리케이션과 프로그래밍으로 소통하는 방법. 복잡한 코드를 추상화하여 사용할 수 있는 쉬운 구문을 제공</p>\n<ul>\n<li><strong>Web API</strong>\n<ul>\n<li>웹 서버 또는 웹 브라우저를 위한 API</li>\n<li>주로 JSON 타입의 데이터를 응답</li>\n</ul>\n</li>\n<li><strong>Open API</strong>\n<ul>\n<li>개발자라면 누구나 사용할 수 있도록 공개된 API</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"22-restrestpresentational-state-trasfer\" style=\"position:relative;\"><a href=\"#22-restrestpresentational-state-trasfer\" aria-label=\"22 restrestpresentational state trasfer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. REST(Restpresentational State Trasfer)</h2>\n<p><strong>API Server를 개발하기 위한 일종의 소프트웨어 설계 방법론</strong></p>\n<ul>\n<li>\n<p><strong>특징</strong></p>\n<ul>\n<li><strong>자원의 식별</strong>\n<ul>\n<li>URI(URL)</li>\n</ul>\n</li>\n<li><strong>자원의 행위</strong>\n<ul>\n<li>HTTP Method</li>\n</ul>\n</li>\n<li><strong>자원의 표현</strong>\n<ul>\n<li>JSON</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"23-json\" style=\"position:relative;\"><a href=\"#23-json\" aria-label=\"23 json permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3. JSON</h2>\n<p><strong>JavaScript의 표기법을 따른 단순 문자열</strong>로, 파이썬의 Dictionary 자바스크립트의 object처럼 C계열의 언어가 갖고 있는 자료구조로 쉽게 변환할 수 있는 key-value 형태의 구조를 가지고 있다.</p>\n<h1 id=\"3-response-json\" style=\"position:relative;\"><a href=\"#3-response-json\" aria-label=\"3 response json permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Response JSON</h1>\n<p>Django는 현업에서 주로 백엔드 Framework로 쓰인다. 따라서 프론트엔드와 소통할 때 html 문서가 아닌 json으로 응답한다.</p>\n<h2 id=\"31-html-응답\" style=\"position:relative;\"><a href=\"#31-html-%EC%9D%91%EB%8B%B5\" aria-label=\"31 html 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. HTML 응답</h2>\n<ul>\n<li>\n<p><strong>urls.py</strong></p>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('html/', views.article_html),\n]\n</code></pre>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">from django.shortcuts import render\nfrom .models import Article\n\ndef article_html(request):\n    articles = Article.objects.all()\n    context = {\n      'articles': articles,\n    }\n    return render(request, 'articles/article.html', context)\n</code></pre>\n</li>\n<li>\n<p><strong>article.html</strong></p>\n<pre><code class=\"language-html\">...\n&#x3C;body>\n  &#x3C;h1>Article List&#x3C;/h1>\n  &#x3C;hr>\n  &#x3C;p>\n    {% for article in articles %}\n      &#x3C;h2>{{ article.pk }}번 글. {{ article.title }}&#x3C;/h2>\n      &#x3C;p>{{ article.content }}&#x3C;/p>\n      &#x3C;hr>\n    {% endfor %}\n  &#x3C;/p>\n&#x3C;/body>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"22-jsonresponse를-사용한-json-응답\" style=\"position:relative;\"><a href=\"#22-jsonresponse%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\" aria-label=\"22 jsonresponse를 사용한 json 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. JsonResponse()를 사용한 JSON 응답</h2>\n<p><strong>Serilaize</strong><br>\nQueryset 및 Model Instance와 같은 복잡한 데이터를 JSON, XML과 같은 쉽게 변환 할 수 있는 원시 데이터타입으로 변환시키는 것</p>\n<ul>\n<li><strong>JsonResponse()</strong>\n<ul>\n<li>JSON-encoded response를 만드는 클래스</li>\n<li><strong>safe</strong>\n<ul>\n<li>Default: True</li>\n<li>False로 설정 시 모든 타입의 객체를 serialization할 수 있음, True일 경우 dictionary만 가능</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>urls.py</strong></p>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('json1/', views.jsonresponse),\n]\n</code></pre>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">from django.http.response import JsonResponse\nfrom .models import Article\n\ndef jsonresponse(request):\n    articles = Article.objects.all()\n    articles_json = []\n\n    for article in articles:\n        # 리스트[딕셔너리] 형태로 데이터를 형성\n        articles_json.append(\n            {\n                'id': article.pk,\n                'title': article.title,\n                'content': article.content,\n                'created_at': article.created_at,\n                'updated_at': article.updated_at,\n            }\n        )\n    return JsonResponse(articles_json, safe=False)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"23-django-serializer를-사용한-json-응답\" style=\"position:relative;\"><a href=\"#23-django-serializer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\" aria-label=\"23 django serializer를 사용한 json 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3. Django Serializer를 사용한 JSON 응답</h2>\n<ul>\n<li>\n<p><strong>serializers.serialize(format, object)</strong></p>\n<ul>\n<li>object를 format으로 변환해줌</li>\n<li><strong>format</strong>\n<ul>\n<li>'xml' / 'json' / 'jsonl' / 'yaml'</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>urls.py</strong></p>\n</li>\n</ul>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('json2/', views.django_serializer),\n]\n</code></pre>\n<ul>\n<li><strong>views.py</strong></li>\n</ul>\n<pre><code class=\"language-python\">from django.http.response import JsonResponse, HttpResponse\nfrom django.core import serializers\nfrom .models import Article\n\ndef django_serializer(request):\n    articles = Article.objects.all()\n    data = serializers.serialize('json', articles)\n    return HttpResponse(data, content_type='application/json')\n</code></pre>\n<h2 id=\"24-django의-rest-framework를-사용한-json-응답\" style=\"position:relative;\"><a href=\"#24-django%EC%9D%98-rest-framework%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\" aria-label=\"24 django의 rest framework를 사용한 json 응답 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4. Django의 REST framework를 사용한 JSON 응답</h2>\n<h3 id=\"241-django-rest-framework\" style=\"position:relative;\"><a href=\"#241-django-rest-framework\" aria-label=\"241 django rest framework permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4.1. Django REST framework</h3>\n<p><strong>Django에서 RESTful API서버를 쉽게 구축할 수 있도록 도와주는 오픈소스 라이브러리</strong></p>\n<ul>\n<li>\n<p><strong>특징</strong></p>\n<ul>\n<li>Django의 Form, ModelForm과 유사하게 사용 가능하다.</li>\n</ul>\n</li>\n<li>\n<p><strong>설치 과정</strong></p>\n<ol>\n<li><code>pip install djangorestframework</code></li>\n<li><code>INSTALLED_APPS = [ 'rest_framework' ]</code></li>\n</ol>\n</li>\n</ul>\n<h3 id=\"242-modelserializer\" style=\"position:relative;\"><a href=\"#242-modelserializer\" aria-label=\"242 modelserializer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4.2. ModelSerializer</h3>\n<p><strong>ModelSerializer 클래스는 Model Class를 바탕으로 형성하는 Serializer 클래스.</strong> <a href=\"https://www.django-rest-framework.org/api-guide/serializers/\">Serializer와 Deserialize와 관련한 다양한 메소드를 가진다</a></p>\n<ul>\n<li><strong>ModelSerializer(obj, ..., many=False)</strong>\n<ul>\n<li><strong>obj</strong>\n<ul>\n<li>Model의 객체 <code>obj</code>를 첫번째 인자로 받는다.</li>\n</ul>\n</li>\n<li><strong>many</strong>\n<ul>\n<li>True일 경우, 여러 개의 객체를 받을 수 있다.</li>\n</ul>\n</li>\n<li><strong>is_valid()</strong>\n<ul>\n<li>제출된 Serializer가 정의된 Model 구조에 유효한지를 검사</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>ModelSerializer는 Model 객체를 인자로 받아, 원시 파이선 데이터 타입으로 바꾼다. 이는 JSON은 아니지만 JSON으로 변환되기 쉬운 데이터 타입이다. 나중에 Response()시 renderer가 해당 원시타입(serializer.data)을 처리하여 보낸다.</p>\n<h3 id=\"243-example\" style=\"position:relative;\"><a href=\"#243-example\" aria-label=\"243 example permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4.3. Example</h3>\n<ul>\n<li>\n<p><strong>serializers.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework import serializers\nfrom .models import Article\n\n\nclass ArticleSerializer(serializers.ModelSerializer):\n\n    class Meta:\n        model = Article\n        fields = '__all__'\n</code></pre>\n</li>\n<li>\n<p><strong>urls.py</strong></p>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('json3/', views.RESTserializer),\n]\n</code></pre>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework.decorators import api_view\nfrom rest_framework.response import Response\n\nfrom .serializers import ArticleSerializer\nfrom .models import Article\n\n@api_view()\ndef RESTserializer(request):\n    articles = Article.objects.all()\n    serializer = ArticleSerializer(articles, many=True)\n    return Response(serializer.data)\n</code></pre>\n</li>\n</ul>\n<h3 id=\"244-client의-json-수신\" style=\"position:relative;\"><a href=\"#244-client%EC%9D%98-json-%EC%88%98%EC%8B%A0\" aria-label=\"244 client의 json 수신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4.4. Client의 JSON 수신</h3>\n<ul>\n<li><code>requests.get(url: str, params={key: value}, args)</code>\n<ul>\n<li>returns <code>requests.Response</code> object</li>\n</ul>\n</li>\n</ul>\n<pre><code class=\"language-python\"># pip install requests\nimport requests\nfrom pprint import pprint\n\n# 요청을 보냄\nresponse = requests.get('http://127.0.0.1:8000/api/v1/json3/')\n# json(): requests.Response -> dict\nresult = response.json()\n\n# json.dumps() 등의 메소드는 dict &#x3C;-> json\n\npprint(result)\n</code></pre>\n<h1 id=\"3-django-rest-framework-single-model\" style=\"position:relative;\"><a href=\"#3-django-rest-framework-single-model\" aria-label=\"3 django rest framework single model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Django REST Framework, Single Model</h1>\n<ul>\n<li>\n<p><strong>urls.py</strong></p>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('articles/', views.article_list),\n    path('articles/&#x3C;int:article_pk>/', views.article_detail),\n]\n</code></pre>\n</li>\n<li>\n<p><strong>serializers.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework import serializers\nfrom .models import Article\n\n# 데이터의 어떠한 field를 read할 것이냐에 따라 Serializer를 만든다!!!!\n\nclass ArticleListSerializer(serializers.ModelSerializer):\n\n    class Meta:\n        model = Article\n        fields = ('id', 'title', 'contnet', )\n\nclass ArticleSerializer(serializers.ModelSerializer):\n\n  class Meta:\n      model = Article\n      fields = '__all__'\n</code></pre>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework.response import Response\nfrom rest_framework.decorators import api_view\nfrom rest_framework import status\nfrom django.shortcuts import get_object_or_404, get_list_or_404\nfrom .serializers import ArticleListSerializer, ArticleSerializer, CommentSerializer\nfrom .models import Article, Comment\n\n@api_view(['GET', 'POST'])   # decorator가 필수적으로 붙는다.\ndef article_list(request):\n    if request.method == 'GET':\n        # articles = Article.objects.all()\n        articles = get_list_or_404(Article)\n        serializer = ArticleListSerializer(articles, many=True)\n        return Response(serializer.data)\n\n    elif request.method == 'POST':\n        serializer = ArticleSerializer(data=request.data) # 이것은 그냥 최종적으로 제출되는 JSON에 다라서 설정\n        if serializer.is_valid(raise_exception=True):\n            serializer.save()\n            return Response(serializer.data, status=status.HTTP_201_CREATED)\n        # return Response(serializer.errors, status=status.HTTP_400_BAD_REQUEST)\n\n\n@api_view(['GET', 'DELETE', 'PUT'])\ndef article_detail(request, article_pk):\n    # article = Article.objects.get(pk=article_pk)\n    article = get_object_or_404(Article, pk=article_pk)\n\n    if request.method == 'GET':\n        serializer = ArticleSerializer(article)\n        return Response(serializer.data)\n\n    elif request.method == 'DELETE':\n        article.delete()\n        return Response(status=status.HTTP_204_NO_CONTENT)\n\n    elif request.method == 'PUT':\n        serializer = ArticleSerializer(article, data=request.data)\n        if serializer.is_valid(raise_exception=True):\n            serializer.save()\n            return Response(serializer.data)\n</code></pre>\n</li>\n<li>\n<p><code>'api_view'== decorator</code></p>\n<ul>\n<li>해당 함수가 허용하는 HTTP 메소드 목록을 정의하며, 필수로 붙여줘야 한다.</li>\n<li>다른 메소드 요청에 대해서는 <strong>405 Method Not Allowed</strong>로 응답한다.</li>\n</ul>\n</li>\n<li>\n<p><code>get_object_or_404(Model, {options})</code></p>\n<ul>\n<li>데이터베이스에서 option을 만족하는 객체를 ==하나==찾아 반환한다.</li>\n<li>없을 경우, <strong>404 Not Found</strong>로 응답한다.</li>\n</ul>\n</li>\n<li>\n<p><code>get_list_or_404(Model, {options})</code></p>\n<ul>\n<li>데이터베이스에서 option을 만족하는 객체를 모두 찾아 리스트로 반환한다.</li>\n<li>없을 경우, <strong>404 Not Found</strong>로 응답한다.</li>\n</ul>\n</li>\n<li>\n<p><code>serializer.is_valid(raise_exception=True)</code></p>\n<ul>\n<li>유효성 검사를 통과하지 못할 경우, <strong>400 Bad Request</strong>와 함께 관련된 데이터를 돌려보낸다.</li>\n</ul>\n</li>\n<li>\n<p><code>Response(data, ..., status)</code></p>\n<ul>\n<li>보낼 data를 데이터를 첫번재 인자로 받고, status는 http response method를 의미한다.</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-django-rest-framework-n1-relationship\" style=\"position:relative;\"><a href=\"#4-django-rest-framework-n1-relationship\" aria-label=\"4 django rest framework n1 relationship permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Django REST Framework, N:1 Relationship</h1>\n<ul>\n<li>\n<p><strong>urls.py</strong></p>\n<pre><code class=\"language-python\">from django.urls import path\nfrom . import views\n\nurlpatterns = [\n    path('comments/', views.comment_list),\n    path('comments/&#x3C;int:comment_pk>/', views.comment_detail),\n]\n</code></pre>\n</li>\n<li>\n<p><strong>serializers.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework import serializers\nfrom .models import Comment\n\n# 데이터의 어떠한 field를 read할 것이냐에 따라 Serializer를 만든다!!!!\n\nclass CommentSerializer(serializers.ModelSerializer):\n\n  class Meta:\n      model = Comment\n      fields = '__all__'\n      read_only_fields = ('article',) # 생성 시에 is_valid()를 무사히 통과한 뒤에 별도로 넣어 줌. is_valid()에서 제외시킨다.\n      # Form 기능도 가지고 있다고 생각하자.\n</code></pre>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework.response import Response\nfrom rest_framework.decorators import api_view\nfrom rest_framework import status\nfrom django.shortcuts import get_object_or_404, get_list_or_404\nfrom .serializers import ArticleListSerializer, ArticleSerializer, CommentSerializer\nfrom .models import Article, Comment\n\n@api_view(['GET'])\ndef comment_list(request):\n    if request.method == 'GET':\n        # comments = Comment.objects.all()\n        comments = get_list_or_404(Comment)\n        serializer = CommentSerializer(comments, many=True)\n        return Response(serializer.data)\n\n@api_view(['POST'])\ndef comment_create(request, article_pk):\n    # article = Article.objects.get(pk=article_pk)\n    article = get_object_or_404(Article, pk=article_pk)\n    serializer = CommentSerializer(data=request.data)\n    if serializer.is_valid(raise_exception=True):\n        serializer.save(article=article)    # 저장 전에, 외래키 값을 넣음.\n        return Response(serializer.data, status=status.HTTP_201_CREATED)\n\n@api_view(['GET', 'DELETE', 'PUT'])\ndef comment_detail(request, comment_pk):\n    # comment = Comment.objects.get(pk=comment_pk)\n    comment = get_object_or_404(Comment, pk=comment_pk)\n\n    if request.method == 'GET':\n        serializer = CommentSerializer(comment)\n        return Response(serializer.data)\n\n    elif request.method == 'DELETE':\n        comment.delete()\n        return Response(status=status.HTTP_204_NO_CONTENT)\n\n    elif request.method == 'PUT':\n        serializer = CommentSerializer(comment, data=request.data)\n        if serializer.is_valid(raise_exception=True):\n            serializer.save()\n            return Response(serializer.data)\n</code></pre>\n</li>\n</ul>\n<h1 id=\"5-django-rest-framework-n1-relation-dereference\" style=\"position:relative;\"><a href=\"#5-django-rest-framework-n1-relation-dereference\" aria-label=\"5 django rest framework n1 relation dereference permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Django REST Framework, N:1 Relation, Dereference</h1>\n<ul>\n<li>\n<p><strong>serializers.py</strong></p>\n<pre><code class=\"language-python\">from rest_framework import serializers\nfrom .models import Comment\n\nclass CommentSerializer(serializers.ModelSerializer):\n\nclass ArticleSerializer(serializers.ModelSerializer):\n  # comment_set = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n  comment_set = CommentSerializer(many=True, read_only=True)\n  comment_count = serializers.IntegerField(source='comment_set.count', read_only=True)\n\n  class Meta:\n      model = Article\n      fields = '__all__'\n</code></pre>\n<ul>\n<li><mark>외래키 <strong>참조/역참조</strong>하는 객체에 대한 Serializer를 참조할 때는 반드시 이름을 <strong>필드명/역참조 매니저</strong>와 일치시켜줘야 한다.</mark> 그래야지 Serializer에 어떤 객체를 넣어야할지 id값으로 장고가 처리할 수 있다.</li>\n<li><strong>source</strong>\n<ul>\n<li>받은 객체에 대한 ORM을 작성한다.</li>\n</ul>\n<ul>\n<li>Ex. <code>Article.comment_set.count() -> 'comment_set.count'</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-http\">1. HTTP</a></p>\n<ul>\n<li><a href=\"#11-http-%EC%A0%95%EC%9D%98\">1.1. HTTP 정의</a></li>\n<li><a href=\"#12-http%EC%9D%98-%ED%8A%B9%EC%A7%95\">1.2. HTTP의 특징</a></li>\n<li><a href=\"#13-http-request-methods\">1.3. HTTP Request Methods</a></li>\n<li><a href=\"#13-http-response-status-code\">1.3. HTTP Response Status Code</a></li>\n<li><a href=\"#14-uriuniform-resource-indentifier\">1.4. URI(Uniform Resource Indentifier)</a></li>\n<li><a href=\"#15-url-%EA%B5%AC%EC%A1%B0\">1.5. URL 구조</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-rest-api\">2. REST API</a></p>\n<ul>\n<li><a href=\"#21-api\">2.1. API</a></li>\n<li><a href=\"#22-restrestpresentational-state-trasfer\">2.2. REST(Restpresentational State Trasfer)</a></li>\n<li><a href=\"#23-json\">2.3. JSON</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-response-json\">3. Response JSON</a></p>\n<ul>\n<li>\n<p><a href=\"#31-html-%EC%9D%91%EB%8B%B5\">3.1. HTML 응답</a></p>\n</li>\n<li>\n<p><a href=\"#22-jsonresponse%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.2. JsonResponse()를 사용한 JSON 응답</a></p>\n</li>\n<li>\n<p><a href=\"#23-django-serializer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.3. Django Serializer를 사용한 JSON 응답</a></p>\n</li>\n<li>\n<p><a href=\"#24-django%EC%9D%98-rest-framework%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-json-%EC%9D%91%EB%8B%B5\">2.4. Django의 REST framework를 사용한 JSON 응답</a></p>\n<ul>\n<li><a href=\"#241-django-rest-framework\">2.4.1. Django REST framework</a></li>\n<li><a href=\"#242-modelserializer\">2.4.2. ModelSerializer</a></li>\n<li><a href=\"#243-example\">2.4.3. Example</a></li>\n<li><a href=\"#244-client%EC%9D%98-json-%EC%88%98%EC%8B%A0\">2.4.4. Client의 JSON 수신</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-django-rest-framework-single-model\">3. Django REST Framework, Single Model</a></p>\n</li>\n<li>\n<p><a href=\"#4-django-rest-framework-n1-relationship\">4. Django REST Framework, N:1 Relationship</a></p>\n</li>\n<li>\n<p><a href=\"#5-django-rest-framework-n1-relation-dereference\">5. Django REST Framework, N:1 Relation, Dereference</a></p>\n</li>\n</ul>","frontmatter":{"title":"Django REST API","createdAt":"2022-11-08","updatedAt":"2022-12-28","tags":null,"description":null,"reference":null}},"allMarkdownRemark":{"nodes":[{"id":"64fe3ac3-9ec7-5057-b5cf-209ab5b38218","excerpt":"0. Cross Site Request Forgery(CSRF) 0.1. What is CSRF 0.2. CSRF Token 1. Model 1.1. models.py 2. Create 2.1. urls.py 2.2. views.py 2.…","parent":{"id":"b60ef590-337d-5fbc-ac3c-465bb644314e","name":"02_Django_CRUD","relativePath":"Backend/Django/02_Django_CRUD.md"},"frontmatter":{"title":"Django Basic CRUD","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"fields":{"slug":"/posts/Backend/Django/02_Django_CRUD/"}},{"id":"f0b570c2-7aa3-5406-b3ed-5e4c7e6b403f","excerpt":"1. Model Form 1.1. Model Class 1.2. Form Class 1.3. ModeForm Class 2. Create 2.1. urls.py 2.2. views.py 2.3. templates.html 3. Read 3.…","parent":{"id":"4381f074-5ff2-5dfe-b751-1022d9d9f64c","name":"03_Django_CRUD_ModelForm","relativePath":"Backend/Django/03_Django_CRUD_ModelForm.md"},"frontmatter":{"title":"Django CRUD with Model Form","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"fields":{"slug":"/posts/Backend/Django/03_Django_CRUD_ModelForm/"}},{"id":"2ceb5c6e-b5b1-5193-a1e5-f7a749ec9d9c","excerpt":"1. Fixtures 1.1. The Definition of Fixtures 1.2. The Default Path of Fixtures 1.3. Create Fixtures 1.4. Import Fixtures 1. Fixtures How to…","parent":{"id":"955390a3-0b4e-5e5e-8cbd-ce910a67d06a","name":"10_Django_Fixtures","relativePath":"Backend/Django/10_Django_Fixtures.md"},"frontmatter":{"title":"Django Fixtures","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"fields":{"slug":"/posts/Backend/Django/10_Django_Fixtures/"}},{"id":"040f5a80-2e15-5109-bf84-5e6b71ad4657","excerpt":"1. Many to One Relationship 1.1. Foreign Key 2. Comment : Article (N:1) 2.1. Create 2.2. Read 2.3. Delete 3. Article : User (N:1) 3.…","parent":{"id":"e4d09ce7-8429-558f-854b-88c647667db3","name":"07_Django_Many_to_One","relativePath":"Backend/Django/07_Django_Many_to_One.md"},"frontmatter":{"title":"Django N:1 Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"fields":{"slug":"/posts/Backend/Django/07_Django_Many_to_One/"}},{"id":"caac3b53-95e0-5573-b4b1-0fff44f462d2","excerpt":"1. Intro 1.1. Terms 1.2. The limits of N:1 Relationship 1.3. Intermediary Model 1.4. Many To Many Field 1.5. Many To Many Table 1.6. with…","parent":{"id":"a18f7611-d467-5606-863c-845e9beab7d9","name":"08_Django_Many_to_Many","relativePath":"Backend/Django/08_Django_Many_to_Many.md"},"frontmatter":{"title":"Django N:M Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"fields":{"slug":"/posts/Backend/Django/08_Django_Many_to_Many/"}},{"id":"d9cb8064-70f5-510a-970b-b24c6ac5e394","excerpt":"1. HTTP 1.1. HTTP 정의 1.2. HTTP의 특징 1.3. HTTP Request Methods 1.3. HTTP Response Status Code 1.4. URI(Uniform Resource Indentifier) 1.5. URL…","parent":{"id":"af752c25-7364-5944-ae08-73a796a8712a","name":"11_Django_REST_API","relativePath":"Backend/Django/11_Django_REST_API.md"},"frontmatter":{"title":"Django REST API","createdAt":"2022-11-08","updatedAt":"2022-12-28"},"fields":{"slug":"/posts/Backend/Django/11_Django_REST_API/"}},{"id":"e4c8a797-8a3b-52bb-a234-c26e492b1401","excerpt":"1. Static Files 1.1. Static Files 1.2. Static Files with Django 1.3. Deploy Static Files 1.3.1. STATIC_ROOT 1.3.2. Procedure 2. Media Files…","parent":{"id":"688a0874-9671-5c95-b4b7-968e254af6fc","name":"09_Django_Static_Media","relativePath":"Backend/Django/09_Django_Static_Media.md"},"frontmatter":{"title":"Django Static Files","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"fields":{"slug":"/posts/Backend/Django/09_Django_Static_Media/"}},{"id":"20c8e53f-b1bb-519c-8683-ea0afda9e0f7","excerpt":"1. Django 1.1. Framework 1.2. Django 2. MTV Design Pattern 2.1. Design Pattern 2.2. MTV Design Pattern 3. Start Django 4. Django Folder…","parent":{"id":"318dafb0-b115-581e-8c4d-591d52550c0b","name":"01_Django_Basics_MTV","relativePath":"Backend/Django/01_Django_Basics_MTV.md"},"frontmatter":{"title":"Django Basics & MTV Design Pattern","createdAt":"2022-12-24","updatedAt":"2022-12-24"},"fields":{"slug":"/posts/Backend/Django/01_Django_Basics_MTV/"}},{"id":"9574434a-4495-56c8-9640-5aeadb7128d9","excerpt":"1. Overview 1.1. Authentication 1.2. Authorization 1.3. accounts App 2. Custom User Model 2.1. User Model 2.2. Custom User Model 2.3. User…","parent":{"id":"268fc07e-bdb0-532f-9d53-80eaba647676","name":"04_Django_Authentication","relativePath":"Backend/Django/04_Django_Authentication.md"},"frontmatter":{"title":"Django Internal Authentication","createdAt":"2022-12-24","updatedAt":"2023-01-02"},"fields":{"slug":"/posts/Backend/Django/04_Django_Authentication/"}},{"id":"3a2ee22c-23db-53f4-8dec-93ac638a8eb6","excerpt":"1. QuerySet 1.1. Query 1.1. What is QuerySet 1.1.1. Check SQL Query 1.2. QuerySet API 1.3. QuerySet Evaluation and Caching 1.3.1. Evaluation…","parent":{"id":"e4db1fdd-48ab-522a-addc-f1db7b1effaa","name":"06_Django_QuerySet","relativePath":"Backend/Django/06_Django_QuerySet.md"},"frontmatter":{"title":"Django QuerySet","createdAt":"2022-12-24","updatedAt":"2022-12-25"},"fields":{"slug":"/posts/Backend/Django/06_Django_QuerySet/"}},{"id":"1f86280a-2c23-53ff-af3d-c1ed6d223cab","excerpt":"1. Database 1.1. RDB 1.2. Structure 2. SQL 2.1. SQL 2.2. Types of SQL Commands 2.3. SQL Syntax 2.4. Import .csv to Table 3. DDL 3.1. CREATE…","parent":{"id":"83db0b1c-e3f7-5201-8706-1cbbf4b61c7a","name":"05_SQLite3_SQL","relativePath":"Backend/Django/05_SQLite3_SQL.md"},"frontmatter":{"title":"SQL Basics","createdAt":"2022-12-28","updatedAt":"2022-12-28"},"fields":{"slug":"/posts/Backend/Django/05_SQLite3_SQL/"}},{"id":"564ce658-4880-550f-ae36-5b903fb66632","excerpt":"1. CORS 1.1. Same Origin Policy 1.2. Definition of Origin 1.3. CORS 1.3.1. django-cors-headers 2. Authentication 2.1. Authentication Class…","parent":{"id":"0bc65511-c15f-5f37-9355-27e5d252a113","name":"12_Django_REST_Authentication","relativePath":"Backend/Django/12_Django_REST_Authentication.md"},"frontmatter":{"title":"Django REST Authentication","createdAt":"2023-01-02","updatedAt":"2023-01-12"},"fields":{"slug":"/posts/Backend/Django/12_Django_REST_Authentication/"}},{"id":"9857f9dd-0697-539f-8198-21540502b6d0","excerpt":"1. 개요 2. 설치 2.1. Linux 3. 사용자 설정 3.1. Linux 3.1.1. ACL 조회 3.1.2. ACL 수정 4. Django 4.1. Django 4.0 이상 4.2. Django 4.0 미만 1. 개요 Redis는 in…","parent":{"id":"d5744a7e-d576-5af7-9c0d-60a8ec5df625","name":"Redis","relativePath":"Backend/Django/Redis.md"},"frontmatter":{"title":"Redis Basics","createdAt":"2023-04-28","updatedAt":"2023-05-01"},"fields":{"slug":"/posts/Backend/Django/Redis/"}}]}},"pageContext":{"pagePath":"/posts/Backend/Django/11_Django_REST_API/","siblingPostsPathRegex":"/^(?!.*README).*Backend\\/Django\\/.*$/","relativeDirectory":"Django","id":"d9cb8064-70f5-510a-970b-b24c6ac5e394","parent":{"id":"af752c25-7364-5944-ae08-73a796a8712a","name":"11_Django_REST_API","relativePath":"Backend/Django/11_Django_REST_API.md"},"fields":{"slug":"/posts/Backend/Django/11_Django_REST_API/"}}},"staticQueryHashes":["24302420","4059933791"],"slicesMap":{}}