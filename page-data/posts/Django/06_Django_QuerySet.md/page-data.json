{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/Django/06_Django_QuerySet.md/","result":{"data":{"markdownRemark":{"id":"f7ac871f-e347-59d7-8418-39557102d551","html":"<ul>\n<li><a href=\"#1-queryset\">1. QuerySet</a>\n<ul>\n<li><a href=\"#11-query\">1.1. Query</a></li>\n<li><a href=\"#11-what-is-queryset\">1.1. What is QuerySet</a>\n<ul>\n<li><a href=\"#111-check-sql-query\">1.1.1. Check SQL Query</a></li>\n</ul>\n</li>\n<li><a href=\"#12-queryset-api\">1.2. QuerySet API</a></li>\n<li><a href=\"#13-queryset-evaluation-and-caching\">1.3. QuerySet Evaluation and Caching</a>\n<ul>\n<li><a href=\"#131-evaluation-and-caching\">1.3.1. Evaluation and Caching</a></li>\n<li><a href=\"#131-lazy-loading\">1.3.1. Lazy Loading</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#2-basic-crud\">2. Basic CRUD</a>\n<ul>\n<li><a href=\"#21-model\">2.1. Model</a></li>\n<li><a href=\"#22-create\">2.2. Create</a></li>\n<li><a href=\"#23-read\">2.3. Read</a>\n<ul>\n<li><a href=\"#231-values\">2.3.1. values()</a></li>\n<li><a href=\"#232-values_list\">2.3.2. values_list()</a></li>\n</ul>\n</li>\n<li><a href=\"#24-update\">2.4. Update</a></li>\n<li><a href=\"#25-delete\">2.5. Delete</a></li>\n</ul>\n</li>\n<li><a href=\"#2-sort-data\">2. Sort Data</a></li>\n<li><a href=\"#3-filter-data\">3. Filter Data</a></li>\n<li><a href=\"#4-group-data\">4. Group Data</a>\n<ul>\n<li><a href=\"#41-aggregation\">4.1. Aggregation</a></li>\n<li><a href=\"#42-annotation\">4.2. Annotation</a></li>\n<li><a href=\"#421-annotation-in-n1\">4.2.1. Annotation In N:1</a></li>\n</ul>\n</li>\n<li><a href=\"#6-query-optimization\">6. Query Optimization</a>\n<ul>\n<li><a href=\"#61-annotate\">6.1. annotate</a></li>\n<li><a href=\"#62-selected_related\">6.2. selected_related()</a></li>\n<li><a href=\"#63-prefetch_related\">6.3. prefetch_related()</a></li>\n<li><a href=\"#64-prefetch\">6.4. Prefetch()</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"1-queryset\" style=\"position:relative;\"><a href=\"#1-queryset\" aria-label=\"1 queryset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. QuerySet</h1>\n<h2 id=\"11-query\" style=\"position:relative;\"><a href=\"#11-query\" aria-label=\"11 query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. Query</h2>\n<p>A query is <strong>a request for data from a database.</strong></p>\n<h2 id=\"11-what-is-queryset\" style=\"position:relative;\"><a href=\"#11-what-is-queryset\" aria-label=\"11 what is queryset permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. What is QuerySet</h2>\n<p><del>A QuerySet represents <strong>a collection of objects from your database.</strong></del></p>\n<p><a href=\"https://github.com/django/django/blob/main/django/db/models/query.py#L291\">Github django.db.models.query QuerySet</a></p>\n<p>QuerySet consists of <strong>one query</strong> and <strong>several query sets.</strong><br>\n<mark>Therefore, QuerySet can be considered query.</mark></p>\n<p>The reason why QuerySet works like a collection of objects is because QuerySet <a href=\"#13-queryset-evaluation-and-caching\">caches data.</a></p>\n<h3 id=\"111-check-sql-query\" style=\"position:relative;\"><a href=\"#111-check-sql-query\" aria-label=\"111 check sql query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1.1. Check SQL Query</h3>\n<p>You can check the SQL query by checking <code class=\"language-text\">query</code> attribute of QuerySet</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">queryset <span class=\"token operator\">=</span> MyModel<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>queryset<span class=\"token punctuation\">.</span>query<span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"12-queryset-api\" style=\"position:relative;\"><a href=\"#12-queryset-api\" aria-label=\"12 queryset api permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2. QuerySet API</h2>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 600px; \">\n      <a class=\"gatsby-resp-image-link\" href=\"/static/70eb324b17c14130fecace8b0dd400a6/faa66/ORM.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAIABQDASIAAhEBAxEB/8QAFwABAAMAAAAAAAAAAAAAAAAAAAMEBf/EABYBAQEBAAAAAAAAAAAAAAAAAAEAAv/aAAwDAQACEAMQAAAB0JxzTE//xAAYEAEAAwEAAAAAAAAAAAAAAAACARETEv/aAAgBAQABBQImYT7zO1f/xAAXEQEAAwAAAAAAAAAAAAAAAAAAAREx/9oACAEDAQE/AYxT/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAECAQE/Aa1//8QAGBAAAwEBAAAAAAAAAAAAAAAAAAExEUH/2gAIAQEABj8C6PKRn//EABoQAAIDAQEAAAAAAAAAAAAAAAABESFBMWH/2gAIAQEAAT8hXXFfS7m8LR3471n/2gAMAwEAAgADAAAAEH/v/8QAFhEBAQEAAAAAAAAAAAAAAAAAAAER/9oACAEDAQE/EJMP/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQARIf/aAAgBAgEBPxBd2Xf/xAAcEAEAAQQDAAAAAAAAAAAAAAABEQAhMUFRccH/2gAIAQEAAT8QS98rLTfLUQsMStpbvNMWJgQe1//Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"ORM\" title=\"\" src=\"/static/70eb324b17c14130fecace8b0dd400a6/b4294/ORM.jpg\" srcset=\"/static/70eb324b17c14130fecace8b0dd400a6/75985/ORM.jpg 150w,\n/static/70eb324b17c14130fecace8b0dd400a6/f93b5/ORM.jpg 300w,\n/static/70eb324b17c14130fecace8b0dd400a6/b4294/ORM.jpg 600w,\n/static/70eb324b17c14130fecace8b0dd400a6/8e1fc/ORM.jpg 900w,\n/static/70eb324b17c14130fecace8b0dd400a6/faa66/ORM.jpg 1056w\" sizes=\"(max-width: 600px) 100vw, 600px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span>\n<p><strong>QuerySet API is the method that can make queries(QuerySet).</strong></p>\n<p>Once you’ve created your data models, Django automatically gives you a database-abstraction API that lets you create, retrieve, update and delete objects.</p>\n<h2 id=\"13-queryset-evaluation-and-caching\" style=\"position:relative;\"><a href=\"#13-queryset-evaluation-and-caching\" aria-label=\"13 queryset evaluation and caching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3. QuerySet Evaluation and Caching</h2>\n<h3 id=\"131-evaluation-and-caching\" style=\"position:relative;\"><a href=\"#131-evaluation-and-caching\" aria-label=\"131 evaluation and caching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3.1. Evaluation and Caching</h3>\n<p>When QuerySets are evaluated, queries actually <strong>hit the database</strong>, and <strong>the result is cached(saved)</strong> in <code class=\"language-text\">self._result_cache</code>.</p>\n<p>Internally, a QuerySet can be constructed, filtered, sliced, and generally passed around without actually hitting the database. No database activity actually occurs until you do something to evaluate the queryset.</p>\n<h3 id=\"131-lazy-loading\" style=\"position:relative;\"><a href=\"#131-lazy-loading\" aria-label=\"131 lazy loading permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3.1. Lazy Loading</h3>\n<ul>\n<li><strong>Iteration</strong>\n<ul>\n<li>A QuerySet is iterable, and it executes its database query the first time you iterate over it.\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">for</span> e <span class=\"token keyword\">in</span> Entry<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>headline<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>Asynchronous iteration</strong></p>\n<ul>\n<li>\n<p>A QuerySet can also be iterated over using async for:</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">async</span> <span class=\"token keyword\">for</span> e <span class=\"token keyword\">in</span> Entry<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\nresults<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Slicing with Step</strong></p>\n<ul>\n<li>\n<p>As explained in Limiting QuerySets, a QuerySet can be sliced, using Python’s array-slicing syntax. <strong>Slicing an unevaluated QuerySet usually returns another unevaluated QuerySet</strong>, but Django will execute the database query <strong>if you use the “step” parameter of slice syntax, and will return a list.</strong> Slicing a QuerySet that has been evaluated also returns a list.</p>\n</li>\n<li>\n<p>Also note that even though slicing an unevaluated QuerySet returns another unevaluated QuerySet, <mark>modifying the returned unevalutaed QuerySet further (e.g., adding more filters, or modifying ordering) is not allowed,</mark> since that does not translate well into SQL and it would not have a clear meaning either.</p>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>Pickling</strong></p>\n<ul>\n<li>\n<p><strong>If you pickle a QuerySet, this will force all the results to be loaded into memory prior to pickling.</strong> Pickling is usually used as a precursor to caching and when the cached queryset is reloaded, you want the results to already be present and ready for use (reading from the database can take some time, defeating the purpose of caching). This means that when you unpickle a QuerySet, it contains the results at the moment it was pickled, rather than the results that are currently in the database.</p>\n</li>\n<li>\n<p>If you only want to pickle the necessary information to recreate the QuerySet from the database at a later time, <strong>pickle the query attribute of the QuerySet.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">import</span> pickle\nquery <span class=\"token operator\">=</span> pickle<span class=\"token punctuation\">.</span>loads<span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span>     <span class=\"token comment\"># Assuming 's' is the pickled string.</span>\nqs <span class=\"token operator\">=</span> MyModel<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nqs<span class=\"token punctuation\">.</span>query <span class=\"token operator\">=</span> query</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>repr()</strong></p>\n<ul>\n<li>A QuerySet is evaluated when you call repr() on it. This is for convenience in the Python interactive interpreter, so you can immediately see your results when using the API interactively.</li>\n</ul>\n</li>\n<li>\n<p><strong>len()</strong></p>\n<ul>\n<li>A QuerySet is evaluated when you call len() on it. This, as you might expect, returns the length of the result list.</li>\n</ul>\n<ul>\n<li>If you only need to determine the number of records in the set (and don’t need the actual objects), <mark>it’s much more efficient to use <code class=\"language-text\">QuerySet.count</code>.</mark></li>\n</ul>\n</li>\n<li>\n<p><strong>list()</strong></p>\n<ul>\n<li>Force evaluation of a QuerySet by calling list() on it. For example:</li>\n</ul>\n</li>\n<li>\n<p><strong>bool()</strong></p>\n<ul>\n<li>Testing a QuerySet in a boolean context, such as using bool(), or, and or an if statement, will cause the query to be executed. If there is at least one result, the QuerySet is True, otherwise False.</li>\n</ul>\n<ul>\n<li>\n<p>If you only want to determine if at least one result exists (and don’t need the actual objects), <mark>it’s more efficient to use exists().</mark></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">if</span> Entry<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>headline<span class=\"token operator\">=</span><span class=\"token string\">\"Test\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>exists<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"There is at least one Entry with the headline Test\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"2-basic-crud\" style=\"position:relative;\"><a href=\"#2-basic-crud\" aria-label=\"2 basic crud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Basic CRUD</h1>\n<h2 id=\"21-model\" style=\"position:relative;\"><a href=\"#21-model\" aria-label=\"21 model permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. Model</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    first_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">15</span><span class=\"token punctuation\">)</span>\n    last_name <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    age <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    country <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    phone <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span>\n    balance <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>IntegerField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"22-create\" style=\"position:relative;\"><a href=\"#22-create\" aria-label=\"22 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. Create</h2>\n<p><code class=\"language-text\">User.objects.create(first_name='Kim', last_name='Soo', ...)</code></p>\n<h2 id=\"23-read\" style=\"position:relative;\"><a href=\"#23-read\" aria-label=\"23 read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3. Read</h2>\n<p><strong>Read all the records</strong></p>\n<p><code class=\"language-text\">User.objects.all()</code></p>\n<p><strong>Read the 101th record</strong></p>\n<p><code class=\"language-text\">User.objects.get(pk=101)</code></p>\n<h3 id=\"231-values\" style=\"position:relative;\"><a href=\"#231-values\" aria-label=\"231 values permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3.1. values()</h3>\n<p><strong>Returns a list of dictionaries</strong> which keys are the field name and the value is the data. It gets the field name you want to represent as parameters.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nUser<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>id__lt<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3 id=\"232-values_list\" style=\"position:relative;\"><a href=\"#232-values_list\" aria-label=\"232 values_list permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3.2. values_list()</h3>\n<p><strong>Returns a list of tuples</strong> which elements are the data. It gets the field name you want to represent as parameters.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nUser<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>values_list<span class=\"token punctuation\">(</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>id__lt<span class=\"token operator\">=</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"24-update\" style=\"position:relative;\"><a href=\"#24-update\" aria-label=\"24 update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.4. Update</h2>\n<p><strong>Update the 101th record's last_name into 'Kim'</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">  user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span><span class=\"token number\">101</span><span class=\"token punctuation\">)</span>\n  user<span class=\"token punctuation\">.</span>last_name<span class=\"token operator\">=</span><span class=\"token string\">'Kim'</span>\n  user<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h2 id=\"25-delete\" style=\"position:relative;\"><a href=\"#25-delete\" aria-label=\"25 delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.5. Delete</h2>\n<p><strong>Delete the 101the record</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">-</span><span class=\"token number\">101</span><span class=\"token punctuation\">)</span>\nuser<span class=\"token punctuation\">.</span>delete<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h1 id=\"2-sort-data\" style=\"position:relative;\"><a href=\"#2-sort-data\" aria-label=\"2 sort data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Sort Data</h1>\n<p><strong>order_by()</strong></p>\n<ul>\n<li>Sort in ascending order, in the order of field names received as parameters.</li>\n<li>To sort in descending order, put '-'' before the field name.</li>\n<li>To sort in random, put '?' as a parameter.</li>\n</ul>\n<ul>\n<li><strong>Read first_name and age in order of age</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.order_by('age').values('first_name', 'age')</code></li>\n</ul>\n</li>\n<li><strong>Read all the fields in order of age</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.order_by('age').values()</code></li>\n</ul>\n</li>\n<li><strong>Read first_name and age in reverse order of age</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.order_by('-age').values('first_name', 'age')</code></li>\n</ul>\n</li>\n<li><strong>Read first_name and age in random order</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.order_by('?').values('first_name', 'age')</code></li>\n</ul>\n</li>\n<li><strong>Read first_name in order of age. If the age is the same, sort in reverse ordef of account_balance</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.order_by('age', '-balance').values('first_name')</code></li>\n</ul>\n</li>\n</ul>\n<h1 id=\"3-filter-data\" style=\"position:relative;\"><a href=\"#3-filter-data\" aria-label=\"3 filter data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Filter Data</h1>\n<p><a href=\"https://docs.djangoproject.com/en/4.1/ref/models/querysets/\">Django_Filter_Lookups</a></p>\n<p><strong>distinct()</strong></p>\n<ul>\n<li><strong>Read all the countries without duplication</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.distinct().values('country')</code></li>\n</ul>\n</li>\n<li><strong>Read all the countries without duplication inf order of country</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.distinct().values('country').order_by('country')</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>gte, gt</strong></p>\n<ul>\n<li><strong>Read first_name with age == 30</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(age=30).values('first_name')</code></li>\n</ul>\n</li>\n<li><strong>Read first_name with age >= 30</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(age__gte=30).values('first_name')</code></li>\n</ul>\n</li>\n<li><strong>Read first_name with age >= 30 and balance > 50</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(age__gte=30, balance__gt=50).values('first_name')</code></li>\n<li><code class=\"language-text\">from django.db.models import Q</code></li>\n<li><code class=\"language-text\">User.objects.filter(Q(age__gte=30) &amp; Q(balance__gt=50))</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>contains, startswith, endswith</strong></p>\n<ul>\n<li><strong>Read first_name which contains 'A'</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(first_name__contains='A').values('first_name')</code></li>\n</ul>\n</li>\n<li><strong>Read phone which starts with '011'</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(phone__startswiths='011-').values('phone')</code></li>\n</ul>\n</li>\n<li><strong>Read phone which endswith with '9'</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(phone__endswith='9').values('phone')</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>in</strong></p>\n<ul>\n<li><strong>Read first_name of people who live in Korea or America</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.filter(country__in=['Korea, 'America'']).values('first_name')</code></li>\n</ul>\n</li>\n<li><strong>Read first_name of people who don't live in Korea or America</strong>\n<ul>\n<li><code class=\"language-text\">User.obejcts.exclude(country__in=['Korea, 'America'']).values('first_name')</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>slicing</strong></p>\n<ul>\n<li>\n<p>Read first_name of the 10 yougest people</p>\n<ul>\n<li><code class=\"language-text\">User.obejcts.order_by('age').values('first_name')[:10]</code></li>\n</ul>\n</li>\n</ul>\n<p><strong>Q</strong></p>\n<ul>\n<li>Read first_name of people 'whose age is 30' or 'whose the last_name is 'Kim''\n<ul>\n<li>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Q`\nUser<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>Q<span class=\"token punctuation\">(</span>age<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> Q<span class=\"token punctuation\">(</span>last_name<span class=\"token operator\">=</span><span class=\"token string\">'Kim'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h1 id=\"4-group-data\" style=\"position:relative;\"><a href=\"#4-group-data\" aria-label=\"4 group data permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Group Data</h1>\n<h2 id=\"41-aggregation\" style=\"position:relative;\"><a href=\"#41-aggregation\" aria-label=\"41 aggregation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1. Aggregation</h2>\n<p><a href=\"https://docs.djangoproject.com/en/4.1/topics/db/aggregation/\">Django_Aggregation</a></p>\n<p><code class=\"language-text\">from django.db.models import function_name</code></p>\n<ul>\n<li>\n<p>It returns a dictionary which key is <code class=\"language-text\">'ParameterName\\_\\_FunctionName'</code>. The name of the key can be set.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>age__gte<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>aggregate<span class=\"token punctuation\">(</span>Avg<span class=\"token punctuation\">(</span><span class=\"token string\">'avg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># {'age__avg': 36.25}</span>\nUser<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">filter</span><span class=\"token punctuation\">(</span>age__gte<span class=\"token operator\">=</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>aggregate<span class=\"token punctuation\">(</span>average<span class=\"token operator\">=</span>Avg<span class=\"token punctuation\">(</span><span class=\"token string\">'avg'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># {'average': 36.25}</span></code></pre></div>\n</li>\n<li>\n<p><strong>Read the largest balance</strong></p>\n<ul>\n<li><code class=\"language-text\">User.objects.aggregate(Max('balance'))</code></li>\n</ul>\n</li>\n<li>\n<p><strong>Read the sum of balance</strong></p>\n<ul>\n<li><code class=\"language-text\">User.objects.aggregate(Sum('balance'))</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"42-annotation\" style=\"position:relative;\"><a href=\"#42-annotation\" aria-label=\"42 annotation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2. Annotation</h2>\n<p><strong>Add an additional columm for the records grouped by values()</strong></p>\n<ul>\n<li><strong>Read the number of people in each country</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.values('country').annotate(Count('country'))</code></li>\n</ul>\n</li>\n<li><strong>Read the number of people and the average of balance in each country</strong>\n<ul>\n<li><code class=\"language-text\">User.objects.values('country').annotate(Count('country'), avg_balance=Avg('balance'))</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"421-annotation-in-n1\" style=\"position:relative;\"><a href=\"#421-annotation-in-n1\" aria-label=\"421 annotation in n1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2.1. Annotation In N:1</h2>\n<p><strong>Example 1</strong></p>\n<ul>\n<li>\n<p><strong>The relationship between comments and articles is N:1.</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># N : 1 = Comment : Article</span>\nArticle<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span>\n    number_of_comment<span class=\"token operator\">=</span>Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    number_of_recent_comment<span class=\"token operator\">=</span>Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">filter</span><span class=\"token operator\">=</span>Q<span class=\"token punctuation\">(</span>comment__created_at__lte<span class=\"token operator\">=</span><span class=\"token string\">'2000-01-01'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>The parameter 'comment' is <strong>not related_name</strong>, but <strong>model_name</strong></li>\n</ul>\n</li>\n</ul>\n<p><strong>Example 2</strong></p>\n<ul>\n<li>\n<p>models.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Question</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    title <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    issue_a <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n    issue_b <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Comment</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    question <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ForeignKey<span class=\"token punctuation\">(</span>Question<span class=\"token punctuation\">,</span> on_delete<span class=\"token operator\">=</span>models<span class=\"token punctuation\">.</span>CASCADE<span class=\"token punctuation\">)</span>\n    content <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span>\n    pick <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>BooleanField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p>forms.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">CommentForm</span><span class=\"token punctuation\">(</span>forms<span class=\"token punctuation\">.</span>ModelForm<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    PICK_A <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n    PICK_B <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n    PICKS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n        <span class=\"token punctuation\">(</span>PICK_A<span class=\"token punctuation\">,</span> <span class=\"token string\">'왼쪽'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        <span class=\"token punctuation\">(</span>PICK_B<span class=\"token punctuation\">,</span> <span class=\"token string\">'오른쪽'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span>\n    pick <span class=\"token operator\">=</span> forms<span class=\"token punctuation\">.</span>ChoiceField<span class=\"token punctuation\">(</span>choices<span class=\"token operator\">=</span>PICKS<span class=\"token punctuation\">)</span>\n\n    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span>\n        model <span class=\"token operator\">=</span> Comment\n        fields <span class=\"token operator\">=</span> <span class=\"token string\">'__all__'</span></code></pre></div>\n</li>\n<li>\n<p>views.py</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">detail</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> question_pk<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    count_a <span class=\"token operator\">=</span> Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">filter</span><span class=\"token operator\">=</span>Q<span class=\"token punctuation\">(</span>comment__pick<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    count_b <span class=\"token operator\">=</span> Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">,</span> <span class=\"token builtin\">filter</span><span class=\"token operator\">=</span>Q<span class=\"token punctuation\">(</span>comment__pick<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    total_count <span class=\"token operator\">=</span> Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">)</span>\n\n    question <span class=\"token operator\">=</span> Question<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span>\n        count_a <span class=\"token operator\">=</span> count_a<span class=\"token punctuation\">,</span>\n        count_b <span class=\"token operator\">=</span> count_b<span class=\"token punctuation\">,</span>\n        totla_count <span class=\"token operator\">=</span> total_count<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>questioin_pk<span class=\"token punctuation\">)</span>\n\n    question<span class=\"token punctuation\">.</span>count_a <span class=\"token comment\"># 왼쪽을 선택한 코멘트 갯수</span>\n    question<span class=\"token punctuation\">.</span>count_b <span class=\"token comment\"># 오른을 선택한 코멘트 갯수</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"6-query-optimization\" style=\"position:relative;\"><a href=\"#6-query-optimization\" aria-label=\"6 query optimization permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Query Optimization</h1>\n<p><strong>References</strong></p>\n<ul>\n<li><a href=\"https://www.youtube.com/watch?v=EZgLfDrUlrk\">Pycon 2020 QuerySet</a></li>\n<li><a href=\"https://leffept.tistory.com/316\">블로그 글</a></li>\n</ul>\n<p><strong>Table Relations</strong></p>\n<ul>\n<li>1:N (Article-Comment)</li>\n<li>1:N (User-Article)</li>\n<li>1:N (User-Comment)</li>\n</ul>\n<h2 id=\"61-annotate\" style=\"position:relative;\"><a href=\"#61-annotate\" aria-label=\"61 annotate permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.1. annotate</h2>\n<ul>\n<li>\n<p><strong>Display the number of comments for each article in the index_1.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">index_1</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    articles <span class=\"token operator\">=</span> Article<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span>Count<span class=\"token punctuation\">(</span><span class=\"token string\">'comment'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pk'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'articles'</span><span class=\"token punctuation\">:</span> articles<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'articles/index_1.html'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"62-selected_related\" style=\"position:relative;\"><a href=\"#62-selected_related\" aria-label=\"62 selected_related permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.2. selected_related()</h2>\n<ul>\n<li><strong>select_related(*fields)</strong>\nMake <code class=\"language-text\">INNER JOIN</code> query for the field which is ForeignKey or OneToOneField relation.</li>\n</ul>\n<ul>\n<li>\n<p><strong>Display the username for each article in the index_2.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">index_2</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    articles <span class=\"token operator\">=</span> Article<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pk'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'articles'</span><span class=\"token punctuation\">:</span> articles<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'articles/index_2.html'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"63-prefetch_related\" style=\"position:relative;\"><a href=\"#63-prefetch_related\" aria-label=\"63 prefetch_related permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.3. prefetch_related()</h2>\n<ul>\n<li><strong>prefetch_related(*lookups)</strong>\nMake other QuerySets for the lookup which are ManytoManyField OneToMany dereference relation.</li>\n</ul>\n<ul>\n<li>\n<p><strong>Display all the comments for each article in the index_3.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">index_3</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    articles <span class=\"token operator\">=</span> Article<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>prefetch_related<span class=\"token punctuation\">(</span><span class=\"token string\">'comment_set'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pk'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'articles'</span><span class=\"token punctuation\">:</span> articles<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'articles/index_3.html'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"64-prefetch\" style=\"position:relative;\"><a href=\"#64-prefetch\" aria-label=\"64 prefetch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.4. Prefetch()</h2>\n<ul>\n<li><strong>Prefetch(lookup, queryset=None, to_attr=None)¶</strong>\n<ul>\n<li>The Prefetch() object can be used to control the operation of prefetch_related().</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>Display the author and all the comments for each article in the index_4.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">index_4</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    articles <span class=\"token operator\">=</span> Article<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>prefetch_related<span class=\"token punctuation\">(</span>\n        Prefetch<span class=\"token punctuation\">(</span><span class=\"token string\">'comment_set'</span><span class=\"token punctuation\">,</span> queryset<span class=\"token operator\">=</span>Comment<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>select_related<span class=\"token punctuation\">(</span><span class=\"token string\">'user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>order_by<span class=\"token punctuation\">(</span><span class=\"token string\">'-pk'</span><span class=\"token punctuation\">)</span>\n    context <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">'articles'</span><span class=\"token punctuation\">:</span> articles<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">return</span> render<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">,</span> <span class=\"token string\">'articles/index_4.html'</span><span class=\"token punctuation\">,</span> context<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-queryset\">1. QuerySet</a></p>\n<ul>\n<li>\n<p><a href=\"#11-query\">1.1. Query</a></p>\n</li>\n<li>\n<p><a href=\"#11-what-is-queryset\">1.1. What is QuerySet</a></p>\n<ul>\n<li><a href=\"#111-check-sql-query\">1.1.1. Check SQL Query</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#12-queryset-api\">1.2. QuerySet API</a></p>\n</li>\n<li>\n<p><a href=\"#13-queryset-evaluation-and-caching\">1.3. QuerySet Evaluation and Caching</a></p>\n<ul>\n<li><a href=\"#131-evaluation-and-caching\">1.3.1. Evaluation and Caching</a></li>\n<li><a href=\"#131-lazy-loading\">1.3.1. Lazy Loading</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-basic-crud\">2. Basic CRUD</a></p>\n<ul>\n<li>\n<p><a href=\"#21-model\">2.1. Model</a></p>\n</li>\n<li>\n<p><a href=\"#22-create\">2.2. Create</a></p>\n</li>\n<li>\n<p><a href=\"#23-read\">2.3. Read</a></p>\n<ul>\n<li><a href=\"#231-values\">2.3.1. values()</a></li>\n<li><a href=\"#232-values_list\">2.3.2. values_list()</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#24-update\">2.4. Update</a></p>\n</li>\n<li>\n<p><a href=\"#25-delete\">2.5. Delete</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-sort-data\">2. Sort Data</a></p>\n</li>\n<li>\n<p><a href=\"#3-filter-data\">3. Filter Data</a></p>\n</li>\n<li>\n<p><a href=\"#4-group-data\">4. Group Data</a></p>\n<ul>\n<li><a href=\"#41-aggregation\">4.1. Aggregation</a></li>\n<li><a href=\"#42-annotation\">4.2. Annotation</a></li>\n<li><a href=\"#421-annotation-in-n1\">4.2.1. Annotation In N:1</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#6-query-optimization\">6. Query Optimization</a></p>\n<ul>\n<li><a href=\"#61-annotate\">6.1. annotate</a></li>\n<li><a href=\"#62-selected_related\">6.2. selected_related()</a></li>\n<li><a href=\"#63-prefetch_related\">6.3. prefetch_related()</a></li>\n<li><a href=\"#64-prefetch\">6.4. Prefetch()</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"createdAt":"2022-12-24","isCompleted":true,"reference":null,"title":"Django QuerySet","updatedAt":"2022-12-25"}},"allMarkdownRemark":{"nodes":[{"id":"005a8113-20da-59f5-849d-0f9aef3a6f71","parent":{"id":"84f76b0b-ed0c-5bab-a01c-527db65b0400","name":"02_Django_CRUD","relativePath":"Django/02_Django_CRUD.md"},"frontmatter":{"title":"Django Basic CRUD","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"excerpt":"0. Cross Site Request Forgery(CSRF) 0.1. What is CSRF 0.2. CSRF Token 1. Model 1.1. models.py 2. Create 2.1. urls.py 2.2. views.py 2.…"},{"id":"0de70fd0-12aa-50df-9b48-f01e0a227eaf","parent":{"id":"b2c5f3de-6374-5e40-965e-581fad21ff28","name":"01_Django_Basics_MTV","relativePath":"Django/01_Django_Basics_MTV.md"},"frontmatter":{"title":"Django Basics & MTV Design Pattern","createdAt":"2022-12-24","updatedAt":"2022-12-24"},"excerpt":"1. Django 1.1. Framework 1.2. Django 2. MTV Design Pattern 2.1. Design Pattern 2.2. MTV Design Pattern 3. Start Django 4. Django Folder…"},{"id":"ade014fc-d912-54fa-8675-d122aa8f44ad","parent":{"id":"4fde6c73-3e67-5377-b04a-dc5180c6ec82","name":"03_Django_CRUD_ModelForm","relativePath":"Django/03_Django_CRUD_ModelForm.md"},"frontmatter":{"title":"Django CRUD with Model Form","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"excerpt":"1. Model Form 1.1. Model Class 1.2. Form Class 1.3. ModeForm Class 2. Create 2.1. urls.py 2.2. views.py 2.3. templates.html 3. Read 3.…"},{"id":"397c0d91-4c7a-5ab6-8e32-c5d7386727ea","parent":{"id":"c267c5b8-dc49-5713-ad34-8b2c2ac02a49","name":"10_Django_Fixtures","relativePath":"Django/10_Django_Fixtures.md"},"frontmatter":{"title":"Django Fixtures","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Fixtures 1.1. The Definition of Fixtures 1.2. The Default Path of Fixtures 1.3. Create Fixtures 1.4. Import Fixtures 1. Fixtures How to…"},{"id":"69420cc4-915c-5eb2-94aa-20d32c90a4b2","parent":{"id":"5154c6c2-58ed-5383-8571-bc8f9b666149","name":"04_Django_Authentication","relativePath":"Django/04_Django_Authentication.md"},"frontmatter":{"title":"Django Internal Authentication","createdAt":"2022-12-24","updatedAt":"2023-01-02"},"excerpt":"1. Overview 1.1. Authentication 1.2. Authorization 1.3. accounts App 2. Custom User Model 2.1. User Model 2.2. Custom User Model 2.3. User…"},{"id":"55874a3b-56f1-5093-a858-1586c85f9dc2","parent":{"id":"a84a604d-81a4-5ee7-9914-73ce3a3e7e74","name":"07_Django_Many_to_One","relativePath":"Django/07_Django_Many_to_One.md"},"frontmatter":{"title":"Django N:1 Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Many to One Relationship 1.1. Foreign Key 2. Comment : Article (N:1) 2.1. Create 2.2. Read 2.3. Delete 3. Article : User (N:1) 3.…"},{"id":"633d2abf-abb7-5325-92c0-54dbe1989fa6","parent":{"id":"976f6368-b1b7-5f0c-8a32-e5cfb6056227","name":"08_Django_Many_to_Many","relativePath":"Django/08_Django_Many_to_Many.md"},"frontmatter":{"title":"Django N:M Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Intro 1.1. Terms 1.2. The limits of N:1 Relationship 1.3. Intermediary Model 1.4. Many To Many Field 1.5. Many To Many Table 1.6. with…"},{"id":"f7ac871f-e347-59d7-8418-39557102d551","parent":{"id":"9f5cf10a-5b33-5d35-aa41-032787c3343b","name":"06_Django_QuerySet","relativePath":"Django/06_Django_QuerySet.md"},"frontmatter":{"title":"Django QuerySet","createdAt":"2022-12-24","updatedAt":"2022-12-25"},"excerpt":"1. QuerySet 1.1. Query 1.1. What is QuerySet 1.1.1. Check SQL Query 1.2. QuerySet API 1.3. QuerySet Evaluation and Caching 1.3.1. Evaluation…"},{"id":"b3d21f66-8f2b-59a8-81c4-587fe42f84f2","parent":{"id":"21cc89c1-794b-59d3-bb90-86f961c2bf51","name":"11_Django_REST_API","relativePath":"Django/11_Django_REST_API.md"},"frontmatter":{"title":"Django REST API","createdAt":"2022-11-08","updatedAt":"2022-12-28"},"excerpt":"1. HTTP 1.1. HTTP 정의 1.2. HTTP의 특징 1.3. HTTP Request Methods 1.3. HTTP Response Status Code 1.4. URI(Uniform Resource Indentifier) 1.5. URL…"},{"id":"255d6bb1-5984-5128-8fda-aa203cae6dcd","parent":{"id":"537a7f4b-d6af-50a5-9f04-a17b2eb274b5","name":"12_Django_REST_Authentication","relativePath":"Django/12_Django_REST_Authentication.md"},"frontmatter":{"title":"Django REST Authentication","createdAt":"2023-01-02","updatedAt":"2023-01-12"},"excerpt":"1. CORS 1.1. Same Origin Policy 1.2. Definition of Origin 1.3. CORS 1.3.1. django-cors-headers 2. Authentication 2.1. Authentication Class…"},{"id":"b1b31545-c67e-5d21-8254-dc52ed891c2b","parent":{"id":"e0689d95-499a-5f59-8d10-6132ecec9aef","name":"09_Django_Static_Media","relativePath":"Django/09_Django_Static_Media.md"},"frontmatter":{"title":"Django Static Files","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Static Files 1.1. Static Files 1.2. Static Files with Django 1.3. Deploy Static Files 1.3.1. STATIC_ROOT 1.3.2. Procedure 2. Media Files…"},{"id":"b97171dd-b5cf-5451-9b77-2e7a7840bcb7","parent":{"id":"cf91fadb-f3c3-5472-bbe0-45bb09d06c47","name":"05_SQLite3_SQL","relativePath":"Django/05_SQLite3_SQL.md"},"frontmatter":{"title":"SQL Basics","createdAt":"2022-12-28","updatedAt":"2022-12-28"},"excerpt":"1. Database 1.1. RDB 1.2. Structure 2. SQL 2.1. SQL 2.2. Types of SQL Commands 2.3. SQL Syntax 2.4. Import .csv to Table 3. DDL 3.1. CREATE…"}]}},"pageContext":{"pagePath":"posts/Django/06_Django_QuerySet.md","regex":"/^(?!.*README).*Django.*$/","id":"f7ac871f-e347-59d7-8418-39557102d551","parent":{"id":"9f5cf10a-5b33-5d35-aa41-032787c3343b","name":"06_Django_QuerySet","relativeDirectory":"Django","relativePath":"Django/06_Django_QuerySet.md"}}},"staticQueryHashes":["3300660363","3571427910"],"slicesMap":{}}