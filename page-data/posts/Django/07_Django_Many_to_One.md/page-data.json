{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/Django/07_Django_Many_to_One.md/","result":{"data":{"markdownRemark":{"id":"55874a3b-56f1-5093-a858-1586c85f9dc2","html":"<ul>\n<li><a href=\"#1-many-to-one-relationship\">1. Many to One Relationship</a>\n<ul>\n<li><a href=\"#11-foreign-key\">1.1. Foreign Key</a></li>\n</ul>\n</li>\n<li><a href=\"#2-comment--article-n1\">2. Comment : Article (N:1)</a>\n<ul>\n<li><a href=\"#21-create\">2.1. Create</a></li>\n<li><a href=\"#22-read\">2.2. Read</a></li>\n<li><a href=\"#23-delete\">2.3. Delete</a></li>\n</ul>\n</li>\n<li><a href=\"#3-article--user-n1\">3. Article : User (N:1)</a>\n<ul>\n<li><a href=\"#31-create\">3.1. Create</a></li>\n<li><a href=\"#32-update\">3.2. Update</a></li>\n<li><a href=\"#33-delete\">3.3. Delete</a></li>\n</ul>\n</li>\n<li><a href=\"#4-comment--user-n1\">4. Comment : User (N:1)</a>\n<ul>\n<li><a href=\"#41-create\">4.1. Create</a></li>\n<li><a href=\"#42-read\">4.2. Read</a></li>\n<li><a href=\"#43-delete\">4.3. Delete</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"1-many-to-one-relationship\" style=\"position:relative;\"><a href=\"#1-many-to-one-relationship\" aria-label=\"1 many to one relationship permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Many to One Relationship</h1>\n<p><strong>One-to-Many relationship in DBMS is a relationship between instances of an entity with more than one instance of another entity.</strong>\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 700px; margin-bottom: 20px;\">\n      <a class=\"gatsby-resp-image-link\" href=\"/TIL/static/0002477094b511c0b801f4c5c0c066cc/15ae0/Many_to_one.jpg\" style=\"display: block\" target=\"_blank\" rel=\"noopener\">\n    <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 18.285714285714285%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAEABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQC/8QAFgEBAQEAAAAAAAAAAAAAAAAAAgED/9oADAMBAAIQAxAAAAG+gi0Hn//EABcQAQADAAAAAAAAAAAAAAAAAAACETL/2gAIAQEAAQUCRzT/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAwEBPwFn/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8BJ//EABYQAQEBAAAAAAAAAAAAAAAAAAAxAf/aAAgBAQAGPwJV1//EABoQAAICAwAAAAAAAAAAAAAAAAARAZEhMdH/2gAIAQEAAT8hcvc2NKNZh2P/2gAMAwEAAgADAAAAEPAv/8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQMBAT8QAE//xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxBKz//EABoQAAMBAAMAAAAAAAAAAAAAAAERIQBBkdH/2gAIAQEAAT8QNFxy/uVI0liu8DBBOf/Z'); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Many_to_one\" title=\"\" src=\"/TIL/static/0002477094b511c0b801f4c5c0c066cc/29d31/Many_to_one.jpg\" srcset=\"/TIL/static/0002477094b511c0b801f4c5c0c066cc/e52aa/Many_to_one.jpg 175w,\n/TIL/static/0002477094b511c0b801f4c5c0c066cc/70ebb/Many_to_one.jpg 350w,\n/TIL/static/0002477094b511c0b801f4c5c0c066cc/29d31/Many_to_one.jpg 700w,\n/TIL/static/0002477094b511c0b801f4c5c0c066cc/9ecec/Many_to_one.jpg 1050w,\n/TIL/static/0002477094b511c0b801f4c5c0c066cc/15ae0/Many_to_one.jpg 1092w\" sizes=\"(max-width: 700px) 100vw, 700px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n  </a>\n    </span></p>\n<h2 id=\"11-foreign-key\" style=\"position:relative;\"><a href=\"#11-foreign-key\" aria-label=\"11 foreign key permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. Foreign Key</h2>\n<p>A foreign key is a column or columns of data in one table that refers to the unique data values (often the primary key data) in another table</p>\n<h1 id=\"2-comment--article-n1\" style=\"position:relative;\"><a href=\"#2-comment--article-n1\" aria-label=\"2 comment  article n1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Comment : Article (N:1)</h1>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<pre><code class=\"language-python\"># articles/models.py\nclass Article(models.Model):\n    title = models.CharField(max_length=10)\n    content = models.TextField()\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n\n\nclass Comment(models.Model):\n    article = models.ForeignKey(Article, on_delete=models.CASCADE, releated_name='comments')\n    content = models.CharField(max_length=200)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n</code></pre>\n<ul>\n<li><strong>on_delete</strong>\n<ul>\n<li>Referential Integrity: what to do when the parent instance is deleted</li>\n<li>CASCADE\n<ul>\n<li>The referencing instance is also deleted</li>\n</ul>\n</li>\n<li>PROTECT\n<ul>\n<li>Can't delete the parent instance</li>\n</ul>\n</li>\n<li>SET_NULL</li>\n<li>SET_DEFAULT</li>\n</ul>\n</li>\n<li><strong>related_name</strong>\n<ul>\n<li>The alias of the dereference manager</li>\n<li>Default value is <code>modelName_set</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>\n<p><strong>forms.py</strong></p>\n<pre><code class=\"language-python\"># articles/forms.py\nclass CommentForm(forms.ModelForm):\n\nclass Meta:\n    model = Comment\n    exclude = ('article',)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"21-create\" style=\"position:relative;\"><a href=\"#21-create\" aria-label=\"21 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. Create</h2>\n<ul>\n<li><strong>urls.py</strong>\n<pre><code class=\"language-python\"># articles/urls.py\nurlpatterns = [\n    ...,\n    path('&#x3C;int:pk>/comments/', views.comments_create, name='comments_create'),\n]\n</code></pre>\n</li>\n<li><strong>views.py</strong>\n<pre><code class=\"language-python\"># articles/views.py\ndef comments_create(request, pk):\n    article = Article.objects.get(pk=pk)\n    comment_form = CommentForm(request.POST)\n    if comment_form.is_valid():\n        comment = comment_form.save(commit=False)\n        comment.accounts = article\n        comment.save()\n    return redirect('movies:detail', pk)\n</code></pre>\n</li>\n<li><strong>detail.html</strong>\n<pre><code class=\"language-html\">&#x3C;!-- articles/detail.html -->\n&#x3C;form\n  action=\" {% url 'articles:comments_create' article.pk %} \"\n  method=\"POST\">\n  {% csrf_token %} {{ comment_form }}\n  &#x3C;input type=\"submit\" />\n&#x3C;/form>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"22-read\" style=\"position:relative;\"><a href=\"#22-read\" aria-label=\"22 read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. Read</h2>\n<ul>\n<li><strong>views.py</strong>\n<pre><code class=\"language-python\"># articles/views.py\ndef detail(request, pk):\n    article = Article.objects.get(pk=pk)\n    comment_form = CommentForm()\n    # 역참조 manager 사용\n    # related_name 미선언 시, comment_set\n    comments = article.comments.all()\n    context = {\n        'movie': movie,,\n        'comment_form': comment_form,\n        'comments': comments\n    }\n    return render(request, 'articles/detail.html', context)\n</code></pre>\n</li>\n<li><strong>detail.html</strong>\n<pre><code class=\"language-html\">&#x3C;h4>댓글 목록&#x3C;/h4>\n&#x3C;ul>\n  {% for comment in comments %}\n  &#x3C;li>{{ comment.content }}&#x3C;/li>\n  {% endfor %}\n&#x3C;/ul>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"23-delete\" style=\"position:relative;\"><a href=\"#23-delete\" aria-label=\"23 delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.3. Delete</h2>\n<ul>\n<li><strong>urls.py</strong>\n<pre><code class=\"language-python\"># articles/urls.py\nurlpatterns = [\n    ...,\n    path('&#x3C;int:article_pk>/comments/&#x3C;int:comment_pk>', views.comments_delete, name='comments_delete'),\n]\n</code></pre>\n</li>\n<li><strong>views.py</strong>\n<pre><code class=\"language-python\"># articles/views.py\ndef comments_delete(request, article_pk, comment_pk):\n    comment = Comment.objects.get(pk=comment_pk)\n    comment.delete()\n    return redirect('articles:detail', article_pk)\n</code></pre>\n</li>\n<li><strong>detail.html</strong>\n<pre><code class=\"language-html\">&#x3C;h4>댓글 목록&#x3C;/h4>\n&#x3C;ul>\n  {% for comment in comments %}\n  &#x3C;li>\n    {{ comment.content }}\n    &#x3C;form\n      action=\" {% url 'articles:comments_delete' article.pk comment_pk %} \"\n      method=\"POST\">\n      {% csrf_token %}\n      &#x3C;input type=\"submit\" value=\"DELETE\" />\n    &#x3C;/form>\n  &#x3C;/li>\n  {% endfor %}\n&#x3C;/ul>\n</code></pre>\n</li>\n</ul>\n<h1 id=\"3-article--user-n1\" style=\"position:relative;\"><a href=\"#3-article--user-n1\" aria-label=\"3 article  user n1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Article : User (N:1)</h1>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<pre><code class=\"language-python\"># articles/models.py\nfrom django.conf import settings\n\nclass Movie(models.Model):\nuser = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n</code></pre>\n</li>\n<li>\n<p><strong>forms.py</strong></p>\n<pre><code class=\"language-python\"># articles/forms.py\nclass ArticleForm(forms.ModelForm):\n\nclass Meta:\n    model = Comment\n    exclude = ('user',)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"31-create\" style=\"position:relative;\"><a href=\"#31-create\" aria-label=\"31 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. Create</h2>\n<ul>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\"># articles/views.py\n\n@login_required\n@require_http_methods(['GET', 'POST'])\ndef create(request):\n    if request.method == 'POST':\n        form = ArticleForm(request.POST)\n        if form.is_valid():\n            article = form.save(commit=False)\n            article.user = request.user\n            article.save()\n            return redirect('movies:detail', article.pk)\n    else:\n        form = ArticleForm()\n    context = {\n        'form': form,\n    }\n    return render(request, 'articles/create.html', context)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"32-update\" style=\"position:relative;\"><a href=\"#32-update\" aria-label=\"32 update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. Update</h2>\n<ul>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\">@login_required\n@require_http_methods(['GET', 'POST'])\ndef update(request, pk):\n    article = article.objects.get(pk=pk)\n    if request.user == article.user:\n        if request.method == 'POST':\n            form = ArticleForm(request.POST, instance=article)\n            if form.is_valid():\n                form.save()\n                return redirect('articles:detail', pk)\n        else:\n            form = ArticleForm(instance=article)\n        context = {\n            'article': article,\n            'form': form\n        }\n        return render(request, 'articles/update.html', context)\n    return HttpResponse(status=403)\n</code></pre>\n</li>\n<li>\n<p><strong>detail.html</strong></p>\n<pre><code class=\"language-html\">{% if request.user == article.user %}\n&#x3C;a href=\"{% url 'articles:update' article.pk %}\">UPDATE&#x3C;/a>\n&#x3C;form action=\"{% url 'articles:delete' article.pk %}\" method=\"POST\">\n  {% csrf_token %}\n  &#x3C;input type=\"submit\" value=\"DELETE\" />\n&#x3C;/form>\n{% endif %}\n</code></pre>\n</li>\n</ul>\n<h2 id=\"33-delete\" style=\"position:relative;\"><a href=\"#33-delete\" aria-label=\"33 delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3. Delete</h2>\n<ul>\n<li>\n<p><strong>views.py</strong></p>\n<pre><code class=\"language-python\"># articles/views.py\n\n@require_POST\ndef delete(request, pk):\n    article = Article.objects.get(pk=pk)\n    if request.user.is_authenticated:\n        if request.user == article.user:\n            article.delete()\n            return redirect('articles:index')\n        return HttpResponse(status=403) # 권한없음\n    return redirect('accounts:login')\n</code></pre>\n</li>\n<li>\n<p><strong>detail.html</strong></p>\n<pre><code class=\"language-html\">{% if request.user == article.user %}\n&#x3C;a href=\"{% url 'articles:update' article.pk %}\">UPDATE&#x3C;/a>\n&#x3C;form action=\"{% url 'articles:delete' article.pk %}\" method=\"POST\">\n  {% csrf_token %}\n  &#x3C;input type=\"submit\" value=\"DELETE\" />\n&#x3C;/form>\n{% endif %}\n</code></pre>\n</li>\n</ul>\n<h1 id=\"4-comment--user-n1\" style=\"position:relative;\"><a href=\"#4-comment--user-n1\" aria-label=\"4 comment  user n1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Comment : User (N:1)</h1>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<pre><code class=\"language-python\"># articles/models.py\nclass Comment(models.Model):\n    article = models.ForeignKey(Article, on_delete=models.CASCADE, releated_name='comments'),\n    user = mmodels.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n</code></pre>\n</li>\n<li>\n<p><strong>forms.py</strong></p>\n<pre><code class=\"language-python\"># articles/forms.py\nclass CommentForm(forms.ModelForm):\n\nclass Meta:\n    model = Comment\n    exclude = ('article', 'user',)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"41-create\" style=\"position:relative;\"><a href=\"#41-create\" aria-label=\"41 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1. Create</h2>\n<ul>\n<li><strong>views.py</strong>\n<pre><code class=\"language-python\"># articles/views.py\ndef comments_create(request, pk):\n    article = Article.objects.get(pk=pk)\n    comment_form = CommentForm(request.POST)\n    if comment_form.is_valid():\n        comment = comment_form.save(commit=False)\n        comment.accounts = article\n        comment.user = request.user\n        comment.save()\n    return redirect('movies:detail', pk)\n</code></pre>\n</li>\n</ul>\n<h2 id=\"42-read\" style=\"position:relative;\"><a href=\"#42-read\" aria-label=\"42 read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2. Read</h2>\n<ul>\n<li><strong>detail.html</strong>\n<pre><code class=\"language-html\">&#x3C;h4>댓글 목록&#x3C;/h4>\n&#x3C;ul>\n  {% for comment in comments %}\n  &#x3C;li>{{ comment.user }}: {{ comment.content }}&#x3C;/li>\n  {% endfor %}\n&#x3C;/ul>\n</code></pre>\n</li>\n</ul>\n<h2 id=\"43-delete\" style=\"position:relative;\"><a href=\"#43-delete\" aria-label=\"43 delete permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3. Delete</h2>\n<ul>\n<li><strong>views.py</strong>\n<pre><code class=\"language-python\"># articles/views.py\ndef comments_delete(request, article_pk, comment_pk):\n    comment = Comment.objects.get(pk=comment_pk)\n    if request.user == comment.user:\n        comment.delete()\n    return redirect('articles:detail', article_pk)\n</code></pre>\n</li>\n<li><strong>detail.html</strong>\n<pre><code class=\"language-html\">&#x3C;h4>댓글 목록&#x3C;/h4>\n&#x3C;ul>\n  {% for comment in comments %}\n  &#x3C;li>\n    {{ comment.user }}: {{ comment.content }} {% if request.user ==\n    comment.user %}\n    &#x3C;form\n      action=\" {% url 'articles:comments_delete' article.pk comment_pk %} \"\n      method=\"POST\">\n      {% csrf_token %}\n      &#x3C;input type=\"submit\" value=\"DELETE\" />\n    &#x3C;/form>\n    {% endif %}\n  &#x3C;/li>\n  {% endfor %}\n&#x3C;/ul>\n</code></pre>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-many-to-one-relationship\">1. Many to One Relationship</a></p>\n<ul>\n<li><a href=\"#11-foreign-key\">1.1. Foreign Key</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-comment--article-n1\">2. Comment : Article (N:1)</a></p>\n<ul>\n<li><a href=\"#21-create\">2.1. Create</a></li>\n<li><a href=\"#22-read\">2.2. Read</a></li>\n<li><a href=\"#23-delete\">2.3. Delete</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-article--user-n1\">3. Article : User (N:1)</a></p>\n<ul>\n<li><a href=\"#31-create\">3.1. Create</a></li>\n<li><a href=\"#32-update\">3.2. Update</a></li>\n<li><a href=\"#33-delete\">3.3. Delete</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-comment--user-n1\">4. Comment : User (N:1)</a></p>\n<ul>\n<li><a href=\"#41-create\">4.1. Create</a></li>\n<li><a href=\"#42-read\">4.2. Read</a></li>\n<li><a href=\"#43-delete\">4.3. Delete</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"title":"Django N:1 Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27","tags":null,"description":null,"reference":null}},"allMarkdownRemark":{"nodes":[{"id":"005a8113-20da-59f5-849d-0f9aef3a6f71","parent":{"id":"84f76b0b-ed0c-5bab-a01c-527db65b0400","name":"02_Django_CRUD","relativePath":"Django/02_Django_CRUD.md"},"frontmatter":{"title":"Django Basic CRUD","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"excerpt":"0. Cross Site Request Forgery(CSRF) 0.1. What is CSRF 0.2. CSRF Token 1. Model 1.1. models.py 2. Create 2.1. urls.py 2.2. views.py 2.…"},{"id":"0de70fd0-12aa-50df-9b48-f01e0a227eaf","parent":{"id":"b2c5f3de-6374-5e40-965e-581fad21ff28","name":"01_Django_Basics_MTV","relativePath":"Django/01_Django_Basics_MTV.md"},"frontmatter":{"title":"Django Basics & MTV Design Pattern","createdAt":"2022-12-24","updatedAt":"2022-12-24"},"excerpt":"1. Django 1.1. Framework 1.2. Django 2. MTV Design Pattern 2.1. Design Pattern 2.2. MTV Design Pattern 3. Start Django 4. Django Folder…"},{"id":"ade014fc-d912-54fa-8675-d122aa8f44ad","parent":{"id":"4fde6c73-3e67-5377-b04a-dc5180c6ec82","name":"03_Django_CRUD_ModelForm","relativePath":"Django/03_Django_CRUD_ModelForm.md"},"frontmatter":{"title":"Django CRUD with Model Form","createdAt":"2022-11-08","updatedAt":"2022-12-24"},"excerpt":"1. Model Form 1.1. Model Class 1.2. Form Class 1.3. ModeForm Class 2. Create 2.1. urls.py 2.2. views.py 2.3. templates.html 3. Read 3.…"},{"id":"397c0d91-4c7a-5ab6-8e32-c5d7386727ea","parent":{"id":"c267c5b8-dc49-5713-ad34-8b2c2ac02a49","name":"10_Django_Fixtures","relativePath":"Django/10_Django_Fixtures.md"},"frontmatter":{"title":"Django Fixtures","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Fixtures 1.1. The Definition of Fixtures 1.2. The Default Path of Fixtures 1.3. Create Fixtures 1.4. Import Fixtures 1. Fixtures How to…"},{"id":"69420cc4-915c-5eb2-94aa-20d32c90a4b2","parent":{"id":"5154c6c2-58ed-5383-8571-bc8f9b666149","name":"04_Django_Authentication","relativePath":"Django/04_Django_Authentication.md"},"frontmatter":{"title":"Django Internal Authentication","createdAt":"2022-12-24","updatedAt":"2023-01-02"},"excerpt":"1. Overview 1.1. Authentication 1.2. Authorization 1.3. accounts App 2. Custom User Model 2.1. User Model 2.2. Custom User Model 2.3. User…"},{"id":"55874a3b-56f1-5093-a858-1586c85f9dc2","parent":{"id":"a84a604d-81a4-5ee7-9914-73ce3a3e7e74","name":"07_Django_Many_to_One","relativePath":"Django/07_Django_Many_to_One.md"},"frontmatter":{"title":"Django N:1 Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Many to One Relationship 1.1. Foreign Key 2. Comment : Article (N:1) 2.1. Create 2.2. Read 2.3. Delete 3. Article : User (N:1) 3.…"},{"id":"633d2abf-abb7-5325-92c0-54dbe1989fa6","parent":{"id":"976f6368-b1b7-5f0c-8a32-e5cfb6056227","name":"08_Django_Many_to_Many","relativePath":"Django/08_Django_Many_to_Many.md"},"frontmatter":{"title":"Django N:M Realationship","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Intro 1.1. Terms 1.2. The limits of N:1 Relationship 1.3. Intermediary Model 1.4. Many To Many Field 1.5. Many To Many Table 1.6. with…"},{"id":"f7ac871f-e347-59d7-8418-39557102d551","parent":{"id":"9f5cf10a-5b33-5d35-aa41-032787c3343b","name":"06_Django_QuerySet","relativePath":"Django/06_Django_QuerySet.md"},"frontmatter":{"title":"Django QuerySet","createdAt":"2022-12-24","updatedAt":"2022-12-25"},"excerpt":"1. QuerySet 1.1. Query 1.1. What is QuerySet 1.1.1. Check SQL Query 1.2. QuerySet API 1.3. QuerySet Evaluation and Caching 1.3.1. Evaluation…"},{"id":"b3d21f66-8f2b-59a8-81c4-587fe42f84f2","parent":{"id":"21cc89c1-794b-59d3-bb90-86f961c2bf51","name":"11_Django_REST_API","relativePath":"Django/11_Django_REST_API.md"},"frontmatter":{"title":"Django REST API","createdAt":"2022-11-08","updatedAt":"2022-12-28"},"excerpt":"1. HTTP 1.1. HTTP 정의 1.2. HTTP의 특징 1.3. HTTP Request Methods 1.3. HTTP Response Status Code 1.4. URI(Uniform Resource Indentifier) 1.5. URL…"},{"id":"255d6bb1-5984-5128-8fda-aa203cae6dcd","parent":{"id":"537a7f4b-d6af-50a5-9f04-a17b2eb274b5","name":"12_Django_REST_Authentication","relativePath":"Django/12_Django_REST_Authentication.md"},"frontmatter":{"title":"Django REST Authentication","createdAt":"2023-01-02","updatedAt":"2023-01-12"},"excerpt":"1. CORS 1.1. Same Origin Policy 1.2. Definition of Origin 1.3. CORS 1.3.1. django-cors-headers 2. Authentication 2.1. Authentication Class…"},{"id":"b1b31545-c67e-5d21-8254-dc52ed891c2b","parent":{"id":"e0689d95-499a-5f59-8d10-6132ecec9aef","name":"09_Django_Static_Media","relativePath":"Django/09_Django_Static_Media.md"},"frontmatter":{"title":"Django Static Files","createdAt":"2022-11-08","updatedAt":"2022-12-27"},"excerpt":"1. Static Files 1.1. Static Files 1.2. Static Files with Django 1.3. Deploy Static Files 1.3.1. STATIC_ROOT 1.3.2. Procedure 2. Media Files…"},{"id":"b97171dd-b5cf-5451-9b77-2e7a7840bcb7","parent":{"id":"cf91fadb-f3c3-5472-bbe0-45bb09d06c47","name":"05_SQLite3_SQL","relativePath":"Django/05_SQLite3_SQL.md"},"frontmatter":{"title":"SQL Basics","createdAt":"2022-12-28","updatedAt":"2022-12-28"},"excerpt":"1. Database 1.1. RDB 1.2. Structure 2. SQL 2.1. SQL 2.2. Types of SQL Commands 2.3. SQL Syntax 2.4. Import .csv to Table 3. DDL 3.1. CREATE…"}]}},"pageContext":{"pagePath":"posts/Django/07_Django_Many_to_One.md","regex":"/^(?!.*README).*Django.*$/","relativeDirectory":"Django","id":"55874a3b-56f1-5093-a858-1586c85f9dc2","parent":{"id":"a84a604d-81a4-5ee7-9914-73ce3a3e7e74","name":"07_Django_Many_to_One","relativePath":"Django/07_Django_Many_to_One.md"}}},"staticQueryHashes":["3300660363","3571427910"],"slicesMap":{}}