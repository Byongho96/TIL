{"componentChunkName":"component---src-templates-post-index-tsx","path":"/posts/Django/09_Django_Static_Media.md/","result":{"data":{"markdownRemark":{"id":"44df22b1-b52a-58a0-80aa-087d36beccf2","html":"<ul>\n<li><a href=\"#1-static-files\">1. Static Files</a>\n<ul>\n<li><a href=\"#11-static-files\">1.1. Static Files</a></li>\n<li><a href=\"#12-static-files-with-django\">1.2. Static Files with Django</a></li>\n<li><a href=\"#13-deploy-static-files\">1.3. Deploy Static Files</a>\n<ul>\n<li><a href=\"#131-static_root\">1.3.1. STATIC_ROOT</a></li>\n<li><a href=\"#132-procedure\">1.3.2. Procedure</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"#2-media-files\">2. Media Files</a>\n<ul>\n<li><a href=\"#21-imagefield\">2.1. ImageField()</a>\n<ul>\n<li><a href=\"#212-filefield\">2.1.2. FileField()</a></li>\n</ul>\n</li>\n<li><a href=\"#22-before-using-media-files\">2.2. Before Using Media Files</a></li>\n</ul>\n</li>\n<li><a href=\"#3-image-file-crud\">3. Image File CRUD</a>\n<ul>\n<li><a href=\"#31-create\">3.1. Create</a></li>\n<li><a href=\"#32-read\">3.2. READ</a></li>\n<li><a href=\"#33-update\">3.3. UPDATE</a></li>\n</ul>\n</li>\n<li><a href=\"#4-image-resizing\">4. Image Resizing</a>\n<ul>\n<li><a href=\"#41-django-imagekit\">4.1. Django Imagekit</a></li>\n<li><a href=\"#42-make-thumbnail-without-saving-the-original-image\">4.2. Make Thumbnail Without Saving the Original Image</a></li>\n<li><a href=\"#43-make-thumbnail-with-saving-the-original-image\">4.3. Make Thumbnail With Saving the Original Image</a></li>\n</ul>\n</li>\n</ul>\n<hr>\n<h1 id=\"1-static-files\" style=\"position:relative;\"><a href=\"#1-static-files\" aria-label=\"1 static files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Static Files</h1>\n<h2 id=\"11-static-files\" style=\"position:relative;\"><a href=\"#11-static-files\" aria-label=\"11 static files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1. Static Files</h2>\n<p><strong>Files that do not require additional processing before being shown to the user.</strong> To request a static file to the server, we should know the address(url) of the file</p>\n<ul>\n<li><strong>Examples</strong>\n<ul>\n<li>media file</li>\n<li>javascript file</li>\n<li>CSS file</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"12-static-files-with-django\" style=\"position:relative;\"><a href=\"#12-static-files-with-django\" aria-label=\"12 static files with django permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2. Static Files with Django</h2>\n<ol>\n<li>\n<p><strong>Check <code class=\"language-text\">INSTALLED_APPS</code> in settings.py</strong><br>\nIt is set by default.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">INSTALLED_APPS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>staticfile<span class=\"token punctuation\">,</span>\r\n <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p><strong>Set <code class=\"language-text\">STATIC_DIRS</code> in settings.py</strong><br>\nIt's about setting an additional static file path in addition to the app path.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Default: []</span>\r\nSTATICFILES_DIRS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    BASE_DIR <span class=\"token operator\">/</span> <span class=\"token string\">'static'</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">]</span></code></pre></div>\n</li>\n<li>\n<p><strong>Set <code class=\"language-text\">STATIC_URL</code> in settings.py</strong><br>\nThe path corresponding to <code class=\"language-text\">STATIC_ROOT</code>. It is set to <code class=\"language-text\">STATIC_URL = '/static/'</code> by default.</p>\n</li>\n<li>\n<p><strong>Make 'static/app_name/' folder for each app to divide namespace</strong><br>\n<code class=\"language-text\">my_app/static/my_app/sample_img.jpg</code></p>\n</li>\n<li>\n<p><strong>print with static templates tags</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% extends 'must_be_on_the_top.html' %}\r\n<span class=\"token comment\">&lt;!-- import static --></span>\r\n{% load static %}\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{% static 'app_name/img_name.jpg' %}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n</li>\n</ol>\n<h2 id=\"13-deploy-static-files\" style=\"position:relative;\"><a href=\"#13-deploy-static-files\" aria-label=\"13 deploy static files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3. Deploy Static Files</h2>\n<h3 id=\"131-static_root\" style=\"position:relative;\"><a href=\"#131-static_root\" aria-label=\"131 static_root permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3.1. STATIC_ROOT</h3>\n<p><strong>Where all the static files are collected</strong> when the command <code class=\"language-text\">collectstatic</code> is excuted. The default is <code class=\"language-text\">None</code>. If <code class=\"language-text\">DEBUG = TRUE</code>, STATIC_ROOT is not applied.</p>\n<p>It's required because the server which actually runs the project doesn't know where the static files are.</p>\n<h3 id=\"132-procedure\" style=\"position:relative;\"><a href=\"#132-procedure\" aria-label=\"132 procedure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.3.2. Procedure</h3>\n<ol>\n<li><strong>Set <code class=\"language-text\">STATIC_ROOT</code> in settings.py</strong>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">STATIC_ROOT <span class=\"token operator\">=</span> BASE_DIR <span class=\"token operator\">/</span> <span class=\"token string\">'staticfiles'</span></code></pre></div>\n</li>\n<li><strong>Run the cmd</strong><br>\n<code class=\"language-text\">python manage.py collectstatic</code></li>\n</ol>\n<h1 id=\"2-media-files\" style=\"position:relative;\"><a href=\"#2-media-files\" aria-label=\"2 media files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Media Files</h1>\n<p><strong>The static files which are uploaded by the user.</strong></p>\n<h2 id=\"21-imagefield\" style=\"position:relative;\"><a href=\"#21-imagefield\" aria-label=\"21 imagefield permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1. ImageField()</h2>\n<ul>\n<li><strong>The model field for image files.</strong></li>\n<li>It inherits FileField and has a function of checking the validity of an image file.</li>\n<li><strong>The instance of ImageField is a string with a maximum length of 100</strong>\n<ul>\n<li>The string is the path after <code class=\"language-text\">MEDIA_ROOT</code></li>\n<li>When the same name of image is saved in the exactly the same directory, a random string is added to the name</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"212-filefield\" style=\"position:relative;\"><a href=\"#212-filefield\" aria-label=\"212 filefield permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.1.2. FileField()</h3>\n<p><strong>FileField(upload_to='', storage=None, max_length=100, **options)</strong></p>\n<ul>\n<li><strong>upload_to</strong>\n<ul>\n<li>setting the detailed path (path after MEDIA_ROOT)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"22-before-using-media-files\" style=\"position:relative;\"><a href=\"#22-before-using-media-files\" aria-label=\"22 before using media files permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2.2. Before Using Media Files</h2>\n<ol>\n<li>\n<p><strong>Set <code class=\"language-text\">MEDIA_ROOT</code></strong><br>\nThe absolute path where all the media files will be stored. It must be different from <code class=\"language-text\">STATIC_ROOT</code></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Default: ''</span>\r\nMEDIA_ROOT <span class=\"token operator\">=</span> BASE_DIR <span class=\"token operator\">/</span> <span class=\"token string\">'media'</span></code></pre></div>\n</li>\n<li>\n<p><strong>Set <code class=\"language-text\">MEDIA_URL</code></strong><br>\nThe path corresponding to <code class=\"language-text\">MEDIA_ROOT</code>. It must be different from STATIC_URL.<br>\n<code class=\"language-text\">MEDIA_URL = '/media/'</code></p>\n</li>\n<li>\n<p><strong>Link MEDIA_URL to MEDIA_ROOT</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># project/urls.py</span>\r\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf <span class=\"token keyword\">import</span> settings\r\n<span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>conf<span class=\"token punctuation\">.</span>urls<span class=\"token punctuation\">.</span>static <span class=\"token keyword\">import</span> static\r\n\r\nurlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> static<span class=\"token punctuation\">(</span>settings<span class=\"token punctuation\">.</span>MEDIA_URL<span class=\"token punctuation\">,</span> document_root<span class=\"token operator\">=</span>settings<span class=\"token punctuation\">.</span>MEDIA_ROOT<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n<li>\n<p><strong>Install Pillow library</strong><br>\nThe libarary which is necessary for processing image files in Python.<br>\n<code class=\"language-text\">pip install Pillow</code></p>\n</li>\n</ol>\n<h1 id=\"3-image-file-crud\" style=\"position:relative;\"><a href=\"#3-image-file-crud\" aria-label=\"3 image file crud permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Image File CRUD</h1>\n<h2 id=\"31-create\" style=\"position:relative;\"><a href=\"#31-create\" aria-label=\"31 create permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.1. Create</h2>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    image <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ImageField<span class=\"token punctuation\">(</span>blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> upload_to<span class=\"token operator\">=</span><span class=\"token string\">'images/'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>\n<p><strong>blank</strong></p>\n<ul>\n<li>The field can be blank, and '' can pass the validation test.</li>\n<li>validation-related</li>\n</ul>\n</li>\n<li>\n<p><strong>upload_to(optional)</strong></p>\n<ul>\n<li>\n<p>Sets the detailed path (path after MEDIA_ROOT)</p>\n<ul>\n<li>Example of using Python time module<br>\n<code class=\"language-text\">upload_to = '%Y/%m/%d/</code></li>\n</ul>\n</li>\n<li>\n<p>A functon can be used as the parameter.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">articles_image_path</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> filename<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">return</span> <span class=\"token string-interpolation\"><span class=\"token string\">f'images/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>self<span class=\"token punctuation\">.</span>user<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">}</span></span><span class=\"token string\">/</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>filename<span class=\"token punctuation\">}</span></span><span class=\"token string\">'</span></span>\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    image <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ImageField<span class=\"token punctuation\">(</span>blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> upload_to<span class=\"token operator\">=</span>articles_image_path<span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li>The arguments are fixed like above. <a href=\"https://docs.djangoproject.com/en/4.1/ref/models/fields/#filefield\">Django doc about upload_to</a></li>\n<li>pk can't be used in the function becuase the function is excuted before saved</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>create.html</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">enctyp</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>multipart/form-data<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ul>\n<li><strong>enctype</strong>\n<ul>\n<li>Sets the encoding type of the form</li>\n<li>Default: aplication/x-www-from-rulencoded</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><strong>views.py</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">created</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">:</span>\r\n        form <span class=\"token operator\">=</span> ArticleForm<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>FILES<span class=\"token punctuation\">)</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<ul>\n<li>BaseModelForm(data=None, files=None, ..., instance=None)</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"32-read\" style=\"position:relative;\"><a href=\"#32-read\" aria-label=\"32 read permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.2. READ</h2>\n<ul>\n<li><strong>detail.html</strong>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\">{% if article.image %}\r\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ article.image.url }}<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">alt</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>{{ article.image }}<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\r\n{% endif %}</code></pre></div>\n</li>\n</ul>\n<h2 id=\"33-update\" style=\"position:relative;\"><a href=\"#33-update\" aria-label=\"33 update permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.3. UPDATE</h2>\n<p><strong>Strictly speaking, it's not updating but a replacement</strong>\r\nThe manage the previous file, you should use an addtional library like <a href=\"https://pypi.org/project/django-cleanup/\">django-cleanup</a></p>\n<ul>\n<li><strong>update.html</strong>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">action</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>#<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>POST<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">enctyp</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>multipart/form-data<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span></code></pre></div>\n</li>\n<li><strong>views.py</strong>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    article <span class=\"token operator\">=</span> Article<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>pk<span class=\"token operator\">=</span>pk<span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">:</span>\r\n        form <span class=\"token operator\">=</span> ArticleForm<span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">.</span>POST<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">.</span>FILES<span class=\"token punctuation\">,</span> instance<span class=\"token operator\">=</span>article<span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n</li>\n</ul>\n<h1 id=\"4-image-resizing\" style=\"position:relative;\"><a href=\"#4-image-resizing\" aria-label=\"4 image resizing permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Image Resizing</h1>\n<p>Resizing the uploaded image to use storage space efficiently</p>\n<h2 id=\"41-django-imagekit\" style=\"position:relative;\"><a href=\"#41-django-imagekit\" aria-label=\"41 django imagekit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.1. Django Imagekit</h2>\n<ol>\n<li><strong>Install dajngo-imagekit</strong>\n<ul>\n<li><code class=\"language-text\">pip install dajngo-imagekit</code></li>\n</ul>\n</li>\n<li><strong>Add to INSTALLED_APPS</strong>\n<ul>\n<li><code class=\"language-text\">INSTALLED_APPS = ['imagekit', ]</code></li>\n</ul>\n</li>\n</ol>\n<h2 id=\"42-make-thumbnail-without-saving-the-original-image\" style=\"position:relative;\"><a href=\"#42-make-thumbnail-without-saving-the-original-image\" aria-label=\"42 make thumbnail without saving the original image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.2. Make Thumbnail Without Saving the Original Image</h2>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> imagekit<span class=\"token punctuation\">.</span>processors <span class=\"token keyword\">import</span> Thumbnail\r\n<span class=\"token keyword\">from</span> imagekit<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> ProcessedImageField\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    image <span class=\"token operator\">=</span> ProcessedIamgeField<span class=\"token punctuation\">(</span>\r\n        blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>\r\n        upload_to<span class=\"token operator\">=</span><span class=\"token string\">'thumbnails/'</span><span class=\"token punctuation\">,</span>\r\n        processors<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>Thumbnail<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\"># pixel : width, height</span>\r\n        <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">'JPEG'</span><span class=\"token punctuation\">,</span>\r\n        options<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'quality'</span><span class=\"token punctuation\">:</span><span class=\"token number\">80</span><span class=\"token punctuation\">}</span>              <span class=\"token comment\"># resolution</span>\r\n    <span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"43-make-thumbnail-with-saving-the-original-image\" style=\"position:relative;\"><a href=\"#43-make-thumbnail-with-saving-the-original-image\" aria-label=\"43 make thumbnail with saving the original image permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" height=\"20\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"20\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4.3. Make Thumbnail With Saving the Original Image</h2>\n<ul>\n<li>\n<p><strong>models.py</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> imagekit<span class=\"token punctuation\">.</span>processors <span class=\"token keyword\">import</span> Thumbnail\r\n<span class=\"token keyword\">from</span> imagekit<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> ProcessedImageField<span class=\"token punctuation\">,</span> ImageSpecField\r\n\r\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Article</span><span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">.</span>Model<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\r\n    image <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>ImageField<span class=\"token punctuation\">(</span>blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\r\n    image_thumbnail <span class=\"token operator\">=</span> ProcessedImageField<span class=\"token punctuation\">(</span>\r\n        source<span class=\"token operator\">=</span><span class=\"token string\">'image'</span><span class=\"token punctuation\">,</span>\r\n        processors<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>Thumbnail<span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token number\">300</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>   <span class=\"token comment\"># pixel : width, height</span>\r\n        <span class=\"token builtin\">format</span><span class=\"token operator\">=</span><span class=\"token string\">'JPEG'</span><span class=\"token punctuation\">,</span>\r\n        options<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token string\">'quality'</span><span class=\"token punctuation\">:</span><span class=\"token number\">80</span><span class=\"token punctuation\">}</span>              <span class=\"token comment\"># resolution</span>\r\n    <span class=\"token punctuation\">)</span></code></pre></div>\n<ul>\n<li><strong>The column of the <code class=\"language-text\">image_thumbnail</code> is not created.</strong> Only a cache file is created in the cache folder when the field is used.</li>\n</ul>\n</li>\n</ul>","tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-static-files\">1. Static Files</a></p>\n<ul>\n<li>\n<p><a href=\"#11-static-files\">1.1. Static Files</a></p>\n</li>\n<li>\n<p><a href=\"#12-static-files-with-django\">1.2. Static Files with Django</a></p>\n</li>\n<li>\n<p><a href=\"#13-deploy-static-files\">1.3. Deploy Static Files</a></p>\n<ul>\n<li><a href=\"#131-static_root\">1.3.1. STATIC_ROOT</a></li>\n<li><a href=\"#132-procedure\">1.3.2. Procedure</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-media-files\">2. Media Files</a></p>\n<ul>\n<li>\n<p><a href=\"#21-imagefield\">2.1. ImageField()</a></p>\n<ul>\n<li><a href=\"#212-filefield\">2.1.2. FileField()</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#22-before-using-media-files\">2.2. Before Using Media Files</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-image-file-crud\">3. Image File CRUD</a></p>\n<ul>\n<li><a href=\"#31-create\">3.1. Create</a></li>\n<li><a href=\"#32-read\">3.2. READ</a></li>\n<li><a href=\"#33-update\">3.3. UPDATE</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-image-resizing\">4. Image Resizing</a></p>\n<ul>\n<li><a href=\"#41-django-imagekit\">4.1. Django Imagekit</a></li>\n<li><a href=\"#42-make-thumbnail-without-saving-the-original-image\">4.2. Make Thumbnail Without Saving the Original Image</a></li>\n<li><a href=\"#43-make-thumbnail-with-saving-the-original-image\">4.3. Make Thumbnail With Saving the Original Image</a></li>\n</ul>\n</li>\n</ul>","frontmatter":{"createdAt":"2022-11-08","isCompleted":true,"reference":null,"title":"Django Static Files","updatedAt":"2022-12-27"}}},"pageContext":{"pagePath":"posts/Django/09_Django_Static_Media.md","id":"44df22b1-b52a-58a0-80aa-087d36beccf2","parent":{"id":"96311594-f51e-5d4d-9660-adc9b52d31a9","name":"09_Django_Static_Media","relativePath":"Django/09_Django_Static_Media.md"}}},"staticQueryHashes":["3300660363","3571427910","82772122"],"slicesMap":{}}