---
title: '06. 관계 데이터 연산'
updatedAt: '2023-03-29'
createdAt: '2022-10-25'
isCompleted: true
reference: '김연희, 『데이터베이스 개론』, 한빛아카데미(2022.07.20), Chpater 06'
---

> 관계 데이터 연산을 일반 집합 연산자와 순수 관계 연산자로 나누어 학습한다.

- [6.1. 관계 데이터 연산의 개념](#61-관계-데이터-연산의-개념)
- [6.2. 관계 대수](#62-관계-대수)
  - [6.2.1. 관계 대수의 개념과 연산자](#621-관계-대수의-개념과-연산자)
  - [6.2.2. 일반 집합 연산자](#622-일반-집합-연산자)
  - [6.2.3. 순수 관계 연산자](#623-순수-관계-연산자)
  - [6.2.4. 관계 대수를 이용한 질의 표현](#624-관계-대수를-이용한-질의-표현)
  - [6.2.5. 확장된 관계 대수 연산자](#625-확장된-관계-대수-연산자)
- [6.3. 관계 해석](#63-관계-해석)

---

## 6.1. 관계 데이터 연산의 개념

> 관계 데이터 모델에서 원하는 데이터를 추출하기 위해 릴레이션에 처리를 요구하는 것으로, 관계 대수와 관계 해석으로 나눌 수 있다.

관계 대수(relational algebra)는 데이터의 처리 과정을 순서대로 기술하는 절차 언어이고,  
관계 해석(relational calculus)는 원하는 데이터가 무엇인지만 기술하는 비절차적 언어이다.

이 둘은 개념적 언어로 실제 사용되지는 않는다. 하지만 데이터 언어의 유용성을 검증하는 도구로써 쓰인다.

## 6.2. 관계 대수

### 6.2.1. 관계 대수의 개념과 연산자

> 관계 대수는 원하는 결과를 얻기 위해 릴레이션을 처리하는 과정을 순서대로 기술하는 절차적 언어이다.

관계대수는 연산자들의 집합으로 정의될 수 있고, 피연산자와 연산의 결과값은 모두 릴레이션이다.

### 6.2.2. 일반 집합 연산자

다음 중 합집합, 교집합, 차집합의 경우 피연산자인 2개의 릴레이션이 <mark style='background-color: #fff5b1'>합병 가능(union-compatible)</mark>해야 한다.

- 합병 가능
  - 두 릴레이션의 속성 갯수(차수)가 같다.
  - 서로 대응되는 속성의 도메인(데이터 타입)이 같다.

<img src="./images/%EC%9D%BC%EB%B0%98%EC%A7%91%ED%95%A9%EC%97%B0%EC%82%B0%EC%9E%90.png" alt="일반 집합 연산자" width=700 />

- **합집합**

  - R ∪ S
  - R ∪ S = S ∪ R
  - (R ∪ S) ∪ T = R ∪ (S ∪ T)
  - 중복 데이터는 배제한다.

- **교집합**

  - R ∩ S
  - R ∩ S = S ∩ R
  - (R ∩ S) ∩ T = R ∩ (S ∩ T)
  - 중복 데이터는 배제한다.

- **차집합**

  - R - S

- **카티션 프로덕트(Cartesian Product)**
  - R X S
  - R X S = S X R
  - (R X S) X T = R X (S X T)
  - 동일한 이름의 속성의 경우 릴레이션 이름을 앞에 붙인다(Ex. R.번호)
  - 차수 = R의 차수 + S의 차수
  - 카디널리티 = R의 카디널리티 \* S의 카디널리티  
    <img src="./images/%EC%B9%B4%ED%8B%B0%EC%85%98%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8.PNG" alt="카티션 프로덕트" width=400/>

### 6.2.3. 순수 관계 연산자

- **셀렉트**  
  조건식을 만족하는 투플(행)을 선택하여 새로운 릴레이션으로 반환

  - <span style="font-size:120%">σ</span><span style="font-size:70%">조건식</span>(릴레이션)
  - <mark style='background-color: #f6f8fa'><span style="font-size:120%">σ</span><span style="font-size:70%">height>170</span></span>(Person)</mark>
  - <span style="font-size:120%">σ</span><span style="font-size:70%">조건식1</span>(<span style="font-size:120%">σ</span><span style="font-size:70%">조건식2</span>(릴레이션)) = <span style="font-size:120%">σ</span><span style="font-size:70%">조건식2</span>(<span style="font-size:120%">σ</span><span style="font-size:70%">조건식1</span>(릴레이션)) = <span style="font-size:120%">σ</span><span style="font-size:70%">조건식1 ^ 조건식2</span>(릴레이션)

- **프로젝트**  
  조건식을 만족하는 속성(열)을 선택하여 새로운 릴레이션으로 반환

  - <span style="font-size:120%">π</span><span style="font-size:70%">속성리스트</span>
  - <mark style='background-color: #f6f8fa'><span style="font-size:120%">π</span><span style="font-size:70%">name, height</span></span>(Person)</mark>

- **조인**  
  두 릴레이션에서 조인 속성 값이 조건식을 만족하는 투플에 대해 새로운 릴레이션을 만들어 반환. 동일한 속성 이름의 경우 '릴레이션이름.속성이름' 형식으로 표기한다.

  - **세타 조인**
    조건식을 만족하는 투플끼리만 연결하여 새로운 릴레이션을 만들어 반환
    - R <span style="font-size:120%">⋈</span><span style="font-size:70%">AθB</span> S
    - A는 릴레이션 R의 속성, B는 릴레이션 S의 속성
    - θ에는 비교연산자(>, >=, <, <=, =, !=)가 들어간다.
  - **동등 조인**  
    세타 조인 중 θ가 = 인 조인
    - R <span style="font-size:120%">⋈</span><span style="font-size:70%">A=B</span> S  
      <img src="./images/%EC%84%B8%ED%83%80%EC%A1%B0%EC%9D%B8.PNG" alt="동등조인" width=500/>
  - **자연 조인**  
    두 릴레이션의 중복된 속성이 모두 일치하는 투플만을 합친 릴레이션
    - R <span style="font-size:120%">⋈</span><span style="font-size:70%">N</span> S  
      <img src="./images/%EC%9E%90%EC%97%B0%EC%A1%B0%EC%9D%B8.PNG" alt="자연조인" width=500/>

- **디비전**  
   R의 속성이 S이 속성값을 모두 가진 투플에서 S가 가진 속성을 제외한 속성만을 구해서 새로운 릴레이션으로 반환.
  - R ÷ S  
    <img src="./images/%EB%94%94%EB%B9%84%EC%A0%BC.PNG" alt="디비전" width=500/>

### 6.2.4. 관계 대수를 이용한 질의 표현

- **등급이 gold인 고객의 이름과 나이를 검색하시오.**  
  <span style="font-size:120%">π</span><span style="font-size:70%">이름, 나이</span>(<span style="font-size:120%">σ</span><span style="font-size:70%">등급=gold</span>(고객))

- **고객이름이 원유선인 고객의 등급과, 원유선 고객이 주문한 주문제품, 수량을 검색하시오.**  
  <span style="font-size:120%">π</span><span style="font-size:70%">등급, 주문제품, 수량</span>(<span style="font-size:120%">σ</span><span style="font-size:70%">고객이름=원유선</span>(고객))

- **주문수량이 10개 미만인 주문 내역을 제외하고 검색하시오.**  
  <span style="font-size:120%">σ</span><span style="font-size:70%">수량>10</span>(주문)

### 6.2.5. 확장된 관계 대수 연산자

- **세미 조인**  
  두 릴레이션이 모든 속성을 표현하지 않고, 연산자 앞의 릴레이션의 속성만을 표기하는 조인방법

  - **R ⋉ S**
  - **R ⋉ S** != **S ⋉ R**  
    <img src="./images/%EC%84%B8%EB%AF%B8%EC%A1%B0%EC%9D%B8.PNG" alt="세미조인" width=600/>

- **외부 조인**  
   두 릴레이션에서 공통 속성이 있는 튜플 뿐만 아니라, 그렇지 않은 튜플들도 가져와 빈 데이터를 null로 채워 표시한다.  
  <img src="./images/%EC%99%B8%EB%B6%80%EC%A1%B0%EC%9D%B8%EB%8D%B0%EC%9D%B4%ED%84%B0.PNG" alt="외부 조인 데이터" width=600/>

  - **R ⟕ S (왼쪽 외부 조인)**  
    <img src="./images/%EC%99%BC%EC%AA%BD%EC%99%B8%EB%B6%80%EC%A1%B0%EC%9D%B8.PNG" alt="왼쪽 외부 조인" width=500/>
  - **R ⟖ S (오른쪽 외부 조인)**  
    <img src="./images/%EC%98%A4%EB%A5%B8%EC%AA%BD%EC%99%B8%EB%B6%80%EC%A1%B0%EC%9D%B8.PNG" alt="오른쪽 외부 조인" width=500/>
  - **R ⟗ S (완전 외부 조인)**  
    <img src="./images/%EC%99%B8%EB%B6%80%EC%A1%B0%EC%9D%B8.PNG" alt="완전 외부 조인" width=500/>

## 6.3. 관계 해석

> 원하는 데이터가 무엇인지만 기술하는 비절차적 언어로, 데이터를 처리하는 기능과 처리를 요구하는 표현력은 관계대수와 동일하다. 즉 이 둘은 서로 번역될 수 있다.

관계 해석은 프레디킷 해석([술어논리](https://ko.wikipedia.org/wiki/%EC%88%A0%EC%96%B4_%EB%85%BC%EB%A6%AC), [Example](https://chayan-memorias.tistory.com/50))에 기반을 두고 있다. 또한 관계해석은 투플 관계 해석과 도메인 관계 해석으로 나뉠 수 있다. [참고](https://velog.io/@blacklandbird/%EA%B4%80%EA%B3%84-%ED%95%B4%EC%84%9D)

관계 해석에 관한 더 자세한 내용은 Ch7에서 정리한다.
