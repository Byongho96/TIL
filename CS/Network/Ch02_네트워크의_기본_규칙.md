미즈구치 카츠야, 『모두의 네트워크』, 이승룡 역, 길벗(2022), 2장

# Ch2. 네트워크의 기본 규칙 <!-- omit in toc -->

- [2.1. 네트워크의 규칙](#21-네트워크의-규칙)
  - [2.1.1. 프로토콜](#211-프로토콜)
- [2.2. OSI 모델과 TCP/IP 모델](#22-osi-모델과-tcpip-모델)
  - [2.2.1. OSI 모델](#221-osi-모델)
  - [2.2.2. TCP/IP 모델](#222-tcpip-모델)
- [2.3. 캡슐화와 역캡슐화](#23-캡슐화와-역캡슐화)
  - [2.3.1. 캡슐화와 역캡슐화](#231-캡슐화와-역캡슐화)
- [2.4. VPN](#24-vpn)
  - [2.4.1. VPN 원리](#241-vpn-원리)

네트워크 통신의 기본 규칙인 프로토콜 개념에 대해 학습한다.

## 2.1. 네트워크의 규칙

### 2.1.1. 프로토콜

> 컴퓨터 또는 전자기기 간의 원활한 통신을 위해 약속한 통신 규약

인터넷은 TCP/IP 프로토콜 기반 하에 동작한다.  
인터넷을 통한 이메일 송수신에는 SMTP (Simple Mail Transfer Protocol)이 적용되고, 전 세계의 메일서버가 이를 따른다.
월드 와이드 웹 역시 HTTP(HyperText Transfer Protocol)를 따른다.

## 2.2. OSI 모델과 TCP/IP 모델

### 2.2.1. OSI 모델

> ISO(isos: 그리스어로 평등하다)라는 약칭을 가진 국제 표준화기구가 제안한 인터넷 통신 모델이다. 인터넷 프로토콜의 표준안(청사진)이라고 볼 수 있다.

OSI 모델은 통신 시스템을 7개의 추상적인 계층으로 나누었다. 각 계층의 자신만의 특정 작업을 수행하며, 자신의 바로 위아래 계층과 정보를 주고받는다.

| 계층  | 이름                              | 설명                                                                                    |
| ----- | --------------------------------- | --------------------------------------------------------------------------------------- |
| 7계층 | Application Layer(응용 계층)      | 어플리케이션 서비스가 동작한다.                                                         |
| 6계층 | Presentaion Layer(표현 계층)      | 응용 계층이 데이터를 사용할 수 있도록 가공한다. (인코딩/디코딩, 암호화/복호화, 압축 등) |
| 5계층 | Session Layer(세션 계층)          | 세션을 확립, 유지, 중단하는 작업을 수행한다.                                            |
| 4계층 | Transport Layer(전송 계층)        | 신뢰할 수 있는 데이터 통신을 구현한다.                                                  |
| 3계층 | Network Layer(네트워크 계층)      | 논리주소(IP주소)를 바탕으로 데이터의 통신경로를 결정한다(데이터 라우팅).                |
| 2계층 | Data Link Layer(데이터 링크 계층) | 물리주소(MAC주소)를 바탕으로 기기 간의 데이터 전송(1홉)을 담당한다.                     |
| 1계층 | Physical Layer(물리 계층)         | 시스템 간의 물리적인 연결과 전기 신호를 변환 및 제어한다.                               |

### 2.2.2. TCP/IP 모델

> OSI 참조 모델을 기반으로 상업적이고 실무적으로 이용될 수 있도록 단순화된 모델로, 현재 인터넷 통신에서 가장 보편적으로 쓰이는 프로토콜의 모음이다.

<table  style="text-align:center">
  <tr>
    <td>OSI</td>
    <td>TCP/IP</td>
  </tr>
  <tr>
    <td>Application Layer<br/>(응용 계층)</td>
    <td rowspan="3">Application Layer<br/>(응용 계층)</td>
  </tr>
  <tr>
    <td>Presentation Layer<br/>(표현 계층)</td>
  </tr>
  <tr>
    <td>Session Layer<br/>(세션 계층)</td>
  </tr>
  <tr>
    <td>Transport Layer<br/>(전송 계층)</td>
    <td>Transport Layer<br/>(전송 계층)</td>
  </tr>
  <tr>
    <td>Network Layer<br/>(네트워크 계층)</td>
    <td>Internet Layer<br/>(인터넷 계층)</td>
  </tr>
  <tr>
    <td>Data Link Layer<br/>(데이터 링크 계층)</td>
    <td rowspan="3">Network Access Layer<br/>(네트워크 접속 계층)</td>
  </tr>
  <tr>
    <td>Physical Layer<br/>(물리 계층)</td>
  </tr>
</table>

## 2.3. 캡슐화와 역캡슐화

### 2.3.1. 캡슐화와 역캡슐화

<img src="./images/캡슐화.jpg" alt="캡슐화" width=600/>

<img src="./images/역캡슐화.jpg" alt="역캡슐화" width=600/>

- **캡슐화**
  송신측 컴퓨터의 각 계층에서, 수신측 컴퓨터의 동일 계층에서 필요한 정보(헤더와 트레일러)를 데이터에 추가하며 하위 계층으로 보내는 과정
- **역캡슐화**
  수신측 컴퓨터의 각 계층에서, 데이터를 처리하기 위해 헤더와 트레일러를 제거하며 상위 계층으로 보내는 과정

## 2.4. VPN

> 여러 인트라넷과 개별 클라이언트를 인터넷을 통해 연결하는 사설 통신망이다.

인트라넷은 해당되는 컴퓨터만 전용선으로 연결해서 제3자가 함부로 접근하지 못하게 만든다. 따라서 회선이 없는 지역에서는 망 자체에 접근이 불가능해지고, 그에 따라 전국, 해외 단위로 회사가 커지면 커질수록 전용선 구축 비용이 천문학적으로 늘어난다. 따라서 **인트라넷을 확장성이 뛰어난 인터넷처럼 사용할 수 있도록 나타난 기술이 VPN이다.**

### 2.4.1. VPN 원리

1. 인터넷에만 연결된 단말기, 인트라넷에만 연결된 단말기, 인터넷과 인트라넷에 동시에 연결된 VPN 라우터가 있다.
2. 인터넷에만 연결된 단말기에서는 인트라넷에 접근할 수는 없다. 왜냐하면 망이 완전히 분리되어 있기 때문인데, 이를 이어주는 브리지 같은 역할을 하는것이 VPN 라우터다.
3. 인터넷 단말기에서 라우터에 VPN 프로토콜 중 하나를 이용하여 연결을 시도한다. 연결시에는 비밀번호 같은 자격 증명이 필요한 경우가 보통이며 성공시에는 단말기와 VPN 라우터 사이에 암호화된 연결이 형성되게 된다. 이를 터널링이라고 한다.
4. VPN 라우터는 해당 단말기가 마치 인트라넷에 연결된 것처럼 단말기와 인트라넷 사이를 중계하는 역할을 수행하게 된다. 따라서 단말기는 인터넷과 인트라넷을 동시에 사용할 수 있는 상태가 되는 것인데, 단말기를 통해 인트라넷에 접속한 경로를 보면 인터넷/인트라넷 상에는 전부 라우터까지의 접속만 수행한 것으로 보인다.
5. 이를 이용해 정부나 ISP의 검열이나 접속 차단을 피할 수도 있는데, 라우터까지의 모든 통신 기록이 암호화되므로 패킷을 열어보기 힘들다. 또 패킷 도착지가 라우터 주소에서 끊기기 때문에 어느 사이트에 접속하는지도 알 수 없게 된다.
