김연희, 『데이터베이스 개론』, 한빛아카데미(2022.07.20), Chpater 10

# Ch10. 회복과 병행 제어

데이터베이스에 문제가 발생했을 대 이를 원래 상태로 회복하고, 사용자들이 데이터베이스를 동시에 사용하더라도 다툼 없이 사이좋게 사용할 수 있도록 하는 병행 제어 기능을 알아보자

## 10.1. 트랜잭션

### 10.1.1. 트랜잭션의 개념

트랜잭션은 작업 하나를 수행하는 데 필요한 데이터베이스의 연산(SQL문)들을 모아놓은 것으로, 데이터베이스에서 논리적인 작업의 단위가 된다. 도한 데이터베이스에 장애가 발생했을 대 데이터를 복구사는 작업의 단위도 된다.

예를들어 A가 B에게 500원을 이체하는 계좌이체 트랜잭션의 다음과 같이 2개의 SQL문으로 구성할 수 있다.

```sql
UPDATE 계좌
SET 잔액 = 잔액 - 500
WHERE 계좌소유자 = 'A';

UPDATE 계좌
SET 잔액 = 잔액 + 500
WHERE 계좌소유자 = 'B';
```

만일 시스템의 장애로 첫 번째 SQL문만 실행되는 오류가 발생하였다면, 시스템이 정상적으로 작동하게 되었을 때 두 번째 UPDATE문을 실행하거나, 첫 번째 UPDATE문의 실행을 취소하여 트랜잭션을 작업 전 상태로 되돌아가게 해야 한다.

### 10.1.2. 트랜잭션의 특성

- **원자성**
  - 트랜잭션을 구성하는 연산들은 모두 실행되거나, 혹은 하나도 실행되지 않아야 한다. 즉 트랜잭션을 구성하는 연산 중 일부만 데이터베이스에 반영되는 일이 없게 한다.
- **일관성**
  - 트랜잭션이 이루어진 후에도 데이터베이스의 일관성을 유지해야 한다. 즉 데이터베이스의 제약이나 규칙을 만족해야 한다.
- **격리성**
  - 현재 수행 중인 트랜잭션이 완료될 때까지 트랜잭션이 생성한 중간 연산 결과에 다른 트랜잭션들이 접근할 수 없음을
- **지속성**

### 10.1.3. 트랜잭션의 연산

### 10.1.4. 트랜잭션의 상태

## 10.2. 장애와 회복

### 10.2.1. 장애와 유형

### 10.2.2. 데이터베이스의 저장 연산

### 10.2.3. 회복 기법

## 10.3. 병행 제어

### 10.3.1. 병행 수행과 병행 제어

### 10.3.2. 병행 수행의 문제

### 10.3.3. 트랜잭션 스케쥴

### 10.3.4. 병행 제어 기법
